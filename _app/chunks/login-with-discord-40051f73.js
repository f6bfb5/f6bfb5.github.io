import{S as Ta,i as Oa,s as La,C as Os,w as Pa,x as Ra,y as Sa,z as wa,A as pa,q as Aa,o as ja,B as Ha,v as xa,P as ca,e as o,t as p,k as i,c as l,a as r,h as c,d as t,m as d,b as E,f as Ba,g as n,G as s,E as Na}from"./index-281cf758.js";import{P as Ua}from"./_post-bcd7746f.js";function $a(V){let f,v,m,b,_,k,L,ue,u,fe,_e,h,q,ft,H,_t,Et,Ee,kt,mt,x,vt,ke,ht,Dt,It,C,yt,me,bt,Ct,ve,Tt,Ot,je,Q,Lt,He,D,he,Pt,Rt,T,St,wt,At,jt,Ht,xt,De,Bt,Nt,B,Ut,$t,zt,xe,X,Mt,Be,P,Kt,Ie,Gt,Ft,Ne,W,Vt,Ue,y,qt,ye,Qt,Xt,be,Wt,Zt,$e,Z,Jt,ze,N,fa=`<code class="language-bash"><span class="token function">curl</span> -X POST
     -H <span class="token string">"Content-Type:application/x-www-form-urlencoded"</span>
     -d <span class="token string">"client_id=CLIENT ID
     &amp;client_secret=CLIENT SECRET
     &amp;grant_type=authorization_code
     &amp;code=CODE
     &amp;redirect_uri=REDIRECT URL\uFF08\u8981\u8207\u8A8D\u8B49 URL \u76F8\u540C\uFF09"</span>
     https://discordapp.com/api/oauth2/token</code>`,Me,U,Yt,Ce,gt,Ke,$,_a=`<code class="language-json"><span class="token punctuation">&#123;</span>
  <span class="token property">"access_token"</span><span class="token operator">:</span> ACCESS TOKEN<span class="token punctuation">,</span>
  <span class="token property">"expires_in"</span><span class="token operator">:</span> <span class="token number">604800</span><span class="token punctuation">,</span>
  <span class="token property">"refresh_token"</span><span class="token operator">:</span> REFRESH TOKEN<span class="token punctuation">,</span>
  <span class="token property">"scope"</span><span class="token operator">:</span> SCOPE<span class="token punctuation">,</span>
  <span class="token property">"token_type"</span><span class="token operator">:</span> <span class="token string">"Bearer"</span>
<span class="token punctuation">&#125;</span></code>`,Ge,R,S,Te,es,ts,Oe,ss,as,os,w,Le,ls,ns,rs,ps,Fe,J,cs,Ve,Y,is,qe,z,Ea=`<code class="language-bash"><span class="token function">curl</span> -H <span class="token string">"Authorization: Bearer ACCESS TOKEN"</span>
     https://discordapp.com/api/users/@me</code>`,Qe,g,ds,Xe,M,ka=`<code class="language-json"><span class="token punctuation">&#123;</span>
   <span class="token property">"id"</span><span class="token operator">:</span> Discord ID<span class="token punctuation">,</span>
   <span class="token property">"username"</span><span class="token operator">:</span> \u4F7F\u7528\u8005\u540D\u7A31<span class="token punctuation">,</span>
   <span class="token property">"avatar"</span><span class="token operator">:</span> \u5927\u982D\u8CBC ID<span class="token punctuation">,</span>
   <span class="token property">"discriminator"</span><span class="token operator">:</span> \u4F7F\u7528\u8005\u7DE8\u865F\uFF08\u5728\u540D\u7A31#\u5F8C\u9762\u7684\u6578\u5B57\uFF09<span class="token punctuation">,</span>
   <span class="token property">"public_flags"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">"flags"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">"email"</span><span class="token operator">:</span> \u4FE1\u7BB1<span class="token punctuation">,</span>
   <span class="token property">"verified"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   <span class="token property">"locale"</span><span class="token operator">:</span> \u4F7F\u7528\u8A9E\u8A00<span class="token punctuation">,</span>
   <span class="token property">"mfa_enabled"</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">&#125;</span></code>`,We,ee,O,us,Pe,fs,_s,Re,Es,ks,Ze,te,ms,Je,se,vs,Ye,K,ma=`<code class="language-bash"><span class="token function">curl</span> -X POST
     -H <span class="token string">"Content-Type:application/x-www-form-urlencoded"</span>
     -d <span class="token string">"client_id=CLIENT ID
     &amp;client_secret=CLIENT SECRET
     &amp;grant_type=refresh_token
     &amp;refresh_token=REFRESH TOKEN"</span>
     https://discordapp.com/api/oauth2/token</code>`,ge,ae,hs,et,G,va=`<code class="language-json"><span class="token punctuation">&#123;</span>
   <span class="token property">"access_token"</span><span class="token operator">:</span> ACCESS TOKEN<span class="token punctuation">,</span>
   <span class="token property">"expires_in"</span><span class="token operator">:</span> <span class="token number">604800</span><span class="token punctuation">,</span>
   <span class="token property">"refresh_token"</span><span class="token operator">:</span> REFRESH TOKEN<span class="token punctuation">,</span>
   <span class="token property">"scope"</span><span class="token operator">:</span> SCOPE<span class="token punctuation">,</span>
   <span class="token property">"token_type"</span><span class="token operator">:</span> <span class="token string">"Bearer"</span>
<span class="token punctuation">&#125;</span></code>`,tt,oe,Ds,st,le,Is,at,ot,lt,F,ys,nt,ne,rt,I,Se,bs,re;return{c(){f=o("ul"),v=o("li"),m=o("a"),b=p("\u300CDiscord \u306E ID \u3067\u30ED\u30B0\u30A4\u30F3\u300D\u3092\u5B9F\u88C5\u3059\u308B(Oauth2) - Qiita"),_=i(),k=o("h2"),L=p("1. \u65BC Discord Developer Portal \u767B\u9304 Application"),ue=i(),u=o("h3"),fe=p("a. \u53D6\u5F97 \u300CClient ID\u300D\u548C\u300CClient Secert\u300D"),_e=i(),h=o("ol"),q=o("li"),ft=p("\u767B\u5165 "),H=o("a"),_t=p("Discord Developer Portal"),Et=i(),Ee=o("li"),kt=p("\u9EDE\u64CA\u53F3\u4E0A\u89D2\u7684\u300CNew Application\u300D"),mt=i(),x=o("li"),vt=p("\u53D6\u540D\uFF0C\u672C\u6587\u7BC4\u4F8B\u53D6\u70BA "),ke=o("code"),ht=p("OAuth Vertify"),Dt=p("\uFF0C\u6B64\u540D\u7A31\u6703\u986F\u793A\u65BC\u6388\u6B0A\u9801\u9762\u4E0A\uFF0C\u4E4B\u5F8C\u9EDE\u64CA\u300CCreate\u300D"),It=i(),C=o("li"),yt=p("\u8CC7\u8A0A\u9801\u53F3\u65B9\u7684 "),me=o("code"),bt=p("Client ID"),Ct=p(" \u548C "),ve=o("code"),Tt=p("Client Secert"),Ot=p(" \u5F8C\u9762\u4E5F\u6703\u7528\u5230"),je=i(),Q=o("h3"),Lt=p("b. \u5EFA\u7ACB OAuth \u7528\u7684\u7DB2\u5740"),He=i(),D=o("ol"),he=o("li"),Pt=p("\u9EDE\u64CA\u5DE6\u5074\u7684\u300COAuth2\u300D\u5206\u9801"),Rt=i(),T=o("li"),St=p("\u9EDE\u64CA\u53F3\u5074\u7684\u300CAdd Redirect\u300D\uFF0C\u8F38\u5165\u8981\u7528\u5230\u9A57\u8B49\u767B\u5165\u7684\u7DB2\u5740"),wt=o("br"),At=p(`\u4F8B\u5982\u672C\u6587\u6700\u4E0B\u65B9\u4E5F\u6709\u9644\u4E0A\u5BE6\u4F5C\u7BC4\u4F8B
`),jt=o("br"),Ht=p("\u8F38\u5165\u7684\u7DB2\u5740\u5C31\u662F `https://f6bfb5.github.io/login-with-discord/`"),xt=i(),De=o("li"),Bt=p(`\u52FE\u9078\u4E0B\u65B9\u300CSCOPE\u300D\uFF08\u7D22\u53D6\u7684\u8CC7\u8A0A\u6B04\u4F4D\uFF09
\u88E1\u7684\u300Cidentify\u300D\uFF08Discord \u7684 ID\uFF09\u548C\u300Cemail\u300D`),Nt=i(),B=o("li"),Ut=p("\u5C31\u53EF\u65BC\u9801\u9762\u4E0B\u65B9\u53D6\u5F97\u8A8D\u8B49\u7528\u7684\u9023\u7D50"),$t=o("br"),zt=p("\u4F8B\uFF1A`https://discord.com/api/oauth2/authorize?client_id=`CLIENT ID`&redirect_uri=`REDIRECT URL`&response_type=code&scope=`SCOPE"),xe=i(),X=o("h2"),Mt=p("2. \u5F9E\u8A8D\u8B49\u9023\u7D50\u53D6\u5F97\u300Ccode\u300D"),Be=i(),P=o("p"),Kt=p("\u4F7F\u7528\u6B64\u8A8D\u8B49\u9023\u7D50\u767B\u5165\uFF0C\u4E26\u91CD\u65B0\u5C0E\u5411\u5230\u7D50\u679C\u9801\u9762\u5F8C\uFF0C\u7DB2\u5740\u4E0A\u6703\u591A\u51FA\u4E00\u500B\u56DE\u50B3\u7684 "),Ie=o("code"),Gt=p("code"),Ft=p(" \u53C3\u6578"),Ne=i(),W=o("h2"),Vt=p("3. \u4F7F\u7528\u300Ccode\u300D\u53D6\u5F97\u300Ctoken\u300D"),Ue=i(),y=o("p"),qt=p("\u518D\u4F7F\u7528\u9019\u500B "),ye=o("code"),Qt=p("code"),Xt=p(" \u53BB\u53D6\u5F97 "),be=o("code"),Wt=p("access_token"),Zt=p("\uFF0C\u624D\u80FD\u5F97\u5230\u5B58\u53D6\u8CC7\u6599\u7684\u6B0A\u9650"),$e=i(),Z=o("h3"),Jt=p("a. \u50B3\u9001 POST \u8ACB\u6C42\u5230 Discord API"),ze=i(),N=o("pre"),Me=i(),U=o("h3"),Yt=p("b. \u82E5\u6210\u529F\u5C31\u53EF\u53D6\u5F97 "),Ce=o("code"),gt=p("access token"),Ke=i(),$=o("pre"),Ge=i(),R=o("ul"),S=o("li"),Te=o("code"),es=p("code"),ts=p(" \u70BA\u4E00\u6B21\u6027\u4F7F\u7528\uFF0C\u540C\u4E00\u500B "),Oe=o("code"),ss=p("code"),as=p(" \u7121\u6CD5\u9032\u884C\u7B2C\u4E8C\u6B21\u5B58\u53D6"),os=i(),w=o("li"),Le=o("code"),ls=p("access token"),ns=p(" \u7684\u6709\u6548\u671F\u9650\u70BA 604800 \u79D2\uFF1D\u4E00\u500B\u79AE\u62DC"),rs=o("br"),ps=p("\u82E5\u6709\u66F4\u65B0\u9700\u6C42\uFF0C\u9808\u4F7F\u7528\u56DE\u50B3\u5167\u5BB9\u4E2D\u7684 `refresh token` \u91CD\u65B0\u9001\u51FA\u8ACB\u6C42"),Fe=i(),J=o("h2"),cs=p("4. \u4F7F\u7528\u300Ctoken\u300D\u53D6\u5F97\u4F7F\u7528\u8005\u8CC7\u6599"),Ve=i(),Y=o("h3"),is=p("a. \u50B3\u9001 GET \u8ACB\u6C42\u5230 Discord API"),qe=i(),z=o("pre"),Qe=i(),g=o("h3"),ds=p("b. \u82E5\u9806\u5229\u6210\u529F\uFF0C\u5C31\u53EF\u53D6\u5F97\u76F8\u95DC\u8CC7\u6599"),Xe=i(),M=o("pre"),We=i(),ee=o("ul"),O=o("li"),us=p("\u982D\u50CF\u53EF\u4EE5\u4F7F\u7528\u300C"),Pe=o("code"),fs=p("https://cdn.discordapp.com/avatars/"),_s=p("Discord ID"),Re=o("code"),Es=p("/"),ks=p("\u5927\u982D\u8CBC ID\u300D\u53D6\u5F97"),Ze=i(),te=o("h2"),ms=p("5. \u4F7F\u7528 refresh token \u91CD\u65B0\u53D6\u5F97 access token"),Je=i(),se=o("h3"),vs=p("a. \u50B3\u9001 POST \u8ACB\u6C42\u5230 Discord API"),Ye=i(),K=o("pre"),ge=i(),ae=o("h3"),hs=p("b. \u82E5\u6210\u529F\u5C31\u53EF\u53D6\u5F97 access token"),et=i(),G=o("pre"),tt=i(),oe=o("h2"),Ds=p("\u7BC4\u4F8B"),st=i(),le=o("p"),Is=p("\u4EE5\u4E0B\u793A\u7BC4\u900F\u904E\u6B64\u65B9\u5F0F\uFF0C\u53D6\u5F97\u4F60\u7684 Discord ID \u8207\u5927\u982D\u8CBC\u5716\u7247\u3002"),at=i(),ot=o("br"),lt=p(`\u5982\u679C\u672A\u986F\u793A\u300CNot logged in\u300D\u6216\u9EDE\u64CA\u6309\u9375\u7121\u53CD\u61C9\uFF0C\u8ACB\u91CD\u65B0\u6574\u7406\u9801\u9762\u3002
`),F=o("button"),ys=p("Login with Discord"),nt=i(),ne=o("span"),rt=i(),I=o("div"),Se=o("img"),bs=i(),re=o("div"),this.h()},l(e){f=l(e,"UL",{});var a=r(f);v=l(a,"LI",{});var Ps=r(v);m=l(Ps,"A",{href:!0,rel:!0});var Rs=r(m);b=c(Rs,"\u300CDiscord \u306E ID \u3067\u30ED\u30B0\u30A4\u30F3\u300D\u3092\u5B9F\u88C5\u3059\u308B(Oauth2) - Qiita"),Rs.forEach(t),Ps.forEach(t),a.forEach(t),_=d(e),k=l(e,"H2",{});var Ss=r(k);L=c(Ss,"1. \u65BC Discord Developer Portal \u767B\u9304 Application"),Ss.forEach(t),ue=d(e),u=l(e,"H3",{});var ws=r(u);fe=c(ws,"a. \u53D6\u5F97 \u300CClient ID\u300D\u548C\u300CClient Secert\u300D"),ws.forEach(t),_e=d(e),h=l(e,"OL",{});var A=r(h);q=l(A,"LI",{});var Cs=r(q);ft=c(Cs,"\u767B\u5165 "),H=l(Cs,"A",{href:!0,rel:!0});var As=r(H);_t=c(As,"Discord Developer Portal"),As.forEach(t),Cs.forEach(t),Et=d(A),Ee=l(A,"LI",{});var js=r(Ee);kt=c(js,"\u9EDE\u64CA\u53F3\u4E0A\u89D2\u7684\u300CNew Application\u300D"),js.forEach(t),mt=d(A),x=l(A,"LI",{});var pt=r(x);vt=c(pt,"\u53D6\u540D\uFF0C\u672C\u6587\u7BC4\u4F8B\u53D6\u70BA "),ke=l(pt,"CODE",{});var Hs=r(ke);ht=c(Hs,"OAuth Vertify"),Hs.forEach(t),Dt=c(pt,"\uFF0C\u6B64\u540D\u7A31\u6703\u986F\u793A\u65BC\u6388\u6B0A\u9801\u9762\u4E0A\uFF0C\u4E4B\u5F8C\u9EDE\u64CA\u300CCreate\u300D"),pt.forEach(t),It=d(A),C=l(A,"LI",{});var pe=r(C);yt=c(pe,"\u8CC7\u8A0A\u9801\u53F3\u65B9\u7684 "),me=l(pe,"CODE",{});var xs=r(me);bt=c(xs,"Client ID"),xs.forEach(t),Ct=c(pe," \u548C "),ve=l(pe,"CODE",{});var Bs=r(ve);Tt=c(Bs,"Client Secert"),Bs.forEach(t),Ot=c(pe," \u5F8C\u9762\u4E5F\u6703\u7528\u5230"),pe.forEach(t),A.forEach(t),je=d(e),Q=l(e,"H3",{});var Ns=r(Q);Lt=c(Ns,"b. \u5EFA\u7ACB OAuth \u7528\u7684\u7DB2\u5740"),Ns.forEach(t),He=d(e),D=l(e,"OL",{});var j=r(D);he=l(j,"LI",{});var Us=r(he);Pt=c(Us,"\u9EDE\u64CA\u5DE6\u5074\u7684\u300COAuth2\u300D\u5206\u9801"),Us.forEach(t),Rt=d(j),T=l(j,"LI",{});var ce=r(T);St=c(ce,"\u9EDE\u64CA\u53F3\u5074\u7684\u300CAdd Redirect\u300D\uFF0C\u8F38\u5165\u8981\u7528\u5230\u9A57\u8B49\u767B\u5165\u7684\u7DB2\u5740"),wt=l(ce,"BR",{}),At=c(ce,`\u4F8B\u5982\u672C\u6587\u6700\u4E0B\u65B9\u4E5F\u6709\u9644\u4E0A\u5BE6\u4F5C\u7BC4\u4F8B
`),jt=l(ce,"BR",{}),Ht=c(ce,"\u8F38\u5165\u7684\u7DB2\u5740\u5C31\u662F `https://f6bfb5.github.io/login-with-discord/`"),ce.forEach(t),xt=d(j),De=l(j,"LI",{});var $s=r(De);Bt=c($s,`\u52FE\u9078\u4E0B\u65B9\u300CSCOPE\u300D\uFF08\u7D22\u53D6\u7684\u8CC7\u8A0A\u6B04\u4F4D\uFF09
\u88E1\u7684\u300Cidentify\u300D\uFF08Discord \u7684 ID\uFF09\u548C\u300Cemail\u300D`),$s.forEach(t),Nt=d(j),B=l(j,"LI",{});var ct=r(B);Ut=c(ct,"\u5C31\u53EF\u65BC\u9801\u9762\u4E0B\u65B9\u53D6\u5F97\u8A8D\u8B49\u7528\u7684\u9023\u7D50"),$t=l(ct,"BR",{}),zt=c(ct,"\u4F8B\uFF1A`https://discord.com/api/oauth2/authorize?client_id=`CLIENT ID`&redirect_uri=`REDIRECT URL`&response_type=code&scope=`SCOPE"),ct.forEach(t),j.forEach(t),xe=d(e),X=l(e,"H2",{});var zs=r(X);Mt=c(zs,"2. \u5F9E\u8A8D\u8B49\u9023\u7D50\u53D6\u5F97\u300Ccode\u300D"),zs.forEach(t),Be=d(e),P=l(e,"P",{});var it=r(P);Kt=c(it,"\u4F7F\u7528\u6B64\u8A8D\u8B49\u9023\u7D50\u767B\u5165\uFF0C\u4E26\u91CD\u65B0\u5C0E\u5411\u5230\u7D50\u679C\u9801\u9762\u5F8C\uFF0C\u7DB2\u5740\u4E0A\u6703\u591A\u51FA\u4E00\u500B\u56DE\u50B3\u7684 "),Ie=l(it,"CODE",{});var Ms=r(Ie);Gt=c(Ms,"code"),Ms.forEach(t),Ft=c(it," \u53C3\u6578"),it.forEach(t),Ne=d(e),W=l(e,"H2",{});var Ks=r(W);Vt=c(Ks,"3. \u4F7F\u7528\u300Ccode\u300D\u53D6\u5F97\u300Ctoken\u300D"),Ks.forEach(t),Ue=d(e),y=l(e,"P",{});var ie=r(y);qt=c(ie,"\u518D\u4F7F\u7528\u9019\u500B "),ye=l(ie,"CODE",{});var Gs=r(ye);Qt=c(Gs,"code"),Gs.forEach(t),Xt=c(ie," \u53BB\u53D6\u5F97 "),be=l(ie,"CODE",{});var Fs=r(be);Wt=c(Fs,"access_token"),Fs.forEach(t),Zt=c(ie,"\uFF0C\u624D\u80FD\u5F97\u5230\u5B58\u53D6\u8CC7\u6599\u7684\u6B0A\u9650"),ie.forEach(t),$e=d(e),Z=l(e,"H3",{});var Vs=r(Z);Jt=c(Vs,"a. \u50B3\u9001 POST \u8ACB\u6C42\u5230 Discord API"),Vs.forEach(t),ze=d(e),N=l(e,"PRE",{class:!0});var ha=r(N);ha.forEach(t),Me=d(e),U=l(e,"H3",{});var Ts=r(U);Yt=c(Ts,"b. \u82E5\u6210\u529F\u5C31\u53EF\u53D6\u5F97 "),Ce=l(Ts,"CODE",{});var qs=r(Ce);gt=c(qs,"access token"),qs.forEach(t),Ts.forEach(t),Ke=d(e),$=l(e,"PRE",{class:!0});var Da=r($);Da.forEach(t),Ge=d(e),R=l(e,"UL",{});var dt=r(R);S=l(dt,"LI",{});var we=r(S);Te=l(we,"CODE",{});var Qs=r(Te);es=c(Qs,"code"),Qs.forEach(t),ts=c(we," \u70BA\u4E00\u6B21\u6027\u4F7F\u7528\uFF0C\u540C\u4E00\u500B "),Oe=l(we,"CODE",{});var Xs=r(Oe);ss=c(Xs,"code"),Xs.forEach(t),as=c(we," \u7121\u6CD5\u9032\u884C\u7B2C\u4E8C\u6B21\u5B58\u53D6"),we.forEach(t),os=d(dt),w=l(dt,"LI",{});var Ae=r(w);Le=l(Ae,"CODE",{});var Ws=r(Le);ls=c(Ws,"access token"),Ws.forEach(t),ns=c(Ae," \u7684\u6709\u6548\u671F\u9650\u70BA 604800 \u79D2\uFF1D\u4E00\u500B\u79AE\u62DC"),rs=l(Ae,"BR",{}),ps=c(Ae,"\u82E5\u6709\u66F4\u65B0\u9700\u6C42\uFF0C\u9808\u4F7F\u7528\u56DE\u50B3\u5167\u5BB9\u4E2D\u7684 `refresh token` \u91CD\u65B0\u9001\u51FA\u8ACB\u6C42"),Ae.forEach(t),dt.forEach(t),Fe=d(e),J=l(e,"H2",{});var Zs=r(J);cs=c(Zs,"4. \u4F7F\u7528\u300Ctoken\u300D\u53D6\u5F97\u4F7F\u7528\u8005\u8CC7\u6599"),Zs.forEach(t),Ve=d(e),Y=l(e,"H3",{});var Js=r(Y);is=c(Js,"a. \u50B3\u9001 GET \u8ACB\u6C42\u5230 Discord API"),Js.forEach(t),qe=d(e),z=l(e,"PRE",{class:!0});var Ia=r(z);Ia.forEach(t),Qe=d(e),g=l(e,"H3",{});var Ys=r(g);ds=c(Ys,"b. \u82E5\u9806\u5229\u6210\u529F\uFF0C\u5C31\u53EF\u53D6\u5F97\u76F8\u95DC\u8CC7\u6599"),Ys.forEach(t),Xe=d(e),M=l(e,"PRE",{class:!0});var ya=r(M);ya.forEach(t),We=d(e),ee=l(e,"UL",{});var gs=r(ee);O=l(gs,"LI",{});var de=r(O);us=c(de,"\u982D\u50CF\u53EF\u4EE5\u4F7F\u7528\u300C"),Pe=l(de,"CODE",{});var ea=r(Pe);fs=c(ea,"https://cdn.discordapp.com/avatars/"),ea.forEach(t),_s=c(de,"Discord ID"),Re=l(de,"CODE",{});var ta=r(Re);Es=c(ta,"/"),ta.forEach(t),ks=c(de,"\u5927\u982D\u8CBC ID\u300D\u53D6\u5F97"),de.forEach(t),gs.forEach(t),Ze=d(e),te=l(e,"H2",{});var sa=r(te);ms=c(sa,"5. \u4F7F\u7528 refresh token \u91CD\u65B0\u53D6\u5F97 access token"),sa.forEach(t),Je=d(e),se=l(e,"H3",{});var aa=r(se);vs=c(aa,"a. \u50B3\u9001 POST \u8ACB\u6C42\u5230 Discord API"),aa.forEach(t),Ye=d(e),K=l(e,"PRE",{class:!0});var ba=r(K);ba.forEach(t),ge=d(e),ae=l(e,"H3",{});var oa=r(ae);hs=c(oa,"b. \u82E5\u6210\u529F\u5C31\u53EF\u53D6\u5F97 access token"),oa.forEach(t),et=d(e),G=l(e,"PRE",{class:!0});var Ca=r(G);Ca.forEach(t),tt=d(e),oe=l(e,"H2",{});var la=r(oe);Ds=c(la,"\u7BC4\u4F8B"),la.forEach(t),st=d(e),le=l(e,"P",{});var na=r(le);Is=c(na,"\u4EE5\u4E0B\u793A\u7BC4\u900F\u904E\u6B64\u65B9\u5F0F\uFF0C\u53D6\u5F97\u4F60\u7684 Discord ID \u8207\u5927\u982D\u8CBC\u5716\u7247\u3002"),na.forEach(t),at=d(e),ot=l(e,"BR",{}),lt=c(e,`\u5982\u679C\u672A\u986F\u793A\u300CNot logged in\u300D\u6216\u9EDE\u64CA\u6309\u9375\u7121\u53CD\u61C9\uFF0C\u8ACB\u91CD\u65B0\u6574\u7406\u9801\u9762\u3002
`),F=l(e,"BUTTON",{id:!0});var ra=r(F);ys=c(ra,"Login with Discord"),ra.forEach(t),nt=d(e),ne=l(e,"SPAN",{id:!0}),r(ne).forEach(t),rt=d(e),I=l(e,"DIV",{class:!0,id:!0,style:!0});var ut=r(I);Se=l(ut,"IMG",{class:!0,id:!0}),bs=d(ut),re=l(ut,"DIV",{class:!0,id:!0}),r(re).forEach(t),ut.forEach(t),this.h()},h(){E(m,"href","https://qiita.com/masayoshi4649/items/46fdb744cb8255f5eb98"),E(m,"rel","nofollow"),E(H,"href","https://discord.com/developers/applications"),E(H,"rel","nofollow"),E(N,"class","language-bash"),E($,"class","language-json"),E(z,"class","language-bash"),E(M,"class","language-json"),E(K,"class","language-bash"),E(G,"class","language-json"),E(F,"id","js-discord-button"),E(ne,"id","js-discord-status"),E(Se,"class","discord-card--image svelte-9ys6tj"),E(Se,"id","js-discord-card--image"),E(re,"class","discord-card--username"),E(re,"id","js-discord-card--username"),E(I,"class","discord-card"),E(I,"id","js-discord-card"),Ba(I,"display","none")},m(e,a){n(e,f,a),s(f,v),s(v,m),s(m,b),n(e,_,a),n(e,k,a),s(k,L),n(e,ue,a),n(e,u,a),s(u,fe),n(e,_e,a),n(e,h,a),s(h,q),s(q,ft),s(q,H),s(H,_t),s(h,Et),s(h,Ee),s(Ee,kt),s(h,mt),s(h,x),s(x,vt),s(x,ke),s(ke,ht),s(x,Dt),s(h,It),s(h,C),s(C,yt),s(C,me),s(me,bt),s(C,Ct),s(C,ve),s(ve,Tt),s(C,Ot),n(e,je,a),n(e,Q,a),s(Q,Lt),n(e,He,a),n(e,D,a),s(D,he),s(he,Pt),s(D,Rt),s(D,T),s(T,St),s(T,wt),s(T,At),s(T,jt),s(T,Ht),s(D,xt),s(D,De),s(De,Bt),s(D,Nt),s(D,B),s(B,Ut),s(B,$t),s(B,zt),n(e,xe,a),n(e,X,a),s(X,Mt),n(e,Be,a),n(e,P,a),s(P,Kt),s(P,Ie),s(Ie,Gt),s(P,Ft),n(e,Ne,a),n(e,W,a),s(W,Vt),n(e,Ue,a),n(e,y,a),s(y,qt),s(y,ye),s(ye,Qt),s(y,Xt),s(y,be),s(be,Wt),s(y,Zt),n(e,$e,a),n(e,Z,a),s(Z,Jt),n(e,ze,a),n(e,N,a),N.innerHTML=fa,n(e,Me,a),n(e,U,a),s(U,Yt),s(U,Ce),s(Ce,gt),n(e,Ke,a),n(e,$,a),$.innerHTML=_a,n(e,Ge,a),n(e,R,a),s(R,S),s(S,Te),s(Te,es),s(S,ts),s(S,Oe),s(Oe,ss),s(S,as),s(R,os),s(R,w),s(w,Le),s(Le,ls),s(w,ns),s(w,rs),s(w,ps),n(e,Fe,a),n(e,J,a),s(J,cs),n(e,Ve,a),n(e,Y,a),s(Y,is),n(e,qe,a),n(e,z,a),z.innerHTML=Ea,n(e,Qe,a),n(e,g,a),s(g,ds),n(e,Xe,a),n(e,M,a),M.innerHTML=ka,n(e,We,a),n(e,ee,a),s(ee,O),s(O,us),s(O,Pe),s(Pe,fs),s(O,_s),s(O,Re),s(Re,Es),s(O,ks),n(e,Ze,a),n(e,te,a),s(te,ms),n(e,Je,a),n(e,se,a),s(se,vs),n(e,Ye,a),n(e,K,a),K.innerHTML=ma,n(e,ge,a),n(e,ae,a),s(ae,hs),n(e,et,a),n(e,G,a),G.innerHTML=va,n(e,tt,a),n(e,oe,a),s(oe,Ds),n(e,st,a),n(e,le,a),s(le,Is),n(e,at,a),n(e,ot,a),n(e,lt,a),n(e,F,a),s(F,ys),n(e,nt,a),n(e,ne,a),n(e,rt,a),n(e,I,a),s(I,Se),s(I,bs),s(I,re)},p:Na,d(e){e&&t(f),e&&t(_),e&&t(k),e&&t(ue),e&&t(u),e&&t(_e),e&&t(h),e&&t(je),e&&t(Q),e&&t(He),e&&t(D),e&&t(xe),e&&t(X),e&&t(Be),e&&t(P),e&&t(Ne),e&&t(W),e&&t(Ue),e&&t(y),e&&t($e),e&&t(Z),e&&t(ze),e&&t(N),e&&t(Me),e&&t(U),e&&t(Ke),e&&t($),e&&t(Ge),e&&t(R),e&&t(Fe),e&&t(J),e&&t(Ve),e&&t(Y),e&&t(qe),e&&t(z),e&&t(Qe),e&&t(g),e&&t(Xe),e&&t(M),e&&t(We),e&&t(ee),e&&t(Ze),e&&t(te),e&&t(Je),e&&t(se),e&&t(Ye),e&&t(K),e&&t(ge),e&&t(ae),e&&t(et),e&&t(G),e&&t(tt),e&&t(oe),e&&t(st),e&&t(le),e&&t(at),e&&t(ot),e&&t(lt),e&&t(F),e&&t(nt),e&&t(ne),e&&t(rt),e&&t(I)}}}function za(V){let f,v;const m=[V[0],Ls];let b={$$slots:{default:[$a]},$$scope:{ctx:V}};for(let _=0;_<m.length;_+=1)b=Os(b,m[_]);return f=new Ua({props:b}),{c(){Pa(f.$$.fragment)},l(_){Ra(f.$$.fragment,_)},m(_,k){Sa(f,_,k),v=!0},p(_,[k]){const L=k&1?wa(m,[k&1&&pa(_[0]),k&0&&pa(Ls)]):{};k&2&&(L.$$scope={dirty:k,ctx:_}),f.$set(L)},i(_){v||(Aa(f.$$.fragment,_),v=!0)},o(_){ja(f.$$.fragment,_),v=!1},d(_){Ha(f,_)}}}const Ls={title:"\u5BE6\u4F5C\u300C\u4F7F\u7528 Discord \u767B\u5165\u300D",date:"2021-01-14T00:24:23.000Z",tags:"F2E"},ia="798950274114781204",da="https://f6bfb5.github.io/login-with-discord",ua="identify email";function Ma(){document.location.href=`https://discord.com/api/oauth2/authorize?client_id=${ia}&redirect_uri=${encodeURIComponent(da)}&response_type=code&scope=${encodeURIComponent(ua)}`}function Ka(V,f,v){return xa(()=>{document.getElementById("js-discord-button").addEventListener("click",Ma);const m=new URLSearchParams(window.location.search);if(m.has("code")){const b="3c-TeN5NxElL4la8E6h5BlT4zDHigser",_="https://discordapp.com/api/oauth2/token",k={client_id:ia,client_secret:b,grant_type:"authorization_code",code:m.get("code"),redirect_uri:da,scope:ua},L=Object.keys(k).map(u=>encodeURIComponent(u)+"="+encodeURIComponent(k[u])).join("&");fetch(_,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:L}).then(function(u){if(!u.ok)throw new Error(u.statusText);return document.getElementById("js-discord-status").innerText="token got",u.json()}).then(function(u){let fe=u.access_token;return fetch("https://discordapp.com/api/users/@me",{method:"GET",headers:{authorization:"Bearer "+fe}})}).then(function(u){if(!u.ok)throw new Error(u.statusText);return document.getElementById("js-discord-status").innerText="user data got",u.json()}).catch(function(u){document.getElementById("js-discord-status").innerText=u}).then(function(u){u!=null&&(document.getElementById("js-discord-card").style.display="block",document.getElementById("js-discord-card--image").src=`https://cdn.discordapp.com/avatars/${u.id}/${u.avatar}`,document.getElementById("js-discord-card--username").innerText=`${u.username}#${u.discriminator}`)})}else document.getElementById("js-discord-status").innerText="Not logged in"}),V.$$set=m=>{v(0,f=Os(Os({},f),ca(m)))},f=ca(f),[f]}class Ga extends Ta{constructor(f){super(),Oa(this,f,Ka,za,La,{})}}var qa=Object.freeze(Object.defineProperty({__proto__:null,default:Ga,metadata:Ls},Symbol.toStringTag,{value:"Module"}));export{Ga as L,qa as _,Ls as m};
