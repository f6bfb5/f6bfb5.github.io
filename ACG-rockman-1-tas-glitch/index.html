<!DOCTYPE html> <html lang=zh-Hant-TW> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href=global.css rel=stylesheet> <link href=fonts/fonts.css rel=stylesheet> <link href=highlight.css rel=stylesheet> <link href=manifest.json rel=manifest> <link href=favicon.png rel=icon type=image/png> <link href=https://cdn.jsdelivr.net/gh/chiron-fonts/chiron-sans-hk-pro@1.006/build/webfont/css/vf.css rel=stylesheet> <link href=client/client-98f7dc76.css rel=stylesheet><link href=client/[slug]-db3f61d1.css rel=stylesheet> <title>洛克人 1 的呼叫 Ending 漏洞機制解說</title><script async data-svelte=svelte-a2kvt3 src="https://www.googletagmanager.com/gtag/js?id=UA-114661136-2"></script><script async data-svelte=svelte-1op50db src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js data-ad-client=ca-pub-9613661448556355></script><link href=/apple-touch-icon.png rel=apple-touch-icon data-svelte=svelte-12mb5ri sizes=180x180><link href=/favicon-32x32.png rel=icon data-svelte=svelte-12mb5ri sizes=32x32 type=image/png><link href=/favicon-16x16.png rel=icon data-svelte=svelte-12mb5ri sizes=16x16 type=image/png><link href=/site.webmanifest rel=manifest data-svelte=svelte-12mb5ri><link href=/safari-pinned-tab.svg rel=mask-icon data-svelte=svelte-12mb5ri color=#5bbad5><meta data-svelte=svelte-12mb5ri content=#ffc40d name=msapplication-TileColor><meta data-svelte=svelte-12mb5ri content=#ffffff name=theme-color><meta data-svelte=svelte-d2s233 content=article property=og:type><meta data-svelte=svelte-d2s233 content="洛克人 1 的呼叫 Ending 漏洞機制解說" property=og:title><meta data-svelte=svelte-d2s233 content="2014 年 5 月，遊戲圈出現了一支使用輔助程式，在「半分鐘內」通關《洛克人 1》的破天荒影片，而這種需要經過精密的機制解析，與流程操控的遊戲通關方式，僅隔一個月竟然出現人力操作達成同樣的成果，人類無極限！" name=Description><meta data-svelte=svelte-d2s233 content="2014 年 5 月，遊戲圈出現了一支使用輔助程式，在「半分鐘內」通關《洛克人 1》的破天荒影片，而這種需要經過精密的機制解析，與流程操控的遊戲通關方式，僅隔一個月竟然出現人力操作達成同樣的成果，人類無極限！" property=og:description><meta data-svelte=svelte-d2s233 content=summary_large_image name=twitter:card><meta data-svelte=svelte-d2s233 name=twitter:title value="洛克人 1 的呼叫 Ending 漏洞機制解說"><meta data-svelte=svelte-d2s233 content="2014 年 5 月，遊戲圈出現了一支使用輔助程式，在「半分鐘內」通關《洛克人 1》的破天荒影片，而這種需要經過精密的機制解析，與流程操控的遊戲通關方式，僅隔一個月竟然出現人力操作達成同樣的成果，人類無極限！" name=twitter:description><meta data-svelte=svelte-d2s233 name=twitter:label1 value="Published on"><meta data-svelte=svelte-d2s233 name=twitter:data1 value="Feb 19, 2019"> <link href=/client/client.812e4595.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-98f7dc76.css rel=preload as=style><link href=/client/[slug].c4910566.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/[slug]-db3f61d1.css rel=preload as=style></head> <body> <div id=sapper> <div class="svelte-hspq99 layout"> <header class=svelte-310tmg><nav class=svelte-1c2nkmp><a href=. class=svelte-1c2nkmp>blog</a> <a href=about class=svelte-1c2nkmp>about</a> <a href=rss.xml class=svelte-1c2nkmp>rss</a> </nav> <button class=svelte-13ciyl9><svg height=24 viewBox="0 0 24 24" width=24 xmlns=http://www.w3.org/2000/svg><path d="M17 14v2.639c0 1.776-1.625 2.608-2 4.361h-6c-.369-1.782-2-2.582-2-4.361v-2.639h10zm-2.25 8h-5.5l1.451 1.659c.19.216.465.341.752.341h1.094c.287 0 .562-.125.752-.341l1.451-1.659zm-1.25-22c-1.381 0-2.5 1.119-2.5 2.5v10.5h2v-10.5c0-.276.225-.5.5-.5s.5.224.5.5v10.5h2v-10.5c0-1.381-1.119-2.5-2.5-2.5zm-3.5 2.5c0-.953.386-1.817 1.006-2.449-.163-.033-.333-.051-.506-.051-1.381 0-2.5 1.119-2.5 2.5v10.5h2v-10.5z"></path></svg> </button> <a href=/ ><img alt="Buddha of Kamakura" src=noun_great_buddha_of_kamakura_3572172.svg class=svelte-12gcptb> </a> </header> <main class=svelte-hspq99> <header class=svelte-73z1by><h1 class=svelte-73z1by>洛克人 1 的呼叫 Ending 漏洞機制解說</h1> <p class=svelte-73z1by>February 19, 2019 <small class=svelte-73z1by>5 min read</small></header> <div class=container><article class=content><h2 id=介紹>介紹</h2> <p>2014 年 5 月，遊戲圈出現了一支使用輔助程式，在<strong>半分鐘內</strong>通關《洛克人 1》的破天荒影片，而這種需要經過精密的機制解析，與流程操控的遊戲通關方式，僅隔一個月竟然出現人力操作達成同樣的成果，人類無極限！本文會對其所使用的機制與流程進行解說。</p> <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen frameborder=0 height=315 src=https://www.youtube.com/embed/u5qom2q7cUU width=560></iframe> △【TAS】 ロックマン 1 in 00:32.11 【任意コード実行】 <h2 id=tas-與-ace>TAS 與 ACE</h2> <p>在介紹這次主題的遊戲漏洞前，先為不熟悉的的讀者解釋一下所謂的「TAS」以及「ACE」是什麼， 「TAS」指的是「<strong>使用工具輔助做出的競速通關 / 炫技遊玩（Tool-Assisted Speedrun / Superplay）</strong>」，具體來說，會使用像是遊戲模擬器上搭載的輔助功能，減慢遊戲整體執行速度、逐格操作、快速存檔 / 讀取、記憶體觀察…等等，藉此達成在理論上可能但實際難度非常高的遊玩技巧。</p> <p>「ACE」則是「<strong>執行任意代碼（Arbitrary Code Execution）</strong>」，這邊的「代碼」其實就是程式碼的意思，指使用遊戲軟、硬體安全性上的漏洞，去執行任何程式碼，講白了就是用遊戲操作寫程式，常見手法有如本文的直接呼叫（跳至）遊戲結局。</p> <h2 id=tas-使用機制>TAS 使用機制</h2> <h3 id=delayobjectffglitch-技巧>DelayObjectFFGlitch 技巧</h3> <p>在《洛克人 1》裡，當洛克人經過特定地圖的某些地點後，會出現不可視的「<code>0xFF</code>」物件（後稱 <code>FF 物件</code>）。例如 Ice Man 關卡的此處：</p> <p><a href=https://i.imgur.com/FZkBQwv.gif target=_blank rel=nofollow><img alt=img01 src=https://i.imgur.com/FZkBQwv.gif></a></p> <p>△ 「<code>0xFF</code>」物件出現於畫面不可視之處</p> <p>這個物件會讓影像處理單位（PPU, Picture Processing Unit）進行 Pattern Table Remap。推測是用於重新建構畫面用的物件。</p> <p>在正常情況的程式執行流程是 <code>1. 物件 FF 出現</code> → <code>2. 處理物件 FF（讀取 Bank 2 的資料）</code> → <code>3. 切換至 Bank 6</code> → <code>4. 讀取敵人資料編號</code>。</p> <p>若是在切換 Bank 之前，經由<strong>特定的操作</strong>超載待處理的指令量，會導致未切換至 Bank 6 之前，就直接在 Bank 2 讀取敵人編號的資料，造成畫面異常或是出現錯誤的敵人。</p> <p>敵人的 AI 舉動是在 <code>0x00</code>～<code>0x3A</code> 這個範圍裡的物件資料，程式流程是「執行敵人的 AI 程式 → 從物件編號得出要 jump 的（下一個資料的）目標 → 執行目標位置的 AI 程式」，因此使用 Delay Object 技巧，會讓最後的目標變成範圍外的物件，造成各種問題。</p> <p>例如物件 <code>F5</code> 出現後，需要執行敵人行動的 AI 模式 → 由於未切換 Bank，物件編號得到的 jump 目標為「<code>C0BD</code>」→ <code>C0BD</code> 為「通關處理過程中的物件」位置，因此遊戲會突然通關。</p> <p><a href=https://i.imgur.com/pwkEkYJ.gif target=_blank rel=nofollow><img alt=img02 src=https://i.imgur.com/pwkEkYJ.gif></a></p> <p>△ 異常出現的 Electric Man</p> <p>而 jump 目標詳細來說，系統會從 <code>$AA3B</code> + 2×（物件編號）取得 <a href=http://www.yuko2ch.net/rockman/JumpAddressList.txt target=_blank rel=nofollow>AI 位置</a>，故物件編號為 <code>0x15</code> 時，目標位置會是 <code>$AA3B</code> + 2×0x15 = <code>$AA65</code> 裡所儲存的值，因此跳至儲存的「<code>B23C</code>」執行 AI。</p> <p>可能出現的各種物件 00 ～ FF 中，大部份的物件會造成遊戲重新開始或無法繼續遊玩，在上例的 Ice Man TAS 的實際運用裡，是發現 <code>$23</code>（每 frame 增加 1 的計數器）的值走至 55 時，有可能會出現「物件 55」，之後再藉由<strong>調整道具的出現量、音樂的演奏變化時間點、 rock buster 的高低座標</strong>得到想要的後續目標位置。</p> <p>套用計算法，<code>$AA3B</code> + 2×0x55 = <code>$AAE5</code>，裡頭儲存的 AI 位置為「<code>$600</code>」，搭配下列操作調整相關資料：</p> <table> <thead> <tr> <th>位置</th> <th>數值</th> <th>行為</th> <th>如何調整</th> </tr> </thead> <tr> <td>0600</td> <td>54 F8</td> <td>NOP F8,X（什麼都不做，往下執行 ）</td> <td>移動洛克人的 Y 座標 =54</td> </tr> <tr> <td>0602</td> <td>50 4D</td> <td>BVC <code>$0651</code>（jump 至 <code>$651</code>）</td> <td>調整 rock buster 第 1 發和第 2 發的 Y 座標 =50, 4D</td> </tr> <tr> <td>0650</td> <td>3C</td> <td>UNDEFINED（這裡不會執行）</td> <td>delay FF 出現物件 3 的 ObjectFireDelay=3C</td> </tr> <tr> <td>0651</td> <td>AD 22 1F</td> <td>LDA <code>$1F22</code>=#<code>$0A</code>（讀取 0x0A 裡的 <code>$1F22</code> 並儲存至 A 暫存器）</td> <td>擊倒普通的敵人掉落道具的 ObjectFireDelay=AD,22<br>delay FF 出現的物件 1 的 ObjectFireDelay=1F</td> </tr> <tr> <td>0654</td> <td>6C 18 00</td> <td>JMP (<code>$0018</code>)=<code>$C460</code>（<code>$C460</code>: jump 至通關處理的途中）</td> <td>擊倒普通的敵人掉落道具的 ObjectFireDelay=6C,18<br>delay FF 出現的物件 55 的 ObjectFireDelay=00<br><code>$0018</code> 的數値由操作控制器 1 的「左下」+ 控制器 2 的「左右 Select」=60,C4</td> </tr> </table> <p>C45E: A9 00 lda #$00 <br>C460: 85 31 sta $31(CurrentStage)　 ← 遊戲程式會 jump 至這裡並進行中斷處理 <br>C462: 4C 0C C1 jmp $C10C</p> <p>進入遊戲 ending。</p> <p>利用這個漏洞，就能在事先準備好讀取的資料後，達成想要的操作結果。</p> <h3 id=doubleobjectffglitch>DoubleObjectFFGlitch</h3> <ol> <li>在物件 FF 會出現的地方來回移動</li> <li>物件 FF 出現後，會在 16 frames 裡每 frame 進行一次物件 FF 的處理</li> <li>在物件 FF 進行處理的 frame 裡，讓物件 FF 朝左出現</li> <li>會變為從 Bank 2 讀入錯誤的物件</li> </ol> <p>同樣的，由調整 <code>$23</code>（每 frame 增加 1 的計數器）決定讀入的物件，以下則是一些有趣的物件：</p> <ul> <li><code>75</code>、<code>F5</code>: 通過該關卡，但下一關開始會破圖。</li> <li><code>4A</code> : 出現後，過一段時間通過該關卡，下一關的關卡圖像正常。</li> <li><code>42</code> : 磁力條，由於看不見、初始座標會變動、會往 11 點鐘方向並馬上消失，因此難以取得，在晃動人物時偶爾會有成功取得的狀況。</li> </ul> <p>一旦某項物件出現後，在其消滅之前都不會再出現下個物件，若出現了目標之外的物件，就要用離開畫面之類的手法來清除。</p> <p><a href=https://i.imgur.com/LEoXwhg.gif target=_blank rel=nofollow><img alt=img03 src=https://i.imgur.com/LEoXwhg.gif></a></p> <p><a href=https://i.imgur.com/b0naPNm.gif target=_blank rel=nofollow><img alt=img04 src=https://i.imgur.com/b0naPNm.gif></a></p> <p><a href=https://i.imgur.com/xO6xO8i.gif target=_blank rel=nofollow><img alt=img05 src=https://i.imgur.com/xO6xO8i.gif></a></p> <p>△ 本次 RTA 的關鍵地點</p> <p>在氣力人關卡的圖片位置三處，進行 DoubleObjectFFGlitch（在圖片的位置左右移動）就會將 <code>$17</code>（控制器 2）做為下一個讀取的物件編號，因此可由控制器 2 的數值決定物件 00 ～ FF 的出現。</p> <p>若是同時按住控制器 2 的「左、上、下、Select、A」鍵，會出現物件 75 ，通過目前關卡，但下一關會破圖。</p> <p>※兩者的差異應該是在，前者使用增加畫面道具量造成的處理延遲，去影響物件的產生，後者利用物件出現的方向，因此原文解說內有註明，後者技巧只需要來回移動，不需加上處理 delay 。</p> <h2 id=人力-rta>人力 RTA</h2> <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen frameborder=0 height=315 src=https://www.youtube.com/embed/SoUd69Xs9gg width=560></iframe> <p>△【RTA】ロックマン in3:53【2014-06-21】</p> <h3 id=目標>目標</h3> <p>將記憶體調整成下列的對應數值後 :</p> <table> <thead> <tr> <th>位置</th> <th>數值</th> </tr> </thead> <tr> <td><code>$482</code></td> <td>8A</td> </tr> <tr> <td><code>$483</code></td> <td>50</td> </tr> <tr> <td><code>$484</code></td> <td>13</td> </tr> <tr> <td><code>$498</code></td> <td>4A</td> </tr> <tr> <td><code>$499</code></td> <td>20</td> </tr> <tr> <td><code>$49A</code></td> <td>60</td> </tr> <tr> <td><code>$49B</code></td> <td>C4</td> </tr> <tr> <td><code>$605</code></td> <td>20</td> </tr> <tr> <td><code>$606</code></td> <td>82</td> </tr> <tr> <td><code>$607</code></td> <td>04</td> </tr> </table> <p>進行 DoubleObjectFFGlitch 就會進入 Ending 畫面。</p> <h3 id=流程>流程</h3> <ol> <li>在 Electric Man 的關卡裡，於梯子上進行射擊的動作，<strong>僅按下 1 frame</strong> 下鍵，會變為半抓住梯子的樣子， <br><a href=https://i.imgur.com/5srrun8.jpg target=_blank rel=nofollow><img alt=img06 src=https://i.imgur.com/5srrun8.jpg></a> <br>洛克人朝左的狀況下，按下上鍵，會變為頭卡在天花板的穿牆狀態，按下跳躍鍵，跳到最高處後，按下右鍵，會穿越至磁力條的右方，這個狀態下按左鍵，會由於子畫素（subpixel）的關係，有 1/8 的機率可以拿到磁力條，再按下一次跳躍鍵，就會回到穿牆狀態。</li> <li>進入 Guts Man 關卡</li> <li>在關卡開頭等待第二隻小矮兵的 3 連攻擊，在下圖的位置等待至第 3 發中央的子彈消失於畫面外後， <code>$49B</code> 的值會變為 C4 。 <br><a href=https://i.imgur.com/EhAhmrY.jpg target=_blank rel=nofollow><img alt=img07 src=https://i.imgur.com/EhAhmrY.jpg></a></li> <li>在畫面內有 2 隻小矮兵的狀態下，<strong>保持畫面裡有 2 連攻擊</strong>追至下圖的位置，等待至第 2 發中央的子彈消失於畫面外後， <code>$49A</code> 的值會變為 60。 <br>這裡若是遇到 3 連攻擊 <code>$49B</code> 會因此取得 C4 之外的值。 <br><a href=https://i.imgur.com/fAcJeMt.jpg target=_blank rel=nofollow><img alt=img08 src=https://i.imgur.com/fAcJeMt.jpg></a></li> <li>在畫面內有 1 隻小矮兵的狀態下，在下圖位置等待 2 連攻擊的第 2 發中央子彈消失於畫面外後， <code>$499</code> 的值會變為 20。 <br>這裡同樣若是遇到 3 連攻擊，在這之前的調整會因此偏掉。 <br><a href=https://i.imgur.com/O046zDW.jpg target=_blank rel=nofollow><img alt=img09 src=https://i.imgur.com/O046zDW.jpg></a> <br>這裡小矮兵的攻擊間隔是由亂數決定，若是運氣不好，會有可能為了 3 連攻擊或 2 連攻擊，要等上數十秒。 <br>若是途中失敗可從 <code>$49B</code> 重新開始調整。</li> <li>接下來要調整 <code>$498</code>，移動至斷崖的另一邊後，擊敗 3 隻敵人<strong>並使畫面上顯示 3 個道具</strong>後，在下圖的位置受到傷害，會使 <code>$498</code> 的值變為 4A 。 <br>若是失敗仍可在血量允許的情況下持續調整。 <br><a href=https://i.imgur.com/uFBy8hb.jpg target=_blank rel=nofollow><img alt=img10 src=https://i.imgur.com/uFBy8hb.jpg></a></li> <li>接下來是 <code>$482</code>～<code>$484</code> 的調整，在下圖的位置向右連射 3 發 buster ，在第 3 發子彈消失於畫面外後，<code>$484</code> 的值會變為 13。 <br><a href=https://i.imgur.com/5KVdRku.jpg target=_blank rel=nofollow><img alt=img11 src=https://i.imgur.com/5KVdRku.jpg></a></li> <li>在下圖的位置向右連射 2 發 buster ，在第 2 發子彈消失於畫面外後，<code>$483</code> 的值會變為 50。 <br><a href=https://i.imgur.com/ZKGmALT.jpg target=_blank rel=nofollow><img alt=img12 src=https://i.imgur.com/ZKGmALT.jpg></a></li> <li>在下圖的位置向右射單發 buster ，子彈消失於畫面外後，<code>$482</code> 的值會變為 8A。 <br>在這之後若再發射 buster，會造成先前調整的數值變動，<strong>要注意不可再使用 buster</strong> ，若是失敗則要再從 <code>$484</code> 開始重新調整。 <br><a href=https://i.imgur.com/O95Y27D.jpg target=_blank rel=nofollow><img alt=img13 src=https://i.imgur.com/O95Y27D.jpg></a></li> <li>接下來是 <code>$605</code>～<code>$607</code> 的調整，從第三階樓梯開始，使用磁力條逐格拉高 10 高度。 <br><a href=https://i.imgur.com/ceJ1S7O.jpg target=_blank rel=nofollow><img alt=img14 src=https://i.imgur.com/ceJ1S7O.jpg></a></li> <li>注意磁力條的顯示時間，將畫面最上方的磁力條調整為<strong>畫面裡出現的第 3 條</strong>， <code>$607</code> 的值會變為 04 。 <br>需將時間調整為，這時踏台的第 2 條和第 1 條的磁力條，在設置第 3 條後會馬上消失。 <br><a href=https://i.imgur.com/6qy17F2.jpg target=_blank rel=nofollow><img alt=img15 src=https://i.imgur.com/6qy17F2.jpg></a></li> <li>在踏台的第 2 條磁力條消失前，射出磁力條並跳至最高，可以使用 Start → Select 微調磁力條至下圖的位置（與右邊的山峰平行）後，放開 B 鍵便能在此設置磁力條。 <br>由於這時先前設值的第 1 和第 2 條磁力條已經消失了，這時設置的磁力條會變為第 1 條，<code>$605</code> 會變為 20 。 <br><a href=https://i.imgur.com/uQmEdO7.jpg target=_blank rel=nofollow><img alt=img16 src=https://i.imgur.com/uQmEdO7.jpg></a></li> <li>著地後朝左射出磁力條，並在最大跳躍後，在<strong>頂點附近</strong>朝右，將磁力條設置於如下圖的階梯上固定，這會是第 2 條磁力條，<code>$606</code> 變為 82 。 <br>若是這時失敗會由於磁力條的殘量不足，必須整個 run 重來過。 <br>若只是想成功可以從 <code>$484</code> 的調整重新開始。 <br><a href=https://i.imgur.com/MPvesQN.jpg target=_blank rel=nofollow><img alt=img17 src=https://i.imgur.com/MPvesQN.jpg></a></li> <li>調整至此<strong>必須沒有任何 1 格點陣</strong>的偏差，並且為了使用 DoubleObjectFFGlicth 叫出物件 55，需要<strong>按下控制器 2 的「←、↑、Select、A」鍵</strong>。 <br>影片的跑者是使用膠帶固定住 A 鍵，用雙腳踩下十字鍵與 Select 鍵。 <br>然而 Guts Man 關的 DoubleObjectFFGlicth 比起 Ice Man 的難易度更高，在人力執行上是一定程度的運 Game，這點只能不斷嘗試來達成。 <br>而最重要的是，<strong>要在這 3 條磁力條消失前達成 DoubleObjectFFGlicth 的技巧</strong>，若是成功達成執行技巧，呼叫出物件 55，就會和 TAS 影片一樣突然進入 ending 。 <br>磁力條消失的時間是 150 frames（約 2.5 秒左右），因此僅有大概 1 ～ 2 次的跳躍機會可嘗試，雖然單次 run 的整體時間很短，仍然是個極為困難的技巧。</li> </ol> <h2 id=參考文章：>參考文章：</h2> <ul> <li><a href=http://www.yuko2ch.net/rockman/mm1tasmap.html target=_blank rel=nofollow>ディレオブジェクトテク</a></li> <li><a href=http://ch.nicovideo.jp/TASVideos/blomaga/ar529967 target=_blank rel=nofollow>ロックマン 1 のディレイエンディング TAS について</a></li> <li><a href=http://ch.nicovideo.jp/TASVideos/blomaga/ar535617 target=_blank rel=nofollow>ロックマン 1 の新技：DoubleObjectFFGlitch について</a></li> <li><a href=http://ch.nicovideo.jp/nou/blomaga/ar558601 target=_blank rel=nofollow>ロックマン RTA における　任意コード実行テクニックについて</a></li> <li><a href=http://www.nicovideo.jp/watch/sm23553625 target=_blank rel=nofollow>ロックマン 1 in 00:32.11 の解説用動画</a></li> </ul> <h2 id=追記>追記</h2> <ul> <li><a href=https://www.nicovideo.jp/watch/sm36192523 target=_blank rel=nofollow>【TAS】 ロックマン 1 in 00:27.04 【任意コード実行】</a></li> </ul> <p>在 2020 年的 1 月 6 號，ピロ彦 P 上傳了一支大幅更新版本的影片， 這次把原本就很驚人的 32 秒紀錄再推進了 5 秒，全破《洛克人 1》只需要 27 秒！</p> <h3 id=機制簡記>機制簡記</h3> <ul> <li>利用 Y 軸座標執行任意程式碼</li> <li>打大補 <code>$610</code> -> 3A</li> <li>調整掉落道具高度 <code>3A ** 17 18</code> 產生 <code>55</code></li> <li>在 <code>$8C</code>=05 的 2px 位置調整成 NEXT=130 前後產生 <code>$17</code> 物件</li> <li>為了讓產生物件的 Y 座標變成 <code>$16</code> 先調整 <code>$611</code>=6C</li> <li>物件 <code>55</code> 不會執行純讀取資料（ROM）而會執行 RAM 的 <code>$600</code></li> <li><code>$600</code> 是岩男 Y 座標，<code>$601</code> 為 F8 固定值，<code>$602</code> 是第 3 發子彈的 Y 座標</li> <li>調整成 <code>48 F8 54 54 48 F8 F8</code> 程式就會執行至 <code>$610</code> 即敵人 Y 座標物件位址為止</li> <li>34 和 54 是 NOP（No Operation），F8 是 SED（Stream Editor）都是在紅白機上無功能的指令</li> <li>48 PHA 是把 A 暫存器的值推到 Stuck 上</li> <li>執行 <code>$600</code> 時 A 暫存器是 06 因此 Stuck 的值是 06 06</li> <li><code>$611</code> 之後的 <code>6C 17 18</code> JUMP 到 <code>$1817</code>（<code>$0017</code> 的鏡像複製值）的 16bit 值</li> <li><code>$17</code> 是 2P 在前一幀的輸入 <code>$18</code> 是 1P 的新輸入減去前一幀輸入</li> <li>在跳躍之前執行兩次 PHA 回傳的位置會變成 <code>$0606</code>+1</li> <li>第一次的跳躍讓 A 暫存器值變為 0A，第二次跳躍讓關卡變為 0A+1</li> <li>關卡的值（<code>$31</code>）變成 0B 進入 Ending</li> </ul> <h3 id=參考文章>參考文章</h3> <ul> <li><a href=http://hp.vector.co.jp/authors/VA042397/nes/6502.html target=_blank rel=nofollow>NES 研究室 - 6502</a></li> </ul> <div class="svelte-zo4zw5 toc-dropdown"> </div></article> <div class="back-to-top hidden svelte-142cfra" style=right:2em>Back to top </div> </div></main> <footer class=svelte-2kuhyy><a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="noreferrer noopener nofollow">CC BY-SA 4.0.</a> <div class="svelte-2kuhyy right">Made with <span class="svelte-2kuhyy heart">❤️</span>, <a href=https://github.com/Charca/sapper-blog-template target=_blank ref="noreferrer noopener nofollow">Sapper</a> and <a href=https://chiron-fonts.github.io/sans/ target=_blank rel="noreferrer noopener nofollow">Chiron Sans HK</a></div> <div class="svelte-2kuhyy clearfix"></div> </footer> </div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,{post:{title:"洛克人 1 的呼叫 Ending 漏洞機制解說",slug:"ACG-rockman-1-tas-glitch",html:"\u003Ch2 id=\"介紹\"\u003E介紹\u003C\u002Fh2\u003E\n\u003Cp\u003E2014 年 5 月，遊戲圈出現了一支使用輔助程式，在\u003Cstrong\u003E半分鐘內\u003C\u002Fstrong\u003E通關《洛克人 1》的破天荒影片，而這種需要經過精密的機制解析，與流程操控的遊戲通關方式，僅隔一個月竟然出現人力操作達成同樣的成果，人類無極限！本文會對其所使用的機制與流程進行解說。\u003C\u002Fp\u003E\n\u003Ciframe width=\"560\" height=\"315\" src=\"https:\u002F\u002Fwww.youtube.com\u002Fembed\u002Fu5qom2q7cUU\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003E\u003C\u002Fiframe\u003E\n△【TAS】 ロックマン 1 in 00:32.11 【任意コード実行】\n\n\u003Ch2 id=\"tas-與-ace\"\u003ETAS 與 ACE\u003C\u002Fh2\u003E\n\u003Cp\u003E在介紹這次主題的遊戲漏洞前，先為不熟悉的的讀者解釋一下所謂的「TAS」以及「ACE」是什麼，\n「TAS」指的是「\u003Cstrong\u003E使用工具輔助做出的競速通關 \u002F 炫技遊玩（Tool-Assisted Speedrun \u002F Superplay）\u003C\u002Fstrong\u003E」，具體來說，會使用像是遊戲模擬器上搭載的輔助功能，減慢遊戲整體執行速度、逐格操作、快速存檔 \u002F 讀取、記憶體觀察…等等，藉此達成在理論上可能但實際難度非常高的遊玩技巧。\u003C\u002Fp\u003E\n\u003Cp\u003E「ACE」則是「\u003Cstrong\u003E執行任意代碼（Arbitrary Code Execution）\u003C\u002Fstrong\u003E」，這邊的「代碼」其實就是程式碼的意思，指使用遊戲軟、硬體安全性上的漏洞，去執行任何程式碼，講白了就是用遊戲操作寫程式，常見手法有如本文的直接呼叫（跳至）遊戲結局。\u003C\u002Fp\u003E\n\u003Ch2 id=\"tas-使用機制\"\u003ETAS 使用機制\u003C\u002Fh2\u003E\n\u003Ch3 id=\"delayobjectffglitch-技巧\"\u003EDelayObjectFFGlitch 技巧\u003C\u002Fh3\u003E\n\u003Cp\u003E在《洛克人 1》裡，當洛克人經過特定地圖的某些地點後，會出現不可視的「\u003Ccode\u003E0xFF\u003C\u002Fcode\u003E」物件（後稱 \u003Ccode\u003EFF 物件\u003C\u002Fcode\u003E）。例如 Ice Man 關卡的此處：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002FFZkBQwv.gif\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FFZkBQwv.gif\" alt=\"img01\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E△ 「\u003Ccode\u003E0xFF\u003C\u002Fcode\u003E」物件出現於畫面不可視之處\u003C\u002Fp\u003E\n\u003Cp\u003E這個物件會讓影像處理單位（PPU, Picture Processing Unit）進行 Pattern Table Remap。推測是用於重新建構畫面用的物件。\u003C\u002Fp\u003E\n\u003Cp\u003E在正常情況的程式執行流程是 \u003Ccode\u003E1. 物件 FF 出現\u003C\u002Fcode\u003E → \u003Ccode\u003E2. 處理物件 FF（讀取 Bank 2 的資料）\u003C\u002Fcode\u003E → \u003Ccode\u003E3. 切換至 Bank 6\u003C\u002Fcode\u003E → \u003Ccode\u003E4. 讀取敵人資料編號\u003C\u002Fcode\u003E。\u003C\u002Fp\u003E\n\u003Cp\u003E若是在切換 Bank 之前，經由\u003Cstrong\u003E特定的操作\u003C\u002Fstrong\u003E超載待處理的指令量，會導致未切換至 Bank 6 之前，就直接在 Bank 2 讀取敵人編號的資料，造成畫面異常或是出現錯誤的敵人。\u003C\u002Fp\u003E\n\u003Cp\u003E敵人的 AI 舉動是在 \u003Ccode\u003E0x00\u003C\u002Fcode\u003E～\u003Ccode\u003E0x3A\u003C\u002Fcode\u003E 這個範圍裡的物件資料，程式流程是「執行敵人的 AI 程式 → 從物件編號得出要 jump 的（下一個資料的）目標 → 執行目標位置的 AI 程式」，因此使用 Delay Object 技巧，會讓最後的目標變成範圍外的物件，造成各種問題。\u003C\u002Fp\u003E\n\u003Cp\u003E例如物件 \u003Ccode\u003EF5\u003C\u002Fcode\u003E 出現後，需要執行敵人行動的 AI 模式 → 由於未切換 Bank，物件編號得到的 jump 目標為「\u003Ccode\u003EC0BD\u003C\u002Fcode\u003E」→ \u003Ccode\u003EC0BD\u003C\u002Fcode\u003E 為「通關處理過程中的物件」位置，因此遊戲會突然通關。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002FpwkEkYJ.gif\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FpwkEkYJ.gif\" alt=\"img02\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E△ 異常出現的 Electric Man\u003C\u002Fp\u003E\n\u003Cp\u003E而 jump 目標詳細來說，系統會從 \u003Ccode\u003E$AA3B\u003C\u002Fcode\u003E + 2×（物件編號）取得 \u003Ca target=\"_blank\" rel=\"nofollow\" href=\"http:\u002F\u002Fwww.yuko2ch.net\u002Frockman\u002FJumpAddressList.txt\"\u003EAI 位置\u003C\u002Fa\u003E，故物件編號為 \u003Ccode\u003E0x15\u003C\u002Fcode\u003E 時，目標位置會是 \u003Ccode\u003E$AA3B\u003C\u002Fcode\u003E + 2×0x15 = \u003Ccode\u003E$AA65\u003C\u002Fcode\u003E 裡所儲存的值，因此跳至儲存的「\u003Ccode\u003EB23C\u003C\u002Fcode\u003E」執行 AI。\u003C\u002Fp\u003E\n\u003Cp\u003E可能出現的各種物件 00 ～ FF 中，大部份的物件會造成遊戲重新開始或無法繼續遊玩，在上例的 Ice Man TAS 的實際運用裡，是發現 \u003Ccode\u003E$23\u003C\u002Fcode\u003E（每 frame 增加 1 的計數器）的值走至 55 時，有可能會出現「物件 55」，之後再藉由\u003Cstrong\u003E調整道具的出現量、音樂的演奏變化時間點、 rock buster 的高低座標\u003C\u002Fstrong\u003E得到想要的後續目標位置。\u003C\u002Fp\u003E\n\u003Cp\u003E套用計算法，\u003Ccode\u003E$AA3B\u003C\u002Fcode\u003E + 2×0x55 = \u003Ccode\u003E$AAE5\u003C\u002Fcode\u003E，裡頭儲存的 AI 位置為「\u003Ccode\u003E$600\u003C\u002Fcode\u003E」，搭配下列操作調整相關資料：\u003C\u002Fp\u003E\n\u003Ctable\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth\u003E位置\u003C\u002Fth\u003E\n\u003Cth\u003E數值\u003C\u002Fth\u003E\n\u003Cth\u003E行為\u003C\u002Fth\u003E\n\u003Cth\u003E如何調整\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\u003Ctr\u003E\n\u003Ctd\u003E0600\u003C\u002Ftd\u003E\n\u003Ctd\u003E54 F8\u003C\u002Ftd\u003E\n\u003Ctd\u003ENOP F8,X（什麼都不做，往下執行 ）\u003C\u002Ftd\u003E\n\u003Ctd\u003E移動洛克人的 Y 座標 =54\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E0602\u003C\u002Ftd\u003E\n\u003Ctd\u003E50 4D\u003C\u002Ftd\u003E\n\u003Ctd\u003EBVC \u003Ccode\u003E$0651\u003C\u002Fcode\u003E（jump 至 \u003Ccode\u003E$651\u003C\u002Fcode\u003E）\u003C\u002Ftd\u003E\n\u003Ctd\u003E調整 rock buster 第 1 發和第 2 發的 Y 座標 =50, 4D\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E0650\u003C\u002Ftd\u003E\n\u003Ctd\u003E3C\u003C\u002Ftd\u003E\n\u003Ctd\u003EUNDEFINED（這裡不會執行）\u003C\u002Ftd\u003E\n\u003Ctd\u003Edelay FF 出現物件 3 的 ObjectFireDelay=3C\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E0651\u003C\u002Ftd\u003E\n\u003Ctd\u003EAD 22 1F\u003C\u002Ftd\u003E\n\u003Ctd\u003ELDA \u003Ccode\u003E$1F22\u003C\u002Fcode\u003E=#\u003Ccode\u003E$0A\u003C\u002Fcode\u003E（讀取 0x0A 裡的 \u003Ccode\u003E$1F22\u003C\u002Fcode\u003E 並儲存至 A 暫存器）\u003C\u002Ftd\u003E\n\u003Ctd\u003E擊倒普通的敵人掉落道具的 ObjectFireDelay=AD,22\u003Cbr\u003Edelay FF 出現的物件 1 的 ObjectFireDelay=1F\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E0654\u003C\u002Ftd\u003E\n\u003Ctd\u003E6C 18 00\u003C\u002Ftd\u003E\n\u003Ctd\u003EJMP (\u003Ccode\u003E$0018\u003C\u002Fcode\u003E)=\u003Ccode\u003E$C460\u003C\u002Fcode\u003E（\u003Ccode\u003E$C460\u003C\u002Fcode\u003E: jump 至通關處理的途中）\u003C\u002Ftd\u003E\n\u003Ctd\u003E擊倒普通的敵人掉落道具的 ObjectFireDelay=6C,18\u003Cbr\u003Edelay FF 出現的物件 55 的 ObjectFireDelay=00\u003Cbr\u003E\u003Ccode\u003E$0018\u003C\u002Fcode\u003E 的數値由操作控制器 1 的「左下」+ 控制器 2 的「左右 Select」=60,C4\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\n\u003Cp\u003EC45E: A9 00 lda #$00\n\u003Cbr\u003EC460: 85 31 sta $31(CurrentStage)　 ← 遊戲程式會 jump 至這裡並進行中斷處理\n\u003Cbr\u003EC462: 4C 0C C1 jmp $C10C\u003C\u002Fp\u003E\n\u003Cp\u003E進入遊戲 ending。\u003C\u002Fp\u003E\n\u003Cp\u003E利用這個漏洞，就能在事先準備好讀取的資料後，達成想要的操作結果。\u003C\u002Fp\u003E\n\u003Ch3 id=\"doubleobjectffglitch\"\u003EDoubleObjectFFGlitch\u003C\u002Fh3\u003E\n\u003Col\u003E\n\u003Cli\u003E在物件 FF 會出現的地方來回移動\u003C\u002Fli\u003E\n\u003Cli\u003E物件 FF 出現後，會在 16 frames 裡每 frame 進行一次物件 FF 的處理\u003C\u002Fli\u003E\n\u003Cli\u003E在物件 FF 進行處理的 frame 裡，讓物件 FF 朝左出現\u003C\u002Fli\u003E\n\u003Cli\u003E會變為從 Bank 2 讀入錯誤的物件\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E同樣的，由調整 \u003Ccode\u003E$23\u003C\u002Fcode\u003E（每 frame 增加 1 的計數器）決定讀入的物件，以下則是一些有趣的物件：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003E75\u003C\u002Fcode\u003E、\u003Ccode\u003EF5\u003C\u002Fcode\u003E: 通過該關卡，但下一關開始會破圖。\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003E4A\u003C\u002Fcode\u003E : 出現後，過一段時間通過該關卡，下一關的關卡圖像正常。\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003E42\u003C\u002Fcode\u003E : 磁力條，由於看不見、初始座標會變動、會往 11 點鐘方向並馬上消失，因此難以取得，在晃動人物時偶爾會有成功取得的狀況。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E一旦某項物件出現後，在其消滅之前都不會再出現下個物件，若出現了目標之外的物件，就要用離開畫面之類的手法來清除。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002FLEoXwhg.gif\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FLEoXwhg.gif\" alt=\"img03\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002Fb0naPNm.gif\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002Fb0naPNm.gif\" alt=\"img04\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002FxO6xO8i.gif\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FxO6xO8i.gif\" alt=\"img05\"\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E△ 本次 RTA 的關鍵地點\u003C\u002Fp\u003E\n\u003Cp\u003E在氣力人關卡的圖片位置三處，進行 DoubleObjectFFGlitch（在圖片的位置左右移動）就會將 \u003Ccode\u003E$17\u003C\u002Fcode\u003E（控制器 2）做為下一個讀取的物件編號，因此可由控制器 2 的數值決定物件 00 ～ FF 的出現。\u003C\u002Fp\u003E\n\u003Cp\u003E若是同時按住控制器 2 的「左、上、下、Select、A」鍵，會出現物件 75 ，通過目前關卡，但下一關會破圖。\u003C\u002Fp\u003E\n\u003Cp\u003E※兩者的差異應該是在，前者使用增加畫面道具量造成的處理延遲，去影響物件的產生，後者利用物件出現的方向，因此原文解說內有註明，後者技巧只需要來回移動，不需加上處理 delay 。\u003C\u002Fp\u003E\n\u003Ch2 id=\"人力-rta\"\u003E人力 RTA\u003C\u002Fh2\u003E\n\u003Ciframe width=\"560\" height=\"315\" src=\"https:\u002F\u002Fwww.youtube.com\u002Fembed\u002FSoUd69Xs9gg\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003E\u003C\u002Fiframe\u003E\n\n\u003Cp\u003E△【RTA】ロックマン in3:53【2014-06-21】\u003C\u002Fp\u003E\n\u003Ch3 id=\"目標\"\u003E目標\u003C\u002Fh3\u003E\n\u003Cp\u003E將記憶體調整成下列的對應數值後 :\u003C\u002Fp\u003E\n\u003Ctable\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth\u003E位置\u003C\u002Fth\u003E\n\u003Cth\u003E數值\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\u003Ctr\u003E\n\u003Ctd\u003E\u003Ccode\u003E$482\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003E8A\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Ccode\u003E$483\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003E50\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Ccode\u003E$484\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003E13\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Ccode\u003E$498\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003E4A\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Ccode\u003E$499\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003E20\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Ccode\u003E$49A\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003E60\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Ccode\u003E$49B\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EC4\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Ccode\u003E$605\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003E20\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Ccode\u003E$606\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003E82\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Ccode\u003E$607\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003E04\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\n\u003Cp\u003E進行 DoubleObjectFFGlitch 就會進入 Ending 畫面。\u003C\u002Fp\u003E\n\u003Ch3 id=\"流程\"\u003E流程\u003C\u002Fh3\u003E\n\u003Col\u003E\n\u003Cli\u003E在 Electric Man 的關卡裡，於梯子上進行射擊的動作，\u003Cstrong\u003E僅按下 1 frame\u003C\u002Fstrong\u003E 下鍵，會變為半抓住梯子的樣子，\n\u003Cbr\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002F5srrun8.jpg\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002F5srrun8.jpg\" alt=\"img06\"\u003E\u003C\u002Fa\u003E\n\u003Cbr\u003E洛克人朝左的狀況下，按下上鍵，會變為頭卡在天花板的穿牆狀態，按下跳躍鍵，跳到最高處後，按下右鍵，會穿越至磁力條的右方，這個狀態下按左鍵，會由於子畫素（subpixel）的關係，有 1\u002F8 的機率可以拿到磁力條，再按下一次跳躍鍵，就會回到穿牆狀態。\u003C\u002Fli\u003E\n\u003Cli\u003E進入 Guts Man 關卡\u003C\u002Fli\u003E\n\u003Cli\u003E在關卡開頭等待第二隻小矮兵的 3 連攻擊，在下圖的位置等待至第 3 發中央的子彈消失於畫面外後， \u003Ccode\u003E$49B\u003C\u002Fcode\u003E 的值會變為 C4 。\n\u003Cbr\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002FEhAhmrY.jpg\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FEhAhmrY.jpg\" alt=\"img07\"\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E在畫面內有 2 隻小矮兵的狀態下，\u003Cstrong\u003E保持畫面裡有 2 連攻擊\u003C\u002Fstrong\u003E追至下圖的位置，等待至第 2 發中央的子彈消失於畫面外後， \u003Ccode\u003E$49A\u003C\u002Fcode\u003E 的值會變為 60。\n\u003Cbr\u003E這裡若是遇到 3 連攻擊 \u003Ccode\u003E$49B\u003C\u002Fcode\u003E 會因此取得 C4 之外的值。\n\u003Cbr\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002FfAcJeMt.jpg\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FfAcJeMt.jpg\" alt=\"img08\"\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E在畫面內有 1 隻小矮兵的狀態下，在下圖位置等待 2 連攻擊的第 2 發中央子彈消失於畫面外後， \u003Ccode\u003E$499\u003C\u002Fcode\u003E 的值會變為 20。\n\u003Cbr\u003E這裡同樣若是遇到 3 連攻擊，在這之前的調整會因此偏掉。\n\u003Cbr\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002FO046zDW.jpg\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FO046zDW.jpg\" alt=\"img09\"\u003E\u003C\u002Fa\u003E\n\u003Cbr\u003E這裡小矮兵的攻擊間隔是由亂數決定，若是運氣不好，會有可能為了 3 連攻擊或 2 連攻擊，要等上數十秒。\n\u003Cbr\u003E若是途中失敗可從 \u003Ccode\u003E$49B\u003C\u002Fcode\u003E 重新開始調整。\u003C\u002Fli\u003E\n\u003Cli\u003E接下來要調整 \u003Ccode\u003E$498\u003C\u002Fcode\u003E，移動至斷崖的另一邊後，擊敗 3 隻敵人\u003Cstrong\u003E並使畫面上顯示 3 個道具\u003C\u002Fstrong\u003E後，在下圖的位置受到傷害，會使 \u003Ccode\u003E$498\u003C\u002Fcode\u003E 的值變為 4A 。\n\u003Cbr\u003E若是失敗仍可在血量允許的情況下持續調整。\n\u003Cbr\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002FuFBy8hb.jpg\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FuFBy8hb.jpg\" alt=\"img10\"\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E接下來是 \u003Ccode\u003E$482\u003C\u002Fcode\u003E～\u003Ccode\u003E$484\u003C\u002Fcode\u003E 的調整，在下圖的位置向右連射 3 發 buster ，在第 3 發子彈消失於畫面外後，\u003Ccode\u003E$484\u003C\u002Fcode\u003E 的值會變為 13。\n\u003Cbr\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002F5KVdRku.jpg\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002F5KVdRku.jpg\" alt=\"img11\"\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E在下圖的位置向右連射 2 發 buster ，在第 2 發子彈消失於畫面外後，\u003Ccode\u003E$483\u003C\u002Fcode\u003E 的值會變為 50。\n\u003Cbr\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002FZKGmALT.jpg\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FZKGmALT.jpg\" alt=\"img12\"\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E在下圖的位置向右射單發 buster ，子彈消失於畫面外後，\u003Ccode\u003E$482\u003C\u002Fcode\u003E 的值會變為 8A。\n\u003Cbr\u003E在這之後若再發射 buster，會造成先前調整的數值變動，\u003Cstrong\u003E要注意不可再使用 buster\u003C\u002Fstrong\u003E ，若是失敗則要再從 \u003Ccode\u003E$484\u003C\u002Fcode\u003E 開始重新調整。\n\u003Cbr\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002FO95Y27D.jpg\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FO95Y27D.jpg\" alt=\"img13\"\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E接下來是 \u003Ccode\u003E$605\u003C\u002Fcode\u003E～\u003Ccode\u003E$607\u003C\u002Fcode\u003E 的調整，從第三階樓梯開始，使用磁力條逐格拉高 10 高度。\n\u003Cbr\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002FceJ1S7O.jpg\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FceJ1S7O.jpg\" alt=\"img14\"\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E注意磁力條的顯示時間，將畫面最上方的磁力條調整為\u003Cstrong\u003E畫面裡出現的第 3 條\u003C\u002Fstrong\u003E， \u003Ccode\u003E$607\u003C\u002Fcode\u003E 的值會變為 04 。\n\u003Cbr\u003E需將時間調整為，這時踏台的第 2 條和第 1 條的磁力條，在設置第 3 條後會馬上消失。\n\u003Cbr\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002F6qy17F2.jpg\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002F6qy17F2.jpg\" alt=\"img15\"\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E在踏台的第 2 條磁力條消失前，射出磁力條並跳至最高，可以使用 Start → Select 微調磁力條至下圖的位置（與右邊的山峰平行）後，放開 B 鍵便能在此設置磁力條。\n\u003Cbr\u003E由於這時先前設值的第 1 和第 2 條磁力條已經消失了，這時設置的磁力條會變為第 1 條，\u003Ccode\u003E$605\u003C\u002Fcode\u003E 會變為 20 。\n\u003Cbr\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002FuQmEdO7.jpg\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FuQmEdO7.jpg\" alt=\"img16\"\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E著地後朝左射出磁力條，並在最大跳躍後，在\u003Cstrong\u003E頂點附近\u003C\u002Fstrong\u003E朝右，將磁力條設置於如下圖的階梯上固定，這會是第 2 條磁力條，\u003Ccode\u003E$606\u003C\u002Fcode\u003E 變為 82 。\n\u003Cbr\u003E若是這時失敗會由於磁力條的殘量不足，必須整個 run 重來過。\n\u003Cbr\u003E若只是想成功可以從 \u003Ccode\u003E$484\u003C\u002Fcode\u003E 的調整重新開始。\n\u003Cbr\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fi.imgur.com\u002FMPvesQN.jpg\"\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FMPvesQN.jpg\" alt=\"img17\"\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E調整至此\u003Cstrong\u003E必須沒有任何 1 格點陣\u003C\u002Fstrong\u003E的偏差，並且為了使用 DoubleObjectFFGlicth 叫出物件 55，需要\u003Cstrong\u003E按下控制器 2 的「←、↑、Select、A」鍵\u003C\u002Fstrong\u003E。\n\u003Cbr\u003E影片的跑者是使用膠帶固定住 A 鍵，用雙腳踩下十字鍵與 Select 鍵。\n\u003Cbr\u003E然而 Guts Man 關的 DoubleObjectFFGlicth 比起 Ice Man 的難易度更高，在人力執行上是一定程度的運 Game，這點只能不斷嘗試來達成。\n\u003Cbr\u003E而最重要的是，\u003Cstrong\u003E要在這 3 條磁力條消失前達成 DoubleObjectFFGlicth 的技巧\u003C\u002Fstrong\u003E，若是成功達成執行技巧，呼叫出物件 55，就會和 TAS 影片一樣突然進入 ending 。\n\u003Cbr\u003E磁力條消失的時間是 150 frames（約 2.5 秒左右），因此僅有大概 1 ～ 2 次的跳躍機會可嘗試，雖然單次 run 的整體時間很短，仍然是個極為困難的技巧。\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch2 id=\"參考文章：\"\u003E參考文章：\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"http:\u002F\u002Fwww.yuko2ch.net\u002Frockman\u002Fmm1tasmap.html\"\u003Eディレオブジェクトテク\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"http:\u002F\u002Fch.nicovideo.jp\u002FTASVideos\u002Fblomaga\u002Far529967\"\u003Eロックマン 1 のディレイエンディング TAS について\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"http:\u002F\u002Fch.nicovideo.jp\u002FTASVideos\u002Fblomaga\u002Far535617\"\u003Eロックマン 1 の新技：DoubleObjectFFGlitch について\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"http:\u002F\u002Fch.nicovideo.jp\u002Fnou\u002Fblomaga\u002Far558601\"\u003Eロックマン RTA における　任意コード実行テクニックについて\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"http:\u002F\u002Fwww.nicovideo.jp\u002Fwatch\u002Fsm23553625\"\u003Eロックマン 1 in 00:32.11 の解説用動画\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"追記\"\u003E追記\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fwww.nicovideo.jp\u002Fwatch\u002Fsm36192523\"\u003E【TAS】 ロックマン 1 in 00:27.04 【任意コード実行】\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E在 2020 年的 1 月 6 號，ピロ彦 P 上傳了一支大幅更新版本的影片，\n這次把原本就很驚人的 32 秒紀錄再推進了 5 秒，全破《洛克人 1》只需要 27 秒！\u003C\u002Fp\u003E\n\u003Ch3 id=\"機制簡記\"\u003E機制簡記\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E利用 Y 軸座標執行任意程式碼\u003C\u002Fli\u003E\n\u003Cli\u003E打大補 \u003Ccode\u003E$610\u003C\u002Fcode\u003E -&gt; 3A\u003C\u002Fli\u003E\n\u003Cli\u003E調整掉落道具高度 \u003Ccode\u003E3A ** 17 18\u003C\u002Fcode\u003E 產生 \u003Ccode\u003E55\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E在 \u003Ccode\u003E$8C\u003C\u002Fcode\u003E=05 的 2px 位置調整成 NEXT=130 前後產生 \u003Ccode\u003E$17\u003C\u002Fcode\u003E 物件\u003C\u002Fli\u003E\n\u003Cli\u003E為了讓產生物件的 Y 座標變成 \u003Ccode\u003E$16\u003C\u002Fcode\u003E 先調整 \u003Ccode\u003E$611\u003C\u002Fcode\u003E=6C\u003C\u002Fli\u003E\n\u003Cli\u003E物件 \u003Ccode\u003E55\u003C\u002Fcode\u003E 不會執行純讀取資料（ROM）而會執行 RAM 的 \u003Ccode\u003E$600\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003E$600\u003C\u002Fcode\u003E 是岩男 Y 座標，\u003Ccode\u003E$601\u003C\u002Fcode\u003E 為 F8 固定值，\u003Ccode\u003E$602\u003C\u002Fcode\u003E 是第 3 發子彈的 Y 座標\u003C\u002Fli\u003E\n\u003Cli\u003E調整成 \u003Ccode\u003E48 F8 54 54 48 F8 F8\u003C\u002Fcode\u003E 程式就會執行至 \u003Ccode\u003E$610\u003C\u002Fcode\u003E 即敵人 Y 座標物件位址為止\u003C\u002Fli\u003E\n\u003Cli\u003E34 和 54 是 NOP（No Operation），F8 是 SED（Stream Editor）都是在紅白機上無功能的指令\u003C\u002Fli\u003E\n\u003Cli\u003E48 PHA 是把 A 暫存器的值推到 Stuck 上\u003C\u002Fli\u003E\n\u003Cli\u003E執行 \u003Ccode\u003E$600\u003C\u002Fcode\u003E 時 A 暫存器是 06 因此 Stuck 的值是 06 06\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003E$611\u003C\u002Fcode\u003E 之後的 \u003Ccode\u003E6C 17 18\u003C\u002Fcode\u003E JUMP 到 \u003Ccode\u003E$1817\u003C\u002Fcode\u003E（\u003Ccode\u003E$0017\u003C\u002Fcode\u003E 的鏡像複製值）的 16bit 值\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003E$17\u003C\u002Fcode\u003E 是 2P 在前一幀的輸入 \u003Ccode\u003E$18\u003C\u002Fcode\u003E 是 1P 的新輸入減去前一幀輸入\u003C\u002Fli\u003E\n\u003Cli\u003E在跳躍之前執行兩次 PHA 回傳的位置會變成 \u003Ccode\u003E$0606\u003C\u002Fcode\u003E+1\u003C\u002Fli\u003E\n\u003Cli\u003E第一次的跳躍讓 A 暫存器值變為 0A，第二次跳躍讓關卡變為 0A+1\u003C\u002Fli\u003E\n\u003Cli\u003E關卡的值（\u003Ccode\u003E$31\u003C\u002Fcode\u003E）變成 0B 進入 Ending\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"參考文章\"\u003E參考文章\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"http:\u002F\u002Fhp.vector.co.jp\u002Fauthors\u002FVA042397\u002Fnes\u002F6502.html\"\u003ENES 研究室 - 6502\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n",date:"2019-02-19T13:59:42.000Z",excerpt:"2014 年 5 月，遊戲圈出現了一支使用輔助程式，在「半分鐘內」通關《洛克人 1》的破天荒影片，而這種需要經過精密的機制解析，與流程操控的遊戲通關方式，僅隔一個月竟然出現人力操作達成同樣的成果，人類無極限！",printDate:"February 19, 2019",printReadingTime:"5 min read",tags:["ACG","Game"]}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.812e4595.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main","/client/client.812e4595.js")}document.head.appendChild(s)</script> 