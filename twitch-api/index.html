<!doctype html> <head> <meta charset=utf-8> <meta name=viewport content="width=device-width,initial-scale=1"> <meta name=theme-color content=#333333> <base href=/ > <link href=global.css rel=stylesheet> <link href=fonts.css rel=stylesheet> <link href=highlight.css rel=stylesheet> <link href=manifest.json rel=manifest> <link href=favicon.png rel=icon type=image/png> <link href=client/client-d6603d8f.css rel=stylesheet><link href=client/[slug]-be2f2fa9.css rel=stylesheet> <title>Twitch API</title><script async data-svelte=svelte-a2kvt3 src="https://www.googletagmanager.com/gtag/js?id=UA-114661136-2"></script><script async data-svelte=svelte-1op50db src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js data-ad-client=ca-pub-9613661448556355></script><meta data-svelte=svelte-yn5fq1 content=article property=og:type><meta data-svelte=svelte-yn5fq1 content="Twitch API" property=og:title><meta data-svelte=svelte-yn5fq1 name=Description><meta data-svelte=svelte-yn5fq1 property=og:description><meta data-svelte=svelte-yn5fq1 name=twitter:card content=summary_large_image><meta data-svelte=svelte-yn5fq1 name=twitter:title value="Twitch API"><meta data-svelte=svelte-yn5fq1 name=twitter:description><meta data-svelte=svelte-yn5fq1 name=twitter:label1 value="Published on"><meta data-svelte=svelte-yn5fq1 name=twitter:data1 value="Nov 8, 2020"> <link href=/client/client.14125f25.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-d6603d8f.css rel=preload as=style><link href=/client/[slug].35332a93.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/[slug]-be2f2fa9.css rel=preload as=style></head> <body> <div id=sapper> <div class="svelte-wjh32h layout"> <header class=svelte-310tmg><nav class=svelte-dvivxn><a href=. class=svelte-dvivxn>blog</a> <a href=about class=svelte-dvivxn>about</a> <a href=rss.xml class=svelte-dvivxn>rss</a></nav> <a href=/ ><img alt=Sapper class=svelte-nsstmh src=logo-192.png></a></header> <main class=svelte-wjh32h> <header class=svelte-7rau0t><h1 class=svelte-7rau0t>Twitch API</h1> <p class=svelte-7rau0t>November 8, 2020</header> <div class=container><article class=content><h2 id=twitch-oidc-認證響應>Twitch OIDC 認證響應</h2> <ul> <li>Twitch API 文件：<a href=https://dev.twitch.tv/docs/authentication rel=nofollow target=_blank>Authentication | Twitch Developers</a></li> <li>註冊 Twitch APP：<a href=https://dev.twitch.tv/console/apps rel=nofollow target=_blank>Twitch Developers</a></li> <li><a href=https://pjchender.blogspot.com/2018/08/js-javascript-url-parameters.html rel=nofollow target=_blank>[JS] 使用 JavaScript 解析網址與處理網址中的參數（URL Parameters） ~ PJCHENder&lt;br>那些沒告訴你的小細節</a></li> </ul> <h3 id=驗證>驗證</h3> <p><code>GET https://id.twitch.tv/oauth2/authorize ?client_id=&lt;your client ID> &redirect_uri=&lt;your registered redirect URI> &response_type=&lt;type> &scope=&lt;space-separated list of scopes> &claims=&lt;JSON object specifying requested claims></code></p> <h4 id=成功>成功</h4> <p><code>&lt;path-to-page>#access_token=&lt;access_token>&id_token=&lt;id_token>&scope=openid+user_read&token_type=bearer</code></p> <ol> <li><code>access_token</code></li> <li><code>id_token</code></li> <li><code>scope</code></li> <li><code>token_type</code></li> </ol> <p><code>id_token</code> decoded:</p> <ol> <li><code>at_hash</code></li> <li><code>aud</code>: Audience: client ID of the application requesting a user's authorization.</li> <li><code>azp</code>: Authorized party: client ID of the application which is being authorized. Currently the same as aud.</li> <li><code>exp</code>: Expiration time of the token. This is in UNIX/Epoch format.</li> <li><code>iat</code>: Time when the token was issued. This is in UNIX/Epoch format.</li> <li><code>iss</code>: Issuer of the token.</li> <li><code>preferred_username</code>: Display name of the authorizing user.</li> <li><code>sub</code>: User ID of the authorizing user.</li> </ol> <h4 id=失敗>失敗</h4> <p><code>&lt;path-to-page>?error=redirect_mismatch&error_description=Parameter+redirect_uri+does+not+match+registered+URI</code></p> <ol> <li><code>error</code></li> <li><code>error_description</code></li> </ol> <h3 id=取得使用者帳號>取得使用者帳號</h3> <pre class=language-bash><code class=language-bash>curl  -H 'Client-ID: uo6dggojyb8d6soh92zknwmi5ej1q2' \
-H 'Authorization: Bearer cfabdegwdoklmawdzdo98xt2fo512y' \
-X GET 'https://api.twitch.tv/helix/users?id=44322889'</code></pre></article></div></main> <footer class=svelte-wjh32h><span><a href=https://creativecommons.org/licenses/by-sa/4.0/ rel="noreferrer noopener nofollow" target=_blank>CC BY-SA 4.0.</a></span></footer></div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,{post:{title:"Twitch API",slug:"twitch-api",html:"\u003Ch2 id=\"twitch-oidc-認證響應\"\u003ETwitch OIDC 認證響應\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003ETwitch API 文件：\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fdev.twitch.tv\u002Fdocs\u002Fauthentication\"\u003EAuthentication | Twitch Developers\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E註冊 Twitch APP：\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fdev.twitch.tv\u002Fconsole\u002Fapps\"\u003ETwitch Developers\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fpjchender.blogspot.com\u002F2018\u002F08\u002Fjs-javascript-url-parameters.html\"\u003E[JS] 使用 JavaScript 解析網址與處理網址中的參數（URL Parameters） ~ PJCHENder&lt;br&gt;那些沒告訴你的小細節\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"驗證\"\u003E驗證\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Ccode\u003EGET https:\u002F\u002Fid.twitch.tv\u002Foauth2\u002Fauthorize ?client_id=&lt;your client ID&gt; &amp;redirect_uri=&lt;your registered redirect URI&gt; &amp;response_type=&lt;type&gt; &amp;scope=&lt;space-separated list of scopes&gt; &amp;claims=&lt;JSON object specifying requested claims&gt;\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Ch4 id=\"成功\"\u003E成功\u003C\u002Fh4\u003E\n\u003Cp\u003E\u003Ccode\u003E&lt;path-to-page&gt;#access_token=&lt;access_token&gt;&amp;id_token=&lt;id_token&gt;&amp;scope=openid+user_read&amp;token_type=bearer\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Ccode\u003Eaccess_token\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eid_token\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Escope\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Etoken_type\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E\u003Ccode\u003Eid_token\u003C\u002Fcode\u003E decoded:\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Ccode\u003Eat_hash\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eaud\u003C\u002Fcode\u003E: Audience: client ID of the application requesting a user&#39;s authorization.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eazp\u003C\u002Fcode\u003E: Authorized party: client ID of the application which is being authorized. Currently the same as aud.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eexp\u003C\u002Fcode\u003E: Expiration time of the token. This is in UNIX\u002FEpoch format.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eiat\u003C\u002Fcode\u003E: Time when the token was issued. This is in UNIX\u002FEpoch format.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eiss\u003C\u002Fcode\u003E: Issuer of the token.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Epreferred_username\u003C\u002Fcode\u003E: Display name of the authorizing user.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Esub\u003C\u002Fcode\u003E: User ID of the authorizing user.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch4 id=\"失敗\"\u003E失敗\u003C\u002Fh4\u003E\n\u003Cp\u003E\u003Ccode\u003E&lt;path-to-page&gt;?error=redirect_mismatch&amp;error_description=Parameter+redirect_uri+does+not+match+registered+URI\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Ccode\u003Eerror\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eerror_description\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch3 id=\"取得使用者帳號\"\u003E取得使用者帳號\u003C\u002Fh3\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003Ccode class=\"language-bash\"\u003Ecurl  -H 'Client-ID: uo6dggojyb8d6soh92zknwmi5ej1q2' \\\n-H 'Authorization: Bearer cfabdegwdoklmawdzdo98xt2fo512y' \\\n-X GET 'https:\u002F\u002Fapi.twitch.tv\u002Fhelix\u002Fusers?id=44322889'\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E",date:"2020-11-08T23:50:09.000Z",excerpt:null,printDate:"November 8, 2020",printReadingTime:"1 min read"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.14125f25.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main","/client/client.14125f25.js")}document.head.appendChild(s)</script> 