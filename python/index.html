<!doctype html> <head> <meta charset=utf-8> <meta name=viewport content="width=device-width,initial-scale=1"> <meta name=theme-color content=#333333> <base href=/ > <link href=global.css rel=stylesheet> <link href=fonts.css rel=stylesheet> <link href=highlight.css rel=stylesheet> <link href=manifest.json rel=manifest> <link href=favicon.png rel=icon type=image/png> <link href=client/client-d6603d8f.css rel=stylesheet><link href=client/[slug]-be2f2fa9.css rel=stylesheet> <title>Python</title><script async data-svelte=svelte-a2kvt3 src="https://www.googletagmanager.com/gtag/js?id=UA-114661136-2"></script><script async data-svelte=svelte-1op50db src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js data-ad-client=ca-pub-9613661448556355></script><meta data-svelte=svelte-yn5fq1 content=article property=og:type><meta data-svelte=svelte-yn5fq1 content=Python property=og:title><meta data-svelte=svelte-yn5fq1 name=Description><meta data-svelte=svelte-yn5fq1 property=og:description><meta data-svelte=svelte-yn5fq1 name=twitter:card content=summary_large_image><meta data-svelte=svelte-yn5fq1 name=twitter:title value=Python><meta data-svelte=svelte-yn5fq1 name=twitter:description><meta data-svelte=svelte-yn5fq1 name=twitter:label1 value="Published on"><meta data-svelte=svelte-yn5fq1 name=twitter:data1 value="Feb 12, 2020"> <link href=/client/client.967904a9.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-d6603d8f.css rel=preload as=style><link href=/client/[slug].2ef13c2f.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/[slug]-be2f2fa9.css rel=preload as=style></head> <body> <div id=sapper> <div class="svelte-wjh32h layout"> <header class=svelte-310tmg><nav class=svelte-dvivxn><a href=. class=svelte-dvivxn>blog</a> <a href=about class=svelte-dvivxn>about</a> <a href=rss.xml class=svelte-dvivxn>rss</a></nav> <a href=/ ><img alt=Sapper class=svelte-nsstmh src=logo-192.png></a></header> <main class=svelte-wjh32h> <header class=svelte-7rau0t><h1 class=svelte-7rau0t>Python</h1> <p class=svelte-7rau0t>February 12, 2020</header> <div class=container><article class=content><h2 id=為什麼-python-的-main-函式要寫成-if-__name__--__main__-？>為什麼 Python 的 main 函式要寫成 <code>if __name__ == '__main__':</code> ？</h2> <ul> <li><a href=https://qiita.com/suiru_nakamura/items/dca13669abdf29404f38 rel=nofollow target=_blank>python の if __name__ == '__main__':は何のためにあるのか。 - Qiita</a></li> </ul> <p>若我們寫了一支沒有 <code>if name == 'main'</code> 的 Python 檔案</p> <pre class=language-python><code class=language-python>def main():
  print ("Hello")

main()</code></pre><p>使用 <code>python hello.py</code> 執行仍然可以正常運作，但在其它檔案作為外部引入 <code>import hello</code> 的時候，也會顯示「Hello」</p> <pre class=language-python><code class=language-python>import hello
> Hello</code></pre><p>這是因為在 Python 中在引入檔案時，會先執行裡頭的內容，例如這支檔案就會執行 <code>main() => print("hello")</code> 的處理</p> <p>所以為了在引入檔案時，不要做出意圖之外的程式行為，才會加上 <code>if name == 'main'</code> 的分歧敘文</p> <pre class=language-python><code class=language-python>def main():
  print("Hello")

if __name__ == "__main__":
  main()</code></pre><p>如此 if 之內的部份在 import 時就不會執行了</p> <h3 id=背後原因>背後原因</h3> <p>name 是 Python 中的特殊變數，會儲存 Python 的模組名稱，在 <code>import hello</code> 時，<code>hello.py</code> 中的 name 就會被 Python 自動設定為 <code>'hello'</code></p> <p>使用 <code>python hello.py</code> 執行時，<code>hello.py</code> 中的 name 就會是於 Python 直接執行檔案時所設定的 <code>'main'</code></p> <p>所以 <code>if name == 'main'</code> 能夠判別「這支 <code>hello.py</code> 檔案是以 <code>python hello.py</code> 所直接執行的（＝不是經由 import 造成的舉動）」</p> <h2 id=asyncio>Asyncio</h2> <pre class=language-py><code class=language-py>import asyncio

async def main():
  print('Hello...)
  await asyncio.sleep(1)
  print('...World!')

asyncio.run(main())</code></pre><h2 id=python-調用-c-dll>Python 調用 C++ dll</h2> <h2 id=streamlit><a href=https://www.streamlit.io/ rel=nofollow target=_blank>Streamlit</a></h2> <h2 id=使用-pyinstaller-封裝-python-程式>使用 Pyinstaller 封裝 Python 程式</h2> <h3 id=安裝>安裝</h3> <p><code>pip install pyinstaller</code></p> <h3 id=封裝>封裝</h3> <ul> <li><code>pyinstaller</code></li> <li><code>pyi-makespec</code></li> <li>封裝成一個資料夾：<code>pyinstaller my-script.py</code></li> <li>封裝成一個檔案：<code>pyinstaller --onefile my-script.py</code></li> </ul> <p>執行程式位於 <code>dist</code> 資料夾裡</p> <h2 id=資源>資源</h2> <ul> <li><a href=https://openhome.cc/Gossip/Python/ rel=nofollow target=_blank>Python Gossip</a></li> <li><a href=https://qiita.com/Saku731/items/52a3bbacd002f26f408e rel=nofollow target=_blank>Python でゼロからでもサービス開発・公開できる学習ロードマップ</a></li> <li><a href=https://medium.com/@will.wang/%E6%92%A5%E9%96%8B-python-pip-site-packages-%E7%9A%84%E8%97%8D%E8%89%B2%E8%9C%98%E8%9B%9B%E7%B6%B2-90e398bb3785 rel=nofollow target=_blank>撥開 Python, pip, site-packages 的藍色蜘蛛網 💢</a></li> <li><a href=https://github.com/vinta/awesome-python rel=nofollow target=_blank>Awesome Python</a></li> <li><a href=https://www.jetbrains.com/pycharm/ rel=nofollow target=_blank>PyCharm</a></li> <li><a href=https://www.pythonanywhere.com/ rel=nofollow target=_blank>pythonanywhere</a></li> <li><a href=https://pipenv.readthedocs.io/en/latest/ rel=nofollow target=_blank>pipenv</a></li> <li><a href=https://github.com/onelivesleft/PrettyErrors rel=nofollow target=_blank>onelivesleft/PrettyErrors: Prettify Python exception output to make it legible.</a></li> <li><a href=https://iapyeh.readthedocs.io/en/latest/blogs/technical/docs_style_review_twisted.html rel=nofollow target=_blank>空行讓 Python 更簡潔</a></li> <li><a href=https://qiita.com/yinawekuky/items/28d973a653e9825ed582 rel=nofollow target=_blank>Python のコードをきれいに書くコツ</a></li> <li><a href=https://qiita.com/KeisukeKakuda/items/ef24baa58ed55967d666 rel=nofollow target=_blank>【まとめ】Python を高高速速で復習する</a></li> </ul> </article></div></main> <footer class=svelte-wjh32h><span><a href=https://creativecommons.org/licenses/by-sa/4.0/ rel="noreferrer noopener nofollow" target=_blank>CC BY-SA 4.0.</a></span></footer></div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,{post:{title:"Python",slug:"python",html:"\u003Ch2 id=\"為什麼-python-的-main-函式要寫成-if-__name__--__main__-？\"\u003E為什麼 Python 的 main 函式要寫成 \u003Ccode\u003Eif __name__ == &#39;__main__&#39;:\u003C\u002Fcode\u003E ？\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fqiita.com\u002Fsuiru_nakamura\u002Fitems\u002Fdca13669abdf29404f38\"\u003Epython の if __name__ == &#39;__main__&#39;:は何のためにあるのか。 - Qiita\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E若我們寫了一支沒有 \u003Ccode\u003Eif name == &#39;main&#39;\u003C\u002Fcode\u003E 的 Python 檔案\u003C\u002Fp\u003E\n\u003Cpre class=\"language-python\"\u003E\u003Ccode class=\"language-python\"\u003Edef main():\n  print (\"Hello\")\n\nmain()\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E使用 \u003Ccode\u003Epython hello.py\u003C\u002Fcode\u003E 執行仍然可以正常運作，但在其它檔案作為外部引入 \u003Ccode\u003Eimport hello\u003C\u002Fcode\u003E 的時候，也會顯示「Hello」\u003C\u002Fp\u003E\n\u003Cpre class=\"language-python\"\u003E\u003Ccode class=\"language-python\"\u003Eimport hello\n\u003E Hello\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E這是因為在 Python 中在引入檔案時，會先執行裡頭的內容，例如這支檔案就會執行 \u003Ccode\u003Emain() =&gt; print(&quot;hello&quot;)\u003C\u002Fcode\u003E 的處理\u003C\u002Fp\u003E\n\u003Cp\u003E所以為了在引入檔案時，不要做出意圖之外的程式行為，才會加上 \u003Ccode\u003Eif name == &#39;main&#39;\u003C\u002Fcode\u003E 的分歧敘文\u003C\u002Fp\u003E\n\u003Cpre class=\"language-python\"\u003E\u003Ccode class=\"language-python\"\u003Edef main():\n  print(\"Hello\")\n\nif __name__ == \"__main__\":\n  main()\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E如此 if 之內的部份在 import 時就不會執行了\u003C\u002Fp\u003E\n\u003Ch3 id=\"背後原因\"\u003E背後原因\u003C\u002Fh3\u003E\n\u003Cp\u003Ename 是 Python 中的特殊變數，會儲存 Python 的模組名稱，在 \u003Ccode\u003Eimport hello\u003C\u002Fcode\u003E 時，\u003Ccode\u003Ehello.py\u003C\u002Fcode\u003E 中的 name 就會被 Python 自動設定為 \u003Ccode\u003E&#39;hello&#39;\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E使用 \u003Ccode\u003Epython hello.py\u003C\u002Fcode\u003E 執行時，\u003Ccode\u003Ehello.py\u003C\u002Fcode\u003E 中的 name 就會是於 Python 直接執行檔案時所設定的 \u003Ccode\u003E&#39;main&#39;\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E所以 \u003Ccode\u003Eif name == &#39;main&#39;\u003C\u002Fcode\u003E 能夠判別「這支 \u003Ccode\u003Ehello.py\u003C\u002Fcode\u003E 檔案是以 \u003Ccode\u003Epython hello.py\u003C\u002Fcode\u003E 所直接執行的（＝不是經由 import 造成的舉動）」\u003C\u002Fp\u003E\n\u003Ch2 id=\"asyncio\"\u003EAsyncio\u003C\u002Fh2\u003E\n\u003Cpre class=\"language-py\"\u003E\u003Ccode class=\"language-py\"\u003Eimport asyncio\n\nasync def main():\n  print('Hello...)\n  await asyncio.sleep(1)\n  print('...World!')\n\nasyncio.run(main())\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch2 id=\"python-調用-c-dll\"\u003EPython 調用 C++ dll\u003C\u002Fh2\u003E\n\u003Ch2 id=\"streamlit\"\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fwww.streamlit.io\u002F\"\u003EStreamlit\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\n\u003Ch2 id=\"使用-pyinstaller-封裝-python-程式\"\u003E使用 Pyinstaller 封裝 Python 程式\u003C\u002Fh2\u003E\n\u003Ch3 id=\"安裝\"\u003E安裝\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Ccode\u003Epip install pyinstaller\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Ch3 id=\"封裝\"\u003E封裝\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003Epyinstaller\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Epyi-makespec\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E封裝成一個資料夾：\u003Ccode\u003Epyinstaller my-script.py\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E封裝成一個檔案：\u003Ccode\u003Epyinstaller --onefile my-script.py\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E執行程式位於 \u003Ccode\u003Edist\u003C\u002Fcode\u003E 資料夾裡\u003C\u002Fp\u003E\n\u003Ch2 id=\"資源\"\u003E資源\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fopenhome.cc\u002FGossip\u002FPython\u002F\"\u003EPython Gossip\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fqiita.com\u002FSaku731\u002Fitems\u002F52a3bbacd002f26f408e\"\u003EPython でゼロからでもサービス開発・公開できる学習ロードマップ\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fmedium.com\u002F@will.wang\u002F%E6%92%A5%E9%96%8B-python-pip-site-packages-%E7%9A%84%E8%97%8D%E8%89%B2%E8%9C%98%E8%9B%9B%E7%B6%B2-90e398bb3785\"\u003E撥開 Python, pip, site-packages 的藍色蜘蛛網 💢\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fgithub.com\u002Fvinta\u002Fawesome-python\"\u003EAwesome Python\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fwww.jetbrains.com\u002Fpycharm\u002F\"\u003EPyCharm\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fwww.pythonanywhere.com\u002F\"\u003Epythonanywhere\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fpipenv.readthedocs.io\u002Fen\u002Flatest\u002F\"\u003Epipenv\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fgithub.com\u002Fonelivesleft\u002FPrettyErrors\"\u003Eonelivesleft\u002FPrettyErrors: Prettify Python exception output to make it legible.\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fiapyeh.readthedocs.io\u002Fen\u002Flatest\u002Fblogs\u002Ftechnical\u002Fdocs_style_review_twisted.html\"\u003E空行讓 Python 更簡潔\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fqiita.com\u002Fyinawekuky\u002Fitems\u002F28d973a653e9825ed582\"\u003EPython のコードをきれいに書くコツ\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fqiita.com\u002FKeisukeKakuda\u002Fitems\u002Fef24baa58ed55967d666\"\u003E【まとめ】Python を高高速速で復習する\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n",date:"2020-02-12T05:23:37.000Z",printDate:"February 12, 2020",printReadingTime:"2 min read"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.967904a9.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main","/client/client.967904a9.js")}document.head.appendChild(s)</script> 