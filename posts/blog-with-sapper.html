<!DOCTYPE html>
<html lang="zh-Hant-TW">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />

    <link
      rel="preload"
      href="../fonts/fusion-pixel.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link rel="preload prefetch" href="../global.css" as="style" />
    <link rel="stylesheet" href="../global.css" />
    <!-- <link rel="manifest" href="../manifest.json" /> -->
    <link rel="icon" type="image/png" href="../favicon.ico" />

    <!-- This contains the contents of the <svelte:head> component, if
	     the current page has one -->
    <meta http-equiv="content-security-policy" content=""><script async src="https://www.googletagmanager.com/gtag/js?id=G-CRDP7WTXSQ" data-svelte="svelte-bhtlqr"></script><link rel="shortcut icon" href="/favicon.ico" data-svelte="svelte-1c8ynol"><link rel="bookmark" href="/favicon.ico" data-svelte="svelte-1c8ynol">
	<link rel="stylesheet" href="/_app/assets/pages/__layout.svelte-193c0755.css">
	<link rel="stylesheet" href="/_app/assets/Favicon-812adafd.css">
	<link rel="stylesheet" href="/_app/assets/_post-b23eb12b.css">
	<link rel="stylesheet" href="/_app/assets/BlinkAnchor-39834c8c.css">
	<link rel="modulepreload" href="/_app/start-de248522.js">
	<link rel="modulepreload" href="/_app/chunks/index-8418cccc.js">
	<link rel="modulepreload" href="/_app/chunks/index-17c965c3.js">
	<link rel="modulepreload" href="/_app/chunks/paths-396f020f.js">
	<link rel="modulepreload" href="/_app/chunks/preload-helper-e4860ae8.js">
	<link rel="modulepreload" href="/_app/pages/__layout.svelte-3f90562d.js">
	<link rel="modulepreload" href="/_app/chunks/Favicon-9eaf442d.js">
	<link rel="modulepreload" href="/_app/chunks/store-aaa8e5d0.js">
	<link rel="modulepreload" href="/_app/pages/posts/blog-with-sapper.md-f78df824.js">
	<link rel="modulepreload" href="/_app/chunks/_post-24fe7d33.js">
	<link rel="modulepreload" href="/_app/chunks/BlinkAnchor-aec4dee8.js">
  </head>
  <body>
    <!-- The application will be rendered inside this element,
	     because `app/client.js` references it -->
    








<div class="layout svelte-1avnl50" style=""><div class="loader-container svelte-1avnl50"><div class="loader svelte-v56dyc"><span class="loader-text loader-step1 svelte-v56dyc">/</span>
  <span class="loader-text loader-step1 svelte-v56dyc">-</span>
  <span class="loader-text loader-step1 svelte-v56dyc">\</span>
  <span class="loader-text loader-step1 svelte-v56dyc">|</span>
</div></div></div>

<div class="layout svelte-1avnl50" style="display: none;">
  
  <header class="svelte-ka06mn"><div class="header-container svelte-ka06mn"><div class="row svelte-ka06mn"><nav class="svelte-t90z2a"><a class=" svelte-t90z2a" href="/">ãƒˆãƒªã‚³ã˜ã‹ã‘ã®æ˜ã‘æš®ã‚Œ
  </a>
  <a class=" svelte-t90z2a" href="/about">about
  </a>
  <a class=" svelte-t90z2a" href="/rss.xml" target="_blank">rss
  </a>
  <a style="display: none;" href="/sitemap.xml" target="_blank" class="svelte-t90z2a">sitemap
  </a>
</nav>
      <a href="https://www.youtube.com/watch?v=e9DfSCk-6Ko" target="_blank" rel="noreferrer noopener" class="svelte-145ut21"><img src="data:image/gif;base64,AAABAAEAEBAQAAAAAAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAABbl4Awr28AAAAAAC4pp4ACgUAAFomhAB4aGEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIiIiIiQiQiIkREREREJCIiQRERERESIiJBEhEREREiIkFCQRFRESIiQRIRERFRIiJBEREREREiIkE2ZmZmESQiQWYAAAZhJCJBZgAABmEkIkFmAAAGYSQiQWYAAAZhRCJBZgAABmFEIkE2ZmZmMUQiQRERERERRCJERERERERCLABwAAgAMAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAwAA" alt="logo" class="svelte-145ut21">
</a></div>
    </div>
</header>

  <main class="svelte-1avnl50"><header class="svelte-1y1bvug"><h1 class="title svelte-1y1bvug"><span style="animation-delay: 125ms; " class="svelte-1y1bvug">B
      </span><span style="animation-delay: 150ms; " class="svelte-1y1bvug">l
      </span><span style="animation-delay: 175ms; " class="svelte-1y1bvug">o
      </span><span style="animation-delay: 200ms; " class="svelte-1y1bvug">g
      </span><span style="animation-delay: 225ms; width: .25em;" class="svelte-1y1bvug"> 
      </span><span style="animation-delay: 250ms; " class="svelte-1y1bvug">w
      </span><span style="animation-delay: 275ms; " class="svelte-1y1bvug">i
      </span><span style="animation-delay: 300ms; " class="svelte-1y1bvug">t
      </span><span style="animation-delay: 325ms; " class="svelte-1y1bvug">h
      </span><span style="animation-delay: 350ms; width: .25em;" class="svelte-1y1bvug"> 
      </span><span style="animation-delay: 375ms; " class="svelte-1y1bvug">S
      </span><span style="animation-delay: 400ms; " class="svelte-1y1bvug">a
      </span><span style="animation-delay: 425ms; " class="svelte-1y1bvug">p
      </span><span style="animation-delay: 450ms; " class="svelte-1y1bvug">p
      </span><span style="animation-delay: 475ms; " class="svelte-1y1bvug">e
      </span><span style="animation-delay: 500ms; " class="svelte-1y1bvug">r
      </span></h1>
  <p class="meta svelte-1y1bvug"><span class="date svelte-1y1bvug">Jan 1, 2022</span>
    <div class="tags svelte-1y1bvug"><span class="tag svelte-1y1bvug">F2E</span></div></p></header>
<div class="post--container svelte-1y1bvug"><article class="post--content svelte-1y1bvug"><h2 id="js-id-å‰è¨€">å‰è¨€</h2>
<p>ä¹‹å‰é™¸çºŒè©¦äº†å¹¾å€‹èƒ½æ­é… Markdown ç”¢ç”Ÿç¶²é çš„ libraryï¼Œåƒæ˜¯ <a href="https://hexo.io/zh-tw/" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://hexo.io/zh-tw/" alt="Hexo"><span>Hexo</span></a> æˆ– <a href="https://gridsome.org/" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://gridsome.org/" alt="Gridsome"><span>Gridsome</span></a>ï¼Œä½†å°æ–¼å…§å®¹å¹¾ä¹åªæ˜¯çµ¦è‡ªå·±çœ‹çš„é›œè¨˜ä¾†èªªï¼Œç”¨ä¾†ç¸½æœ‰ç¨®æ®ºé›ç”¨ç‰›åˆ€çš„æ„Ÿè¦ºï¼Œæ­£å¥½æœ‰äº›è¨±é—œæ³¨çš„ Svelte åœ¨ 2020 å¹´èˆˆèµ·ç†±æ½®ï¼Œå°±è¶æ©Ÿæ›æˆäº† <a href="https://github.com/Charca/sapper-blog-template" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://github.com/Charca/sapper-blog-template" alt="Sapper çš„ blog template"><span>Sapper çš„ blog template</span></a> ä¾†è©¦è©¦ä½¿ç”¨æ•ˆæœå¦‚ä½•ã€‚</p>
<p>ï¼ˆè¿½è¨˜ï¼šåŸæœ¬æ˜¯å…ˆçœ‹åˆ° <a href="https://github.com/roxiness/routify-starter" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://github.com/roxiness/routify-starter" alt="Routify çš„ blog template"><span>Routify çš„ blog template</span></a> è¦ºå¾—å¾ˆä¸éŒ¯ï¼Œä½† Routify éœ€è¦ç”¨åˆ°æª”æ¡ˆè·¯å¾‘åš SPAï¼Œæ²’è¾¦æ³• host åœ¨ GitHub Pages ä¸Šï¼Œæœ€å¾Œæ”¹ç”¨äº†ä»¥ <a href="https://sapper.svelte.dev/docs" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://sapper.svelte.dev/docs" alt="Sapper"><span>Sapper</span></a> å»ºæ§‹çš„ blog templateã€‚ï¼‰</p>
<hr>
<h2 id="js-id-sapper-blog-template">Sapper Blog Template</h2>
<h3>å®‰è£</h3>
<pre class="language-bash"><!-- HTML_TAG_START --><code class="language-bash">npx degit Charca/sapper-blog-template your-blog-name
<span class="token builtin class-name">cd</span> your-blog-name
<span class="token function">npm</span> <span class="token function">install</span> <span class="token comment"># or yarn!</span>
<span class="token function">npm</span> run dev</code><!-- HTML_TAG_END --></pre>
<ul><li><code>npx</code> æ˜¯ npm åœ¨ v5.2.0 ä¹‹å¾Œå…§å»ºçš„æŒ‡ä»¤ï¼Œæä¾›æš«æ™‚æ€§åŸ·è¡ŒæŸå€‹ npm å¥—ä»¶çš„åŠŸèƒ½</li>
<li><code>degit</code> æ˜¯ä¸€å¥—èƒ½ä¾›ä½¿ç”¨è€…ç›´æ¥å–ç”¨ç¾å­˜ project æ¨£æ¿çš„å¥—ä»¶<ul><li>ä¹Ÿå¯ç”¨ <code>npm i -g degit</code> å®‰è£å¾Œç›´æ¥å‘¼å« <code>degit</code></li></ul></li></ul>
<h3>Whatâ€™s inside it?</h3>
<ul><li><a href="https://svelte.dev/" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://svelte.dev/" alt="Svelte"><span>Svelte</span></a><ul><li>ä¸€å¥—ç§‰æŒã€ŒWrite less codeã€çš„ç²¾ç¥ï¼Œç‚ºäº†å»ºæ§‹ UI è€Œç”Ÿçš„ JavaScript ç·¨è­¯å™¨</li>
<li>ä¸æ¡ç”¨ Virtual DOM diffï¼Œä½¿ç”¨åŸç”Ÿ JS ç›´æ¥ä¿®æ”¹ DOMï¼Œæ“æœ‰ç›¸å°å„ªç§€çš„åŸ·è¡Œé€Ÿåº¦èˆ‡æª”æ¡ˆå¤§å°è¡¨ç¾</li></ul></li>
<li><a href="https://sapper.svelte.dev/" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://sapper.svelte.dev/" alt="Sapper"><span>Sapper</span></a><ul><li>å®šä½é¡ä¼¼æ–¼ React çš„ Next.jsã€Vue çš„ Nuxt.js çš„ framework å·¥å…·</li>
<li>åŸºæ–¼ Svelte è™•ç†èˆ‡è£œè¶³äº†å¦‚ SSRã€SPAã€SSG ç­‰æ‡‰ç”¨è£½ä½œçš„éœ€æ±‚</li></ul></li></ul>
<h3>How does it work?</h3>
<p>template ä¸­çš„é é¢ç›¸é—œæª”æ¡ˆä½æ–¼ <code>src/routes/blog</code>ï¼Œä¸»è¦åŠŸèƒ½ç”±ä»¥ä¸‹ä¸‰å€‹æª”æ¡ˆå¯¦ä½œï¼š</p>
<ul><li><code>_posts.js</code>ï¼šè®€å–å’Œ parse markdown æª”æ¡ˆçš„ module</li>
<li><code>[slug].svelte</code>ï¼šæ–‡ç« é é¢çš„ template</li>
<li><code>index.svelte</code>ï¼šæ–‡ç« åˆ—è¡¨çš„ template</li></ul>
<p>æ–‡ç« æª”æ¡ˆå‰‡æ”¾ç½®æ–¼ <code>src/routes/blog/posts</code> è³‡æ–™å¤¾ä¸­ï¼Œæª”æ¡ˆåç¨±æœƒ parse æˆç‚ºç¶²é è·¯å¾‘ï¼Œæ’°å¯«æ–¼æ–‡ç« é–‹é ­åˆ° <code>&lt;!-- more --&gt;</code> ä¹‹é–“çš„å…§å®¹æœƒæˆç‚ºé è¦½éƒ¨ä»½ï¼Œæ¨™é¡Œå’Œæ—¥æœŸè¨˜è¼‰åœ¨æª”æ¡ˆå…§çš„ yaml å€åŸŸå…§</p>
<p>é€™é‚Šæˆ‘æ”¹å¯«äº† <code>src/utils/markdown.js</code> è£¡è¦ä¸Ÿåˆ°ç¤¾ç¾¤é è¦½çš„éƒ¨ä»½ï¼š</p>
<pre class="language-javascript"><!-- HTML_TAG_START --><code class="language-javascript"><span class="token comment">// gray-matter ç”¨æ–¼ parse yaml å€åŸŸéƒ¨ä»½çš„å…§å®¹</span>
<span class="token keyword">const</span> matter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"gray-matter"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
<span class="token comment">// é¦–å€‹å€å¡Šç‚º yaml è³‡è¨Šå€ï¼Œå…¶é¤˜éƒ¨ä»½ç‚ºæ–‡ç« å…§å®¹</span>
<span class="token keyword">const</span> <span class="token punctuation">&#123;</span> data<span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> rawContent <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">matter</span><span class="token punctuation">(</span>md<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
<span class="token comment">// åˆ¤æ–·ã€Œé–±è®€æ›´å¤šã€å€åŸŸæ˜¯å¦å­˜åœ¨ï¼Œè‹¥å­˜åœ¨å‰‡å–å¾—ä½æ–¼å…¶ä¸Šæ–¹çš„å…§å®¹</span>
<span class="token comment">// ä¸¦å­˜å…¥é è¦½å…§å®¹éƒ¨ä»½</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>rawContent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token constant">EXCERPT_SEPARATOR</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> splittedContent <span class="token operator">=</span> rawContent<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token constant">EXCERPT_SEPARATOR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  excerpt <span class="token operator">=</span> splittedContent<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  content <span class="token operator">=</span> splittedContent<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// æ–°å¢ä¸å­˜åœ¨æ™‚ï¼Œæ”¹ç‚ºå–å¾— yaml è£¡ summary æ¨™ç±¤çš„å…§å®¹</span>
  excerpt <span class="token operator">=</span> data<span class="token punctuation">.</span>summary<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">// ...</span></code><!-- HTML_TAG_END --></pre>
<h3>æ›´æ–°ç‰ˆæœ¬</h3>
<p>å¦‚æœä½ ç”¨ <code>npm run update</code> å‡ç´šäº†ç›¸ä¾å¥—ä»¶ï¼Œå¯èƒ½æœƒè·³å‡ºèˆ‡ <code>rollup-plugin-svelte</code> ç›¸é—œçš„ç·¨è­¯éŒ¯èª¤ï¼Œç¶²é ä¹Ÿæœƒå‡ºç¾éŒ¯èª¤ï¼Œé€™æ˜¯å› ç‚ºç›¸é—œè¨˜è¿°æ–¹å¼æœ‰ä¿®æ”¹çš„é—œä¿‚ï¼š</p>
<ul><li><a href="https://github.com/sveltejs/rollup-plugin-svelte" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://github.com/sveltejs/rollup-plugin-svelte" alt="sveltejs/rollup-plugin-svelte"><span>sveltejs/rollup-plugin-svelte</span></a></li></ul>
<pre class="language-diff"><!-- HTML_TAG_START --><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> client: &#123;
</span><span class="token prefix unchanged"> </span><span class="token line">   // ...
</span><span class="token prefix unchanged"> </span><span class="token line">   plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">     // ...
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">       svelte(&#123;
</span><span class="token prefix deleted">-</span><span class="token line">        dev,
</span><span class="token prefix deleted">-</span><span class="token line">        hydratable: true,
</span><span class="token prefix deleted">-</span><span class="token line">        emitCss: true,
</span><span class="token prefix deleted">-</span><span class="token line">      &#125;),
</span><span class="token prefix deleted">-</span><span class="token line">      resolve(),
</span></span>
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      svelte(&#123;
</span><span class="token prefix inserted">+</span><span class="token line">        emitCss: true,
</span><span class="token prefix inserted">+</span><span class="token line">        compilerOptions: &#123;
</span><span class="token prefix inserted">+</span><span class="token line">          hydratable: true,
</span><span class="token prefix inserted">+</span><span class="token line">        &#125;,
</span><span class="token prefix inserted">+</span><span class="token line">      &#125;),
</span><span class="token prefix inserted">+</span><span class="token line">      resolve(&#123; browser: true &#125;),
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line">   // ...
</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> server: &#123;
</span><span class="token prefix unchanged"> </span><span class="token line">   // ...
</span><span class="token prefix unchanged"> </span><span class="token line">   plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">     // ...
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">       svelte(&#123;
</span><span class="token prefix deleted">-</span><span class="token line">         generate: 'ssr',
</span><span class="token prefix deleted">-</span><span class="token line">         dev,
</span><span class="token prefix deleted">-</span><span class="token line">       &#125;),
</span><span class="token prefix deleted">-</span><span class="token line">       resolve(),
</span></span>
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       svelte(&#123;
</span><span class="token prefix inserted">+</span><span class="token line">         compilerOptions: &#123;
</span><span class="token prefix inserted">+</span><span class="token line">           generate: 'ssr',
</span><span class="token prefix inserted">+</span><span class="token line">         &#125;,
</span><span class="token prefix inserted">+</span><span class="token line">       &#125;),
</span><span class="token prefix inserted">+</span><span class="token line">       resolve(&#123; browser: true &#125;),
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line">   // ...
</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span></code><!-- HTML_TAG_END --></pre>
<h3>Circular Dependencies</h3>
<p>é‹è¡Œæ™‚æœƒå‡ºç¾çš„ circular dependecies è­¦å‘Šï¼Œå¯ä»¥é€éä¿®æ”¹ <code>rollup.config.js</code> è£¡çš„åµæ¸¬éƒ¨ä»½è§£æ±ºï¼š</p>
<ul><li><a href="https://github.com/sveltejs/sapper-template/pull/246/files" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://github.com/sveltejs/sapper-template/pull/246/files" alt="Silence preload export warnings related to TypeScript support"><span>Silence preload export warnings related to TypeScript support</span></a></li></ul>
<pre class="language-diff"><!-- HTML_TAG_START --><code class="language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> const onwarn = (warning, onwarn) =>
</span><span class="token prefix deleted">-</span><span class="token line">   (warning.code === 'CIRCULAR_DEPENDENCY' &amp;&amp;
</span><span class="token prefix deleted">-</span><span class="token line">     warning.message.includes('/@sapper/')) ||
</span><span class="token prefix deleted">-</span><span class="token line">   onwarn(warning)
</span></span>
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> const onwarn = (warning, onwarn) =>
</span><span class="token prefix inserted">+</span><span class="token line"> 	(warning.code === 'MISSING_EXPORT' &amp;&amp; /'preload'/.test(warning.message)) ||
</span><span class="token prefix inserted">+</span><span class="token line"> 	(warning.code === 'CIRCULAR_DEPENDENCY' &amp;&amp; /[/\]@sapper[/\]/.test(warning.message)) ||
</span><span class="token prefix inserted">+</span><span class="token line"> 	onwarn(warning);</span></span></code><!-- HTML_TAG_END --></pre>
<h3>Deploy</h3>
<ul><li><a href="https://github.com/marketplace/actions/deploy-to-github-pages" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://github.com/marketplace/actions/deploy-to-github-pages" alt="Deploy to GitHub Pages"><span>Deploy to GitHub Pages</span></a></li></ul>
<p>è®“ GitHub Actions åœ¨åŸå§‹ç¢¼ push ä¸Šå»ä¹‹å¾Œï¼Œå»è·‘ build å’Œ deploy åˆ° <code>gh-pages</code> branchï¼Œä¸¦å°‡ <code>github.io</code> çš„é¡¯ç¤ºä¾†æºæ”¹æˆ <code>gh-pages</code> branch</p>
<p>èˆ‡éå¾€ç¶“é©—æ¯”è¼ƒä¸åŒçš„æ˜¯ï¼Œ<code>npm run build</code> ç”Ÿç”¢å‡ºä¾†çš„ç¶²é ä»ç„¶å’Œ Routify ä¸€æ¨£éœ€è¦å¾Œç«¯ä¼ºæœå™¨ï¼Œè¦æ”¹ç”¨ <code>npm run export</code> è®“ Sapper è‡ªå·±çˆ¬ä¸€éæ•´å€‹ç¶²ç«™ï¼Œæ‰€ç”¢ç”Ÿå‡ºä¾†çš„éœæ…‹é é¢æ‰èƒ½ host åˆ° GitHub Pages ä¸Š</p>
<h4>GitHub Actions</h4>
<ol><li>åœ¨å°ˆæ¡ˆè³‡æ–™å¤¾æ ¹ç›®éŒ„åº•ä¸‹æ–°å¢ä¸€å€‹ <code>.github</code> è³‡æ–™å¤¾</li>
<li>åœ¨è£¡é ­æ–°å¢ä¸€å€‹ <code>workflows</code> è³‡æ–™å¤¾</li>
<li>åœ¨è£¡é ­æ–°å¢ä¸€å€‹ <code>deploy-to-github-pages.yaml</code> æª”æ¡ˆ</li>
<li>è²¼ä¸Šä»¥ä¸‹æˆªå–èˆ‡ä¿®æ”¹è‡ªä¸Šæ–¹é€£çµçš„å…§å®¹</li>
<li>æª”æ¡ˆ push åˆ° GitHub å¾Œï¼Œå°±æœƒé€é GitHub Actions<br>
æŠŠ build å®Œç•¢çš„æª”æ¡ˆè‡ªå‹• branch åˆ° <code>gh-pages</code> åˆ†æ”¯</li></ol>
<pre class="language-yml"><!-- HTML_TAG_START --><code class="language-yml"><span class="token key atrule">name</span><span class="token punctuation">:</span> Build and Deploy
<span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>push<span class="token punctuation">]</span>
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build-and-deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout ğŸ›ï¸
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2.3.1 <span class="token comment"># If you're using actions/checkout@v2 you must set persist-credentials to false in most cases for the deployment to work correctly.</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">persist-credentials</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install and Build ğŸ”§ <span class="token comment"># This example project is built using npm and outputs the result to the 'build' folder. Replace with the commands required to build your project, or remove this step entirely if your site is pre-built.</span>
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          npm install
          npm run export</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy ğŸš€
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@3.7.1
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">GITHUB_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> secrets.GITHUB_TOKEN <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
          <span class="token key atrule">BRANCH</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages <span class="token comment"># The branch the action should deploy to.</span>
          <span class="token key atrule">FOLDER</span><span class="token punctuation">:</span> __sapper__/export <span class="token comment"># The folder the action should deploy.</span>
          <span class="token key atrule">CLEAN</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># Automatically remove deleted files from the deploy branch</span></code><!-- HTML_TAG_END --></pre>
<h2 id="js-id-è¿½åŠ åŠŸèƒ½">è¿½åŠ åŠŸèƒ½</h2>
<h3>åŠ å…¥ Google Analytics</h3>
<ul><li><a href="https://analytics.google.com/analytics/web/" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://analytics.google.com/analytics/web/" alt="Google Analytics"><span>Google Analytics</span></a></li>
<li><a href="https://www.npmjs.com/package/sapper-google-analytics" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://www.npmjs.com/package/sapper-google-analytics" alt="sapper-google-analytics"><span>sapper-google-analytics</span></a></li></ul>
<ol><li>ç”³è«‹ GA å¸³æˆ¶ï¼Œé»æ“Šå·¦ä¸‹è§’çš„ <code>Admin</code> é–‹å•Ÿæ§åˆ¶é¢æ¿</li>
<li>é»æ“Š <code>Create Property</code> å»ºç«‹è³‡æºï¼Œè¼¸å…¥åç¨±èˆ‡é¸æ“‡æ™‚å€</li>
<li>é»æ“Šä¸‹æ–¹çš„ <code>Show advanced options</code><br>
å•Ÿç”¨ <code>Create a Universal Analytics property</code> é¸é …</li>
<li>è³‡æºå»ºç«‹å®Œæˆå¾Œï¼Œé»æ“Š <code>Tracking Info</code> åº•ä¸‹çš„ <code>Tracking Code</code><br>
è¤‡è£½è£¡é ­çš„ <code>Tracking ID</code></li>
<li><code>npm i sapper-google-analytics</code></li>
<li>ç·¨è¼¯ <code>src/routes/_layout.svelte</code> åŠ ä¸Šä¸‹æ–¹ç¨‹å¼ç¢¼</li>
<li>å®Œæˆå¾Œå¯ä»¥åˆ° <code>Tracking Info</code> è£¡çš„ <code>Tracking Code</code><br>é»é¸ `Send test traffic` æ¸¬è©¦æ˜¯å¦æ–°å¢æˆåŠŸ</li></ol>
<pre class="language-html"><!-- HTML_TAG_START --><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span>
  import GoogleAnalytics from "sapper-google-analytics/GoogleAnalytics.svelte";
  import &#123; stores &#125; from "@sapper/app";

  // å‰›æ‰è¤‡è£½çš„ Tracking ID
  let ga_measurement_id = "UA-SOMETHING";
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>GoogleAnalytics</span> <span class="token attr-name">&#123;stores&#125;</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;ga_measurement_id&#125;<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code><!-- HTML_TAG_END --></pre>
<h3>RSS</h3>
<ol><li>åœ¨ <code>src/routes/</code> åº•ä¸‹å»ºç«‹ä¸€å€‹ <code>rss.xml.js</code>ï¼š<br>
ï¼ˆæª”æ¡ˆå…§çš„ <code>title</code>ã€<code>description</code> ç­‰å…§å®¹è«‹è‡ªè¡Œä¿®æ”¹ï¼‰</li></ol>
<pre class="language-javascript"><!-- HTML_TAG_START --><code class="language-javascript"><span class="token keyword">import</span> posts <span class="token keyword">from</span> <span class="token string">"./_posts.js"</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> siteUrl <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">toRFC3339</span><span class="token punctuation">(</span><span class="token parameter">date</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">function</span> <span class="token function">pad</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> n <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">"0"</span> <span class="token operator">+</span> n <span class="token operator">:</span> n<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">function</span> <span class="token function">timezoneOffset</span><span class="token punctuation">(</span><span class="token parameter">offset</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> sign<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>offset <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> <span class="token string">"Z"</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    sign <span class="token operator">=</span> offset <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">"_"</span> <span class="token operator">:</span> <span class="token string">"+"</span><span class="token punctuation">;</span>
    offset <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>offset<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> sign <span class="token operator">+</span> <span class="token function">pad</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>offset <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> <span class="token function">pad</span><span class="token punctuation">(</span>offset <span class="token operator">%</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
    <span class="token string">"-"</span> <span class="token operator">+</span>
    <span class="token function">pad</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span>
    <span class="token string">"-"</span> <span class="token operator">+</span>
    <span class="token function">pad</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
    <span class="token string">"T"</span> <span class="token operator">+</span>
    <span class="token function">pad</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
    <span class="token string">":"</span> <span class="token operator">+</span>
    <span class="token function">pad</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
    <span class="token string">":"</span> <span class="token operator">+</span>
    <span class="token function">pad</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
    <span class="token function">timezoneOffset</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getTimezoneOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> <span class="token function-variable function">renderXmlRssFeed</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">posts</span><span class="token punctuation">)</span> <span class="token operator">=></span>
  <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">&lt;?xml version="1.0" encoding="utf-8" ?>
  &lt;rss version="2.0">
    &lt;channel>
      &lt;title>Title Here&lt;/title>
      &lt;link href="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>siteUrl<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">"/>
      &lt;description>Description Here&lt;/description>
      &lt;lastBuildDate></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token function">toRFC3339</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/lastBuildDate>
      &lt;managingEditor>example@example.com&lt;/managingEditor>

      </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>posts
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
          <span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">
        &lt;item>
          &lt;title></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>post<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/title>
          &lt;link></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>siteUrl<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/blog/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>post<span class="token punctuation">.</span>slug<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/link>
          &lt;pubDate></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token function">toRFC3339</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/pubDate>
          &lt;description>
              </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>post<span class="token punctuation">.</span>excerpt<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">
          &lt;/description>
        &lt;/item>
      </span><span class="token template-punctuation string">&#96;</span></span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"&#92;n"</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">
    &lt;/channel>
  &lt;/rss></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
    <span class="token string-property property">"Cache-Control"</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">max-age=0, s-max-age=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token number">600</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">,</span> <span class="token comment">// 10 minutes</span>
    <span class="token string-property property">"Content-Type"</span><span class="token operator">:</span> <span class="token string">"application/rss+xml"</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> feed <span class="token operator">=</span> <span class="token function">renderXmlRssFeed</span><span class="token punctuation">(</span>posts<span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>feed<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre>
<ol start="2"><li>åœ¨ Navbar åŠ ä¸Š RSS é€£çµï¼š<code>&lt;a class={segment === &#39;rss&#39; ? &#39;selected&#39; : &#39;&#39;} href=&quot;rss.xml&quot;&gt;rss&lt;/a&gt;</code></li></ol>
<ul><li><a href="https://sapper-goals.netlify.app/goals/easy-rss-and-sitemap/" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://sapper-goals.netlify.app/goals/easy-rss-and-sitemap/" alt="Easy RSS Feed & Sitemap âœ…"><span>Easy RSS Feed &amp; Sitemap âœ…</span></a></li>
<li><a href="https://lacourt.dev/2019/06/29" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://lacourt.dev/2019/06/29" alt="2019/06/29 - migrating to Sapper part 3 - RSS feed"><span>2019/06/29 - migrating to Sapper part 3 - RSS feed</span></a></li>
<li><a href="https://cleverdev.codes/blog/rss-atom-and-site-map-for-svelte-sapper-blog-part-3/" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://cleverdev.codes/blog/rss-atom-and-site-map-for-svelte-sapper-blog-part-3/" alt="RSS/Atom and Site Map for Svelte/Sapper Blog"><span>RSS/Atom and Site Map for Svelte/Sapper Blog</span></a></li></ul>
<h3>Sitemap</h3>
<ul><li>åœ¨ <code>src/routes/</code> åº•ä¸‹å»ºç«‹ä¸€å€‹ <code>sitemap.xml.js</code>ï¼š<br>
ï¼ˆæª”æ¡ˆå…§çš„ <code>siteUrl</code> ç­‰å…§å®¹è«‹è‡ªè¡Œä¿®æ”¹ï¼‰</li></ul>
<pre class="language-javascript"><!-- HTML_TAG_START --><code class="language-javascript"><span class="token keyword">import</span> posts <span class="token keyword">from</span> <span class="token string">"./_posts.js"</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> siteUrl <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"fs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> pages <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">""</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span><span class="token string">"./src/routes"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  file <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    file<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">"_"</span> <span class="token operator">&amp;&amp;</span>
    file <span class="token operator">!==</span> <span class="token string">"sitemap"</span> <span class="token operator">&amp;&amp;</span>
    file <span class="token operator">!==</span> <span class="token string">"index"</span> <span class="token operator">&amp;&amp;</span>
    file <span class="token operator">!==</span> <span class="token string">"[slug]"</span>
  <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    pages<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">pages<span class="token punctuation">,</span> posts</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">&lt;?xml version="1.0" encoding="UTF-8" ?>
&lt;urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>pages
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">
    &lt;url>
      &lt;loc></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>siteUrl<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>page<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/loc>
      &lt;lastmod></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/lastmod>
      &lt;priority>1.00&lt;/priority>
    &lt;/url>
  </span><span class="token template-punctuation string">&#96;</span></span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"&#92;n"</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>posts
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">
    &lt;url>
      &lt;loc></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>siteUrl<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/blog/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>post<span class="token punctuation">.</span>slug<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/loc>
      &lt;lastmod></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>printDate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>
        <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token operator">-</span><span class="token number">1</span>
      <span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/lastmod>
      &lt;priority>0.80&lt;/priority>
    &lt;/url>
  </span><span class="token template-punctuation string">&#96;</span></span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"&#92;n"</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">
&lt;/urlset>
</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Cache-Control"</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">max-age=0, s-max-age=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token number">600</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10 minutes</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">,</span> <span class="token string">"application/rss+xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> sitemap <span class="token operator">=</span> <span class="token function">render</span><span class="token punctuation">(</span>pages<span class="token punctuation">,</span> posts<span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>sitemap<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre>
<ul><li>ç‚ºäº† export æ™‚ <code>sitemap.xml</code> ä¹Ÿè¦æ¸²æŸ“<br>
ä¿®æ”¹ <code>index.svelte</code> è£¡çš„ <code>preload</code> function</li></ul>
<pre class="language-diff"><!-- HTML_TAG_START --><code class="language-diff"><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script context="module">
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   export function preload(&#123; params, query &#125;) &#123;
</span><span class="token prefix deleted">-</span><span class="token line">     return this.fetch(&#96;index.json&#96;)
</span><span class="token prefix deleted">-</span><span class="token line">       .then((r) => r.json())
</span><span class="token prefix deleted">-</span><span class="token line">       .then((posts) => &#123;
</span><span class="token prefix deleted">-</span><span class="token line">         return &#123; posts &#125;;
</span><span class="token prefix deleted">-</span><span class="token line">       &#125;);
</span><span class="token prefix deleted">-</span><span class="token line">   &#125;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script>
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script context="module">
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   export async function preload(&#123; params, query &#125;) &#123;
</span><span class="token prefix inserted">+</span><span class="token line">     const posts = await this.fetch(&#96;index.json&#96;)
</span><span class="token prefix inserted">+</span><span class="token line">       .then((r) => r.json())
</span><span class="token prefix inserted">+</span><span class="token line">       .then((posts) => &#123;
</span><span class="token prefix inserted">+</span><span class="token line">         return posts;
</span><span class="token prefix inserted">+</span><span class="token line">       &#125;);
</span><span class="token prefix inserted">+</span><span class="token line">     const sitemap = await this.fetch("sitemap.xml");
</span><span class="token prefix inserted">+</span><span class="token line">     return &#123; posts &#125;;
</span><span class="token prefix inserted">+</span><span class="token line">   &#125;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script></span></span></code><!-- HTML_TAG_END --></pre>
<ul><li><a href="https://dev.to/zechtyounes/how-to-render-your-sitemap-xml-file-in-your-svelte-sapper-blog-2joh" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://dev.to/zechtyounes/how-to-render-your-sitemap-xml-file-in-your-svelte-sapper-blog-2joh" alt="How to render your sitemap.xml file in your Svelte/Sapper blog - DEV Community"><span>How to render your sitemap.xml file in your Svelte/Sapper blog - DEV Community</span></a></li>
<li><a href="https://dev.to/kevinconti/how-to-create-a-sapper-svelte-sitemap-3490" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://dev.to/kevinconti/how-to-create-a-sapper-svelte-sitemap-3490" alt="How to create a Sapper / Svelte Sitemap - DEV Community"><span>How to create a Sapper / Svelte Sitemap - DEV Community</span></a></li></ul>
<h3>éŸ¿æ‡‰å¼ iframe</h3>
<p>å¦‚æœæƒ³åœ¨æ–‡ç« è£¡æ”¾å…¥ Youtube åµŒå…¥å½±ç‰‡ï¼Œé‚„éœ€è¦å¦å¤–ä¿®æ”¹ <code>iframe</code> éƒ¨ä»½çš„ CSS å¯¦ä½œéŸ¿æ‡‰å¼æ•ˆæœï¼Œé¿å…åœ¨è¦–çª—å¤§å°æ”¹è®Šæˆ–åœ¨æ‰‹æ©Ÿä¸Šç€è¦½æ™‚ï¼Œé€ æˆç‰ˆé¢è·‘æ‰</p>
<iframe title="Liz and the Blue Bird" src="https://www.youtube.com/embed/OGWO3u8zgTU" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p><code>global.css</code></p>
<pre class="language-css"><!-- HTML_TAG_START --><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">&#123;</span>
  <span class="token property">--margin</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">iframe</span> <span class="token punctuation">&#123;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100vw - <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--margin<span class="token punctuation">)</span> * 2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span>100vw - <span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--margin<span class="token punctuation">)</span> * 2<span class="token punctuation">)</span><span class="token punctuation">)</span> / 1.7778<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre>
<ul><li><a href="https://dev.to/bitdweller/responsive-iframe-without-a-parent-container-367k" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://dev.to/bitdweller/responsive-iframe-without-a-parent-container-367k" alt="Responsive iframe without a parent container - DEV Community"><span>Responsive iframe without a parent container - DEV Community</span></a></li></ul>
<h3>ç•™è¨€</h3>
<p>æœ‰æ•¸å¥—å¦‚ <a href="https://github.com/adtac/commento" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://github.com/adtac/commento" alt="Commento"><span>Commento</span></a>ã€<a href="https://remark42.com/demo/" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://remark42.com/demo/" alt="Remark42"><span>Remark42</span></a>ã€<a href="https://posativ.org/isso/" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://posativ.org/isso/" alt="Isso"><span>Isso</span></a> çš„ self-hosted ç•™è¨€ç‰ˆï¼Œå¯ä»¥æ­é… Heroku ä½¿ç”¨ <a href="https://github.com/fidiego/commento-heroku" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://github.com/fidiego/commento-heroku" alt="commento-heroku"><span>commento-heroku</span></a> æ¶è¨­ï¼Œæˆ–æ˜¯ä½¿ç”¨ GitHub Issues ä½œç‚ºç•™è¨€ç‰ˆçš„ <a href="https://utteranc.es/" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://utteranc.es/" alt="utterances"><span>utterances</span></a></p>
<h3>Dark Mode</h3>
<p>ï¼ˆå¾…ï¼‰</p>
<h3>Mermaid.js</h3>
<ul><li><p><code>Mermaid.js</code> æ˜¯ä¸€å¥—å¯ä»¥ä½¿ç”¨æ–‡å­—æ ¼å¼ç¹ªè£½ç”˜ç‰¹åœ–æˆ–æµç¨‹åœ–çš„å¥—ä»¶</p></li>
<li><p>ç”±æ–¼å¾å¥—ä»¶å®‰è£æœƒæœ‰ç›¸ä¾ç‰ˆæœ¬ä¸Šçš„å•é¡Œï¼Œæ•…ç›´æ¥å¾ cdn å¼•å…¥å¥—ä»¶</p>
<ul><li><code>d3.js</code> åƒ…å¯ä½¿ç”¨ ESMï¼Œç„¡æ³•å†ä»¥å¥—ä»¶å…§æ’°å¯«çš„ <code>require(&quot;d3&quot;)</code> å¼•å…¥</li>
<li><a href="https://github.com/mermaid-js/mermaid/issues/2677" rel="noopener" target="_blank"><img src="https://s2.googleusercontent.com/s2/favicons?domain=https://github.com/mermaid-js/mermaid/issues/2677" alt="esbuild error: Error "><span>esbuild error: Error </span></a></li></ul></li>
<li><p><code>markdown.js</code></p>
<pre class="language-javascript"><!-- HTML_TAG_START --><code class="language-javascript"><span class="token comment">// ...</span>
renderer<span class="token punctuation">.</span><span class="token function-variable function">code</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">code<span class="token punctuation">,</span> language</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>language <span class="token operator">==</span> <span class="token string">"mermaid"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token string">'&lt;pre class="mermaid">'</span> <span class="token operator">+</span> code <span class="token operator">+</span> <span class="token string">"&lt;/pre>"</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre></li>
<li><p><code>[slug].svelte</code></p>
<pre class="language-html"><!-- HTML_TAG_START --><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span>
  // ...
  import &#123; onMount &#125; from "svelte";
  onMount(async () => &#123;
    mermaid.init();
  &#125;);
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">svelte:</span>head</span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- ... --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span>
    <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js<span class="token punctuation">"</span></span>
  <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">svelte:</span>head</span><span class="token punctuation">></span></span></code><!-- HTML_TAG_END --></pre></li></ul>
<pre class="language-mermaid"><!-- HTML_TAG_START --><code class="language-mermaid"><span class="token keyword">graph</span> TB
  F<span class="token text string">[Gatsby]</span>
  F <span class="token arrow operator">--></span> G
  F <span class="token arrow operator">--></span> Github

  <span class="token keyword">subgraph</span> build
    S<span class="token text string">[(Sanity)]</span>
    G<span class="token text string">&#123;GraphQL&#125;</span>
    GH<span class="token text string">[(Github)]</span>

    G <span class="token arrow operator">--></span> GH
    G <span class="token arrow operator">--></span> S
  <span class="token keyword">end</span>

  <span class="token keyword">subgraph</span> deploy
    Github<span class="token arrow operator">--></span>Netlify
    Netlify<span class="token arrow operator">--></span>Y<span class="token text string">&#123;&#123;You&#125;&#125;</span>
  <span class="token keyword">end</span></code><!-- HTML_TAG_END --></pre>
<pre class="language-mermaid"><!-- HTML_TAG_START --><code class="language-mermaid"><span class="token keyword">sequenceDiagram</span>
    <span class="token keyword">participant</span> Client
    <span class="token keyword">participant</span> Auth server
    Client<span class="token arrow operator">->></span>Auth server<span class="token operator">:</span> Client credentials
    Auth server<span class="token arrow operator">->></span>Auth server<span class="token operator">:</span> Authenticate client
    Auth server<span class="token arrow operator">->></span>Client<span class="token operator">:</span> Access token
    Client<span class="token arrow operator">->></span>API<span class="token operator">:</span> Access protected API with access token
    API<span class="token arrow operator">->></span>Client<span class="token operator">:</span> Success</code><!-- HTML_TAG_END --></pre>
<div class="toc-container"><ul class="toc"><li><a href="#" onclick="document.querySelector('#js-id-å‰è¨€').scrollIntoView(); window.scrollBy(0, -128); event.preventDefault();">å‰è¨€</a></li><li><a href="#" onclick="document.querySelector('#js-id-sapper-blog-template').scrollIntoView(); window.scrollBy(0, -128); event.preventDefault();">Sapper Blog Template</a></li><li><a href="#" onclick="document.querySelector('#js-id-è¿½åŠ åŠŸèƒ½').scrollIntoView(); window.scrollBy(0, -128); event.preventDefault();">è¿½åŠ åŠŸèƒ½</a></li></ul></div>
    <span class="blink svelte-1kip24n">_</span></article>
  

<div class="back-to-top svelte-1p7rwza hidden" style="right: 2em">Back to top
</div>
</div></main>

  <footer scoped class="svelte-qi6xiu"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noreferrer noopener nofollow">CC BY-NC-SA 4.0
  </a>
  <div class="right svelte-qi6xiu">Made with <span class="heart svelte-qi6xiu">â¤ï¸</span> and
    <a href="https://kit.svelte.dev/" target="_blank" ref="noreferrer noopener nofollow">SvelteKit
    </a></div>
</footer>
</div>


		<script type="module" data-hydrate="14ygjvb">
		import { start } from "/_app/start-de248522.js";
		start({
			target: document.querySelector('[data-hydrate="14ygjvb"]').parentNode,
			paths: {"base":"","assets":""},
			session: {},
			route: false,
			spa: false,
			trailing_slash: "never",
			hydrate: {
				status: 200,
				error: null,
				nodes: [
					import("/_app/pages/__layout.svelte-3f90562d.js"),
						import("/_app/pages/posts/blog-with-sapper.md-f78df824.js")
				],
				params: {},
				routeId: "posts/blog-with-sapper"
			}
		});
	</script>
  </body>
</html>
