{"title":"Blog with Svelte","slug":"blog-with-svelte","html":"<h2 id=\"å‰è¨€\">å‰è¨€</h2>\n<p>ä¹‹å‰é™¸çºŒè©¦äº†å¹¾å€‹èƒ½æ­é… Markdown ç”¢ç”Ÿç¶²é çš„ libraryï¼Œåƒæ˜¯ <a target=\"_blank\" rel=\"nofollow\" href=\"https://hexo.io/zh-tw/\">Hexo</a> æˆ– <a target=\"_blank\" rel=\"nofollow\" href=\"https://gridsome.org/\">Gridsome</a>ï¼Œä½†å°æ–¼å…§å®¹å¹¾ä¹åªæ˜¯çµ¦è‡ªå·±çœ‹çš„é›œè¨˜ä¾†èªªï¼Œç”¨ä¾†ç¸½æœ‰ç¨®æ®ºé›ç”¨ç‰›åˆ€çš„æ„Ÿè¦ºï¼Œæ­£å¥½æœ‰äº›è¨±é—œæ³¨çš„ Svelte åœ¨ 2020 å¹´èˆˆèµ·ç†±æ½®ï¼Œå°±è¶æ©Ÿæ›æˆäº† <a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/Charca/sapper-blog-template\">Sapper çš„ blog template</a> ä¾†è©¦è©¦ä½¿ç”¨æ•ˆæœå¦‚ä½•ã€‚</p>\n<p>ï¼ˆè¿½è¨˜ï¼šåŸæœ¬æ˜¯å…ˆçœ‹åˆ° <a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/roxiness/routify-starter\">Routify çš„ blog template</a> è¦ºå¾—å¾ˆä¸éŒ¯ï¼Œä½† Routify éœ€è¦ç”¨åˆ°æª”æ¡ˆè·¯å¾‘åš SPAï¼Œæ²’è¾¦æ³• host åœ¨ GitHub Pages ä¸Šï¼Œæœ€å¾Œæ”¹ç”¨äº†ä»¥ <a target=\"_blank\" rel=\"nofollow\" href=\"https://sapper.svelte.dev/docs\">Sapper</a> å»ºæ§‹çš„ blog templateã€‚ï¼‰</p>\n<hr>\n<h2 id=\"sapper-blog-template\">Sapper Blog Template</h2>\n<h3 id=\"å®‰è£\">å®‰è£</h3>\n<pre class=\"language-bash\"><code class=\"language-bash\">npx degit Charca/sapper-blog-template your-blog-name\ncd your-blog-name\nnpm install # or yarn!\nnpm run dev</code></pre><ul>\n<li><code>npx</code> æ˜¯ npm åœ¨ v5.2.0 ä¹‹å¾Œå…§å»ºçš„æŒ‡ä»¤ï¼Œæä¾›æš«æ™‚æ€§åŸ·è¡ŒæŸå€‹ npm å¥—ä»¶çš„åŠŸèƒ½</li>\n<li><code>degit</code> æ˜¯ä¸€å¥—èƒ½ä¾›ä½¿ç”¨è€…ç›´æ¥å–ç”¨ç¾å­˜ project æ¨£æ¿çš„å¥—ä»¶</li>\n</ul>\n<h3 id=\"whats-inside-it\">What&#39;s inside it?</h3>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://svelte.dev/\">Svelte</a><ul>\n<li>ä¸€å¥—ç§‰æŒã€ŒWrite less codeã€çš„ç²¾ç¥ï¼Œç‚ºäº†å»ºæ§‹ UI è€Œç”Ÿçš„ JavaScript ç·¨è­¯å™¨</li>\n<li>ä¸æ¡ç”¨ Virtual DOM diffï¼Œä½¿ç”¨åŸç”Ÿ JS ç›´æ¥ä¿®æ”¹ DOMï¼Œæ“æœ‰ç›¸å°å„ªç§€çš„åŸ·è¡Œé€Ÿåº¦èˆ‡æª”æ¡ˆå¤§å°è¡¨ç¾</li>\n</ul>\n</li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://sapper.svelte.dev/\">Sapper</a><ul>\n<li>å®šä½é¡ä¼¼æ–¼ React çš„ Next.jsã€Vue çš„ Nuxt.js çš„ framework å·¥å…·</li>\n<li>åŸºæ–¼ Svelte è™•ç†èˆ‡è£œè¶³äº†å¦‚ SSRã€SPAã€SSG ç­‰æ‡‰ç”¨è£½ä½œçš„éœ€æ±‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"how-does-it-work\">How does it work?</h3>\n<p>template ä¸­çš„é é¢ç›¸é—œæª”æ¡ˆä½æ–¼ <code>src/routes/blog</code>ï¼Œä¸»è¦åŠŸèƒ½ç”±ä»¥ä¸‹ä¸‰å€‹æª”æ¡ˆå¯¦ä½œï¼š</p>\n<ul>\n<li><code>_posts.js</code>ï¼šè®€å–å’Œ parse markdown æª”æ¡ˆçš„ module</li>\n<li><code>[slug].svelte</code>ï¼šæ–‡ç« é é¢çš„ template</li>\n<li><code>index.svelte</code>ï¼šæ–‡ç« åˆ—è¡¨çš„ template</li>\n</ul>\n<p>æ–‡ç« æª”æ¡ˆå‰‡æ”¾ç½®æ–¼ <code>src/routes/blog/posts</code> è³‡æ–™å¤¾ä¸­ï¼Œæª”æ¡ˆåç¨±æœƒ parse æˆç‚ºç¶²é è·¯å¾‘ï¼Œæ’°å¯«æ–¼æ–‡ç« é–‹é ­åˆ° <code>ï¼œ!-- more --ï¼</code> ä¹‹é–“çš„å…§å®¹æœƒæˆç‚ºé è¦½éƒ¨ä»½ï¼Œæ¨™é¡Œå’Œæ—¥æœŸè¨˜è¼‰åœ¨æª”æ¡ˆå…§çš„ yaml å€åŸŸå…§</p>\n<p>é€™é‚Šæˆ‘æ”¹å¯«äº† <code>src/utils/markdown.js</code> è£¡è¦ä¸Ÿåˆ°ç¤¾ç¾¤é è¦½çš„éƒ¨ä»½ï¼š</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// gray-matter ç”¨æ–¼ parse yaml å€åŸŸéƒ¨ä»½çš„å…§å®¹</span>\n<span class=\"token keyword\">const</span> matter <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gray-matter\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ...</span>\n<span class=\"token comment\">// é¦–å€‹å€å¡Šç‚º yaml è³‡è¨Šå€ï¼Œå…¶é¤˜éƒ¨ä»½ç‚ºæ–‡ç« å…§å®¹</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> rawContent <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">matter</span><span class=\"token punctuation\">(</span>md<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ...</span>\n<span class=\"token comment\">// åˆ¤æ–·ã€Œé–±è®€æ›´å¤šã€å€åŸŸæ˜¯å¦å­˜åœ¨ï¼Œè‹¥å­˜åœ¨å‰‡å–å¾—ä½æ–¼å…¶ä¸Šæ–¹çš„å…§å®¹</span>\n<span class=\"token comment\">// ä¸¦å­˜å…¥é è¦½å…§å®¹éƒ¨ä»½</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rawContent<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token constant\">EXCERPT_SEPARATOR</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> splittedContent <span class=\"token operator\">=</span> rawContent<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token constant\">EXCERPT_SEPARATOR</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  excerpt <span class=\"token operator\">=</span> splittedContent<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  content <span class=\"token operator\">=</span> splittedContent<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// æ–°å¢ä¸å­˜åœ¨æ™‚ï¼Œæ”¹ç‚ºå–å¾— yaml è£¡ summary æ¨™ç±¤çš„å…§å®¹</span>\n  excerpt <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>summary<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ...</span></code></pre><h3 id=\"æ›´æ–°ç‰ˆæœ¬\">æ›´æ–°ç‰ˆæœ¬</h3>\n<p>å¦‚æœä½ ç”¨ <code>npm run update</code> å‡ç´šäº†ç›¸ä¾å¥—ä»¶ï¼Œå¯èƒ½æœƒè·³å‡ºèˆ‡ <code>rollup-plugin-svelte</code> ç›¸é—œçš„ç·¨è­¯éŒ¯èª¤ï¼Œç¶²é ä¹Ÿæœƒå‡ºç¾éŒ¯èª¤ï¼Œé€™æ˜¯å› ç‚ºç›¸é—œè¨˜è¿°æ–¹å¼æœ‰ä¿®æ”¹çš„é—œä¿‚ï¼š</p>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/sveltejs/rollup-plugin-svelte\">sveltejs/rollup-plugin-svelte</a></li>\n</ul>\n<pre class=\"language-diff\"><code class=\"language-diff\">  client: {\n    // ...\n    plugins: [\n      // ...\n-       svelte({\n-        dev,\n-        hydratable: true,\n-        emitCss: true,\n-      }),\n-      resolve(),\n\n+      svelte({\n+        emitCss: true,\n+        compilerOptions: {\n+          hydratable: true,\n+        },\n+      }),\n+      resolve({ browser: true }),\n    ]\n    // ...\n  }\n\n  server: {\n    // ...\n    plugins: [\n      // ...\n-       svelte({\n-         generate: 'ssr',\n-         dev,\n-       }),\n-       resolve(),\n\n+       svelte({\n+         compilerOptions: {\n+           generate: 'ssr',\n+         },\n+       }),\n+       resolve({ browser: true }),\n    ]\n    // ...\n  }</code></pre><h3 id=\"circular-dependencies\">Circular Dependencies</h3>\n<p>é‹è¡Œæ™‚æœƒå‡ºç¾çš„ circular dependecies è­¦å‘Šï¼Œå¯ä»¥é€éä¿®æ”¹ <code>rollup.config.js</code> è£¡çš„åµæ¸¬éƒ¨ä»½è§£æ±ºï¼š</p>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/sveltejs/sapper-template/pull/246/files\">Silence preload export warnings related to TypeScript support</a></li>\n</ul>\n<pre class=\"language-diff\"><code class=\"language-diff\">- const onwarn = (warning, onwarn) =>\n-   (warning.code === 'CIRCULAR_DEPENDENCY' &amp;&amp;\n-     warning.message.includes('/@sapper/')) ||\n-   onwarn(warning)\n\n+ const onwarn = (warning, onwarn) =>\n+ \t(warning.code === 'MISSING_EXPORT' &amp;&amp; /'preload'/.test(warning.message)) ||\n+ \t(warning.code === 'CIRCULAR_DEPENDENCY' &amp;&amp; /[/\\\\]@sapper[/\\\\]/.test(warning.message)) ||\n+ \tonwarn(warning);</code></pre><h3 id=\"deploy\">Deploy</h3>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/marketplace/actions/deploy-to-github-pages\">Deploy to GitHub Pages</a></li>\n</ul>\n<p>è®“ GitHub Actions åœ¨åŸå§‹ç¢¼ push ä¸Šå»ä¹‹å¾Œï¼Œå»è·‘ build å’Œ deploy åˆ° <code>gh-pages</code> branchï¼Œä¸¦å°‡ <code>github.io</code> çš„é¡¯ç¤ºä¾†æºæ”¹æˆ <code>gh-pages</code> branch</p>\n<p>èˆ‡éå¾€ç¶“é©—æ¯”è¼ƒä¸åŒçš„æ˜¯ï¼Œ<code>npm run build</code> ç”Ÿç”¢å‡ºä¾†çš„ç¶²é ä»ç„¶å’Œ Routify ä¸€æ¨£éœ€è¦å¾Œç«¯ä¼ºæœå™¨ï¼Œè¦æ”¹ç”¨ <code>npm run export</code> è®“ Sapper è‡ªå·±çˆ¬ä¸€éæ•´å€‹ç¶²ç«™ï¼Œæ‰€ç”¢ç”Ÿå‡ºä¾†çš„éœæ…‹é é¢æ‰èƒ½ host åˆ° GitHub Pages ä¸Š</p>\n<h4 id=\"github-actions\">GitHub Actions</h4>\n<ol>\n<li>åœ¨å°ˆæ¡ˆè³‡æ–™å¤¾æ ¹ç›®éŒ„åº•ä¸‹æ–°å¢ä¸€å€‹ <code>.github</code> è³‡æ–™å¤¾</li>\n<li>åœ¨è£¡é ­æ–°å¢ä¸€å€‹ <code>workflows</code> è³‡æ–™å¤¾</li>\n<li>åœ¨è£¡é ­æ–°å¢ä¸€å€‹ <code>deploy-to-github-pages.yaml</code> æª”æ¡ˆ</li>\n<li>è²¼ä¸Šä»¥ä¸‹æˆªå–èˆ‡ä¿®æ”¹è‡ªä¸Šæ–¹é€£çµçš„å…§å®¹</li>\n<li>æª”æ¡ˆ push åˆ° GitHub å¾Œï¼Œå°±æœƒé€é GitHub Actions\n<br>æŠŠ build å®Œç•¢çš„æª”æ¡ˆè‡ªå‹• branch åˆ° <code>gh-pages</code> åˆ†æ”¯</li>\n</ol>\n<pre class=\"language-yml\"><code class=\"language-yml\">name: Build and Deploy\non: [push]\njobs:\n  build-and-deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout ğŸ›ï¸\n        uses: actions/checkout@v2.3.1 # If you're using actions/checkout@v2 you must set persist-credentials to false in most cases for the deployment to work correctly.\n        with:\n          persist-credentials: false\n\n      - name: Install and Build ğŸ”§ # This example project is built using npm and outputs the result to the 'build' folder. Replace with the commands required to build your project, or remove this step entirely if your site is pre-built.\n        run: |\n          npm install\n          npm run export\n\n      - name: Deploy ğŸš€\n        uses: JamesIves/github-pages-deploy-action@3.7.1\n        with:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          BRANCH: gh-pages # The branch the action should deploy to.\n          FOLDER: __sapper__/export # The folder the action should deploy.\n          CLEAN: true # Automatically remove deleted files from the deploy branch</code></pre><h3 id=\"åŠ å…¥-google-analytics\">åŠ å…¥ Google Analytics</h3>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://analytics.google.com/analytics/web/\">Google Analytics</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://www.npmjs.com/package/sapper-google-analytics\">sapper-google-analytics</a></li>\n</ul>\n<ol>\n<li>ç”³è«‹ GA å¸³æˆ¶ï¼Œé»æ“Šå·¦ä¸‹è§’çš„ <code>Admin</code> é–‹å•Ÿæ§åˆ¶é¢æ¿</li>\n<li>é»æ“Š <code>Create Property</code> å»ºç«‹è³‡æºï¼Œè¼¸å…¥åç¨±èˆ‡é¸æ“‡æ™‚å€</li>\n<li>é»æ“Šä¸‹æ–¹çš„ <code>Show advanced options</code>\n<br/>å•Ÿç”¨ <code>Create a Universal Analytics property</code> é¸é …</li>\n<li>è³‡æºå»ºç«‹å®Œæˆå¾Œï¼Œé»æ“Š <code>Tracking Info</code> åº•ä¸‹çš„ <code>Tracking Code</code>\n<br/>è¤‡è£½è£¡é ­çš„ <code>Tracking ID</code></li>\n<li><code>npm i sapper-google-analytics</code></li>\n<li>ç·¨è¼¯ <code>src/routes/_layout.svelte</code> åŠ ä¸Šä¸‹æ–¹ç¨‹å¼ç¢¼</li>\n<li>å®Œæˆå¾Œå¯ä»¥åˆ° <code>Tracking Info</code> è£¡çš„ <code>Tracking Code</code>\n<br/>é»é¸ <code>Send test traffic</code> æ¸¬è©¦æ˜¯å¦æ–°å¢æˆåŠŸ</li>\n</ol>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> GoogleAnalytics <span class=\"token keyword\">from</span> <span class=\"token string\">\"sapper-google-analytics/GoogleAnalytics.svelte\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> stores <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@sapper/app\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// å‰›æ‰è¤‡è£½çš„ Tracking ID</span>\n  <span class=\"token keyword\">let</span> ga_measurement_id <span class=\"token operator\">=</span> <span class=\"token string\">\"UA-SOMETHING\"</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>GoogleAnalytics</span> <span class=\"token attr-name\">{stores}</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{ga_measurement_id}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre><h3 id=\"rss\">RSS</h3>\n<ol>\n<li>åœ¨ <code>src/routes/</code> åº•ä¸‹å»ºç«‹ä¸€å€‹ <code>rss.xml.js</code>ï¼š\n<br>ï¼ˆæª”æ¡ˆå…§çš„ <code>title</code>ã€<code>description</code> ç­‰å…§å®¹è«‹è‡ªè¡Œä¿®æ”¹ï¼‰</li>\n</ol>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> posts <span class=\"token keyword\">from</span> <span class=\"token string\">\"./_posts.js\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> siteUrl <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">toRFC3339</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">date</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">pad</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> n <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"0\"</span> <span class=\"token operator\">+</span> n <span class=\"token operator\">:</span> n<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">timezoneOffset</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">offset</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> sign<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>offset <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token string\">\"Z\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    sign <span class=\"token operator\">=</span> offset <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"_\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">;</span>\n    offset <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">abs</span><span class=\"token punctuation\">(</span>offset<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> sign <span class=\"token operator\">+</span> <span class=\"token function\">pad</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>offset <span class=\"token operator\">/</span> <span class=\"token number\">60</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\":\"</span> <span class=\"token operator\">+</span> <span class=\"token function\">pad</span><span class=\"token punctuation\">(</span>offset <span class=\"token operator\">%</span> <span class=\"token number\">60</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    date<span class=\"token punctuation\">.</span><span class=\"token function\">getFullYear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    <span class=\"token string\">\"-\"</span> <span class=\"token operator\">+</span>\n    <span class=\"token function\">pad</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">getMonth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    <span class=\"token string\">\"-\"</span> <span class=\"token operator\">+</span>\n    <span class=\"token function\">pad</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    <span class=\"token string\">\"T\"</span> <span class=\"token operator\">+</span>\n    <span class=\"token function\">pad</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">getHours</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    <span class=\"token string\">\":\"</span> <span class=\"token operator\">+</span>\n    <span class=\"token function\">pad</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">getMinutes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    <span class=\"token string\">\":\"</span> <span class=\"token operator\">+</span>\n    <span class=\"token function\">pad</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">getSeconds</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    <span class=\"token function\">timezoneOffset</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">getTimezoneOffset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">renderXmlRssFeed</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">posts</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?>\n  &lt;rss version=\"2.0\">\n    &lt;channel>\n      &lt;title>Title Here&lt;/title>\n      &lt;link href=\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>siteUrl<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"/>\n      &lt;description>Description Here&lt;/description>\n      &lt;lastBuildDate></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">toRFC3339</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/lastBuildDate>\n      &lt;managingEditor>example@example.com&lt;/managingEditor>\n\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>posts\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n        &lt;item>\n          &lt;title></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>post<span class=\"token punctuation\">.</span>title<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/title>\n          &lt;link></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>siteUrl<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/blog/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>post<span class=\"token punctuation\">.</span>slug<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/link>\n          &lt;pubDate></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">toRFC3339</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/pubDate>\n          &lt;description>\n              </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>post<span class=\"token punctuation\">.</span>excerpt<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n          &lt;/description>\n        &lt;/item>\n      </span><span class=\"token template-punctuation string\">`</span></span>\n        <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n    &lt;/channel>\n  &lt;/rss></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">writeHead</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"Cache-Control\"</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">max-age=0, s-max-age=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">600</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 10 minutes</span>\n    <span class=\"token string-property property\">\"Content-Type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"application/rss+xml\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> feed <span class=\"token operator\">=</span> <span class=\"token function\">renderXmlRssFeed</span><span class=\"token punctuation\">(</span>posts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span>feed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre><ol start=\"2\">\n<li>åœ¨ Navbar åŠ ä¸Š RSS é€£çµï¼š<code>&lt;a class={segment === &#39;rss&#39; ? &#39;selected&#39; : &#39;&#39;} href=&quot;rss.xml&quot;&gt;rss&lt;/a&gt;</code></li>\n</ol>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://sapper-goals.netlify.app/goals/easy-rss-and-sitemap/\">Easy RSS Feed &amp; Sitemap âœ…</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://lacourt.dev/2019/06/29\">2019/06/29 - migrating to Sapper part 3 - RSS feed</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://cleverdev.codes/blog/rss-atom-and-site-map-for-svelte-sapper-blog-part-3/\">RSS/Atom and Site Map for Svelte/Sapper Blog</a></li>\n</ul>\n<h3 id=\"sitemap\">Sitemap</h3>\n<ul>\n<li>åœ¨ <code>src/routes/</code> åº•ä¸‹å»ºç«‹ä¸€å€‹ <code>sitemap.xml.js</code>ï¼š\n<br>ï¼ˆæª”æ¡ˆå…§çš„ <code>siteUrl</code> ç­‰å…§å®¹è«‹è‡ªè¡Œä¿®æ”¹ï¼‰</li>\n</ul>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> posts <span class=\"token keyword\">from</span> <span class=\"token string\">\"./_posts.js\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> siteUrl <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fs\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> pages <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">readdirSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./src/routes\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  file <span class=\"token operator\">=</span> file<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n    file<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token string\">\"_\"</span> <span class=\"token operator\">&amp;&amp;</span>\n    file <span class=\"token operator\">!==</span> <span class=\"token string\">\"sitemap\"</span> <span class=\"token operator\">&amp;&amp;</span>\n    file <span class=\"token operator\">!==</span> <span class=\"token string\">\"index\"</span> <span class=\"token operator\">&amp;&amp;</span>\n    file <span class=\"token operator\">!==</span> <span class=\"token string\">\"[slug]\"</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    pages<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">render</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">pages<span class=\"token punctuation\">,</span> posts</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n&lt;urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd\">\n  </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pages\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">(</span><span class=\"token parameter\">page</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;url>\n      &lt;loc></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>siteUrl<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>page<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/loc>\n      &lt;lastmod></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/lastmod>\n      &lt;priority>1.00&lt;/priority>\n    &lt;/url>\n  </span><span class=\"token template-punctuation string\">`</span></span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n  </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>posts\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;url>\n      &lt;loc></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>siteUrl<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/blog/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>post<span class=\"token punctuation\">.</span>slug<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/loc>\n      &lt;lastmod></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span>printDate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span>\n        <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n      <span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/lastmod>\n      &lt;priority>0.80&lt;/priority>\n    &lt;/url>\n  </span><span class=\"token template-punctuation string\">`</span></span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n&lt;/urlset>\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Cache-Control\"</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">max-age=0, s-max-age=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">600</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 10 minutes</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-Type\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"application/rss+xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> sitemap <span class=\"token operator\">=</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>pages<span class=\"token punctuation\">,</span> posts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span>sitemap<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre><ul>\n<li>ç‚ºäº† export æ™‚ <code>sitemap.xml</code> ä¹Ÿè¦æ¸²æŸ“\n<br>ä¿®æ”¹ <code>index.svelte</code> è£¡çš„ <code>preload</code> function</li>\n</ul>\n<pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>module<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token operator\">-</span>   <span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">preload</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> params<span class=\"token punctuation\">,</span> query <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token operator\">-</span>     <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">index.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">-</span>       <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">r</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> r<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">-</span>       <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">posts</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"token operator\">-</span>         <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> posts <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">-</span>       <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">-</span>   <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">context</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>module<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token operator\">+</span>   <span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">preload</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> params<span class=\"token punctuation\">,</span> query <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token operator\">+</span>     <span class=\"token keyword\">const</span> posts <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">index.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">+</span>       <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">r</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> r<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">+</span>       <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">posts</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"token operator\">+</span>         <span class=\"token keyword\">return</span> posts<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span>       <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span>     <span class=\"token keyword\">const</span> sitemap <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sitemap.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span>     <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> posts <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span>   <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre><ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://dev.to/zechtyounes/how-to-render-your-sitemap-xml-file-in-your-svelte-sapper-blog-2joh\">How to render your sitemap.xml file in your Svelte/Sapper blog - DEV Community</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://dev.to/kevinconti/how-to-create-a-sapper-svelte-sitemap-3490\">How to create a Sapper / Svelte Sitemap - DEV Community</a></li>\n</ul>\n<h3 id=\"éŸ¿æ‡‰å¼-iframe\">éŸ¿æ‡‰å¼ iframe</h3>\n<p>å¦‚æœæƒ³åœ¨æ–‡ç« è£¡æ”¾å…¥ Youtube åµŒå…¥å½±ç‰‡ï¼Œé‚„éœ€è¦å¦å¤–ä¿®æ”¹ <code>iframe</code> éƒ¨ä»½çš„ CSS å¯¦ä½œéŸ¿æ‡‰å¼æ•ˆæœï¼Œé¿å…åœ¨è¦–çª—å¤§å°æ”¹è®Šæˆ–åœ¨æ‰‹æ©Ÿä¸Šç€è¦½æ™‚ï¼Œé€ æˆç‰ˆé¢è·‘æ‰</p>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/OGWO3u8zgTU\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n\n<p><code>global.css</code></p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">:root</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">--margin</span><span class=\"token punctuation\">:</span> 2rem<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">iframe</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> <span class=\"token function\">calc</span><span class=\"token punctuation\">(</span>100vw - <span class=\"token punctuation\">(</span><span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--margin<span class=\"token punctuation\">)</span> * 2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> <span class=\"token function\">calc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>100vw - <span class=\"token punctuation\">(</span><span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--margin<span class=\"token punctuation\">)</span> * 2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> / 1.7778<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre><ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://dev.to/bitdweller/responsive-iframe-without-a-parent-container-367k\">Responsive iframe without a parent container - DEV Community</a></li>\n</ul>\n<h3 id=\"ç•™è¨€\">ç•™è¨€</h3>\n<p>æœ‰æ•¸å¥—å¦‚ <a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/adtac/commento\">Commento</a>ã€<a target=\"_blank\" rel=\"nofollow\" href=\"https://remark42.com/demo/\">Remark42</a>ã€<a target=\"_blank\" rel=\"nofollow\" href=\"https://posativ.org/isso/\">Isso</a> çš„ self-hosted ç•™è¨€ç‰ˆï¼Œå¯ä»¥æ­é… Heroku ä½¿ç”¨ <a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/fidiego/commento-heroku\">commento-heroku</a> æ¶è¨­ï¼Œæˆ–æ˜¯ä½¿ç”¨ GitHub Issues ä½œç‚ºç•™è¨€ç‰ˆçš„ <a target=\"_blank\" rel=\"nofollow\" href=\"https://utteranc.es/\">utterances</a></p>\n<h3 id=\"dark-mode\">Dark Mode</h3>\n<p>ï¼ˆå¾…ï¼‰</p>\n<h3 id=\"mermaidjs\">Mermaid.js</h3>\n<ul>\n<li><code>Mermaid.js</code> æ˜¯ä¸€å¥—å¯ä»¥ä½¿ç”¨æ–‡å­—æ ¼å¼ç¹ªè£½ç”˜ç‰¹åœ–æˆ–æµç¨‹åœ–çš„å¥—ä»¶</li>\n<li>ç”±æ–¼å¾å¥—ä»¶å®‰è£æœƒæœ‰ç›¸ä¾ç‰ˆæœ¬ä¸Šçš„å•é¡Œï¼Œæ•…ç›´æ¥å¾ cdn å¼•å…¥å¥—ä»¶<ul>\n<li><code>d3.js</code> åƒ…å¯ä½¿ç”¨ ESMï¼Œç„¡æ³•å†ä»¥å¥—ä»¶å…§æ’°å¯«çš„ <code>require(&quot;d3&quot;)</code> å¼•å…¥</li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/mermaid-js/mermaid/issues/2677\">esbuild error: Error [ERR_REQUIRE_ESM]: require() of ES Module #2677</a></li>\n</ul>\n</li>\n<li><code>markdown.js</code><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// ...</span>\nrenderer<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">code</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">code<span class=\"token punctuation\">,</span> language</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>language <span class=\"token operator\">==</span> <span class=\"token string\">\"mermaid\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'&lt;pre class=\"mermaid\">'</span><span class=\"token operator\">+</span>code<span class=\"token operator\">+</span><span class=\"token string\">\"&lt;/pre>\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></li>\n<li><code>[slug].svelte</code><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> onMount <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">onMount</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    mermaid<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">svelte:</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token comment\">&lt;!-- ... --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">svelte:</span>head</span><span class=\"token punctuation\">></span></span>  </code></pre></li>\n</ul>\n<pre class=\"mermaid\">graph TB\n  F[Gatsby]\n  F --> G\n  F --> Github\n\n  subgraph build\n    S[(Sanity)]\n    G{GraphQL}\n    GH[(Github)]\n  \n    G --> GH\n    G --> S\n  end\n\n  subgraph deploy\n    Github-->Netlify\n    Netlify-->Y{{You}}\n  end</pre><pre class=\"mermaid\">sequenceDiagram\n    participant Client\n    participant Auth server\n    Client->>Auth server: Client credentials\n    Auth server->>Auth server: Authenticate client\n    Auth server->>Client: Access token\n    Client->>API: Access protected API with access token\n    API->>Client: Success</pre>","date":"1990-01-02T00:00:00.000Z","printDate":"January 2, 1990","printReadingTime":"7 min read","tags":[],"image":"https://f6bfb5.github.io/preview/blog-with-svelte.png"}