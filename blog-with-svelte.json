{"title":"Blog with Svelte","slug":"blog-with-svelte","html":"<h4 id=\"anchor-links-using-remark-slug\">Anchor links using remark-slug</h4>\n<ul>\n<li><a onclick=\"document.location.hash='å‰è¨€';\" href=\"javascript:;\">å‰è¨€</a></li>\n<li><a onclick=\"document.location.hash='å®‰è£-svelte';\" href=\"javascript:;\">å®‰è£ Svelte</a></li>\n<li><a onclick=\"document.location.hash='whats-inside-it';\" href=\"javascript:;\">What&#39;s inside it?</a></li>\n<li><a onclick=\"document.location.hash='how-does-it-work';\" href=\"javascript:;\">How does it work?</a></li>\n</ul>\n<hr>\n<h2 id=\"å‰è¨€\">å‰è¨€</h2>\n<p>ä¹‹å‰é™¸çºŒè©¦äº†å¹¾å€‹èƒ½æ­é… Markdown ç”¢ç”Ÿç¶²é çš„ libraryï¼Œåƒæ˜¯ <a target=\"_blank\" rel=\"nofollow\" href=\"https://hexo.io/zh-tw/\">Hexo</a> æˆ– <a target=\"_blank\" rel=\"nofollow\" href=\"https://gridsome.org/\">Gridsome</a>ï¼Œä½†å°æ–¼å…§å®¹å¹¾ä¹åªæ˜¯çµ¦è‡ªå·±çœ‹çš„é›œè¨˜çš„æˆ‘ä¾†èªªï¼Œç”¨èµ·ä¾†ç¸½è¦ºå¾—æœ‰ç¨®æ®ºé›ç”¨ç‰›åˆ€çš„æ„Ÿè¦ºï¼Œè¶è‘—ä¹‹å‰ä¹Ÿæœ‰äº›è¨±é—œæ³¨çš„ Svelte åœ¨ 2020 å¹´èˆˆèµ·ç†±æ½®ï¼Œæ›äº† <a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/Charca/sapper-blog-template\">Sapper çš„ blog template</a> ä¾†è©¦è©¦ä½¿ç”¨æ•ˆæœå¦‚ä½•ã€‚</p>\n<p>ï¼ˆè¿½è¨˜ï¼šåŸæœ¬æ˜¯å…ˆçœ‹åˆ° <a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/roxiness/routify-starter\">Routify çš„ blog template</a> è¦ºå¾—å¾ˆä¸éŒ¯ï¼Œä½† Routify ä¼¼ä¹å› ç‚ºéœ€è¦ç”¨åˆ°æª”æ¡ˆè·¯å¾‘åš SPAï¼Œæ²’è¾¦æ³• host åœ¨ GitHub Pages ä¸Šï¼Œæœ€å¾Œæ”¹ç”¨äº† Sapperã€‚åƒè€ƒï¼š<a target=\"_blank\" rel=\"nofollow\" href=\"https://blog.huli.tw/2019/09/18/spa-common-problem-about-router/\">æ·ºè«‡æ–°æ‰‹åœ¨å­¸ç¿’ SPA æ™‚çš„å¸¸è¦‹å•é¡Œï¼šä»¥ Router ç‚ºä¾‹ - Huli</a>ï¼‰</p>\n<hr>\n<h2 id=\"sapper-blog-template\">Sapper Blog Template</h2>\n<h3 id=\"å®‰è£\">å®‰è£</h3>\n<pre class=\"language-bash\"><code class=\"language-bash\">npx degit Charca/sapper-blog-template your-blog-name\ncd your-blog-name\nnpm install # or yarn!\nnpm run dev</code></pre><h3 id=\"whats-inside-it\">What&#39;s inside it?</h3>\n<h4 id=\"svelte\"><a target=\"_blank\" rel=\"nofollow\" href=\"https://svelte.dev/\">Svelte</a></h4>\n<p>ä¸€å¥—ç§‰æŒã€ŒWrite less codeã€çš„ç²¾ç¥ï¼Œç‚ºäº†å»ºæ§‹ UI è€Œç”Ÿçš„ JavaScript ç·¨è­¯å™¨ï¼Œä¸æ¡ç”¨ Virtual DOM diffï¼Œè€Œæ˜¯ç”¨åŸç”Ÿ JS ç›´æ¥ä¿®æ”¹ DOMï¼Œæ“æœ‰ç›¸å°å„ªç§€çš„åŸ·è¡Œé€Ÿåº¦èˆ‡æª”æ¡ˆå¤§å°è¡¨ç¾ã€‚</p>\n<h4 id=\"sapper\"><a target=\"_blank\" rel=\"nofollow\" href=\"https://sapper.svelte.dev/\">Sapper</a></h4>\n<p>Sapper æ˜¯å¥—å®šä½é¡ä¼¼æ–¼ React çš„ Next.jsã€Vue çš„ Nuxt.js çš„ framework å·¥å…·ï¼ŒåŸºæ–¼ Svelte ä¹‹ä¸Šè™•ç†èˆ‡è£œè¶³äº†ä¾‹å¦‚ SSRã€SPAã€SSG é€™é¡è£½ä½œæ‡‰ç”¨çš„éœ€æ±‚</p>\n<h3 id=\"how-does-it-work\">How does it work?</h3>\n<p>template ä¸­çš„ blog ç›¸é—œæª”æ¡ˆä½æ–¼ <code>src/routes/blog</code>ï¼Œä¸»è¦åŠŸèƒ½ç”±ä»¥ä¸‹ä¸‰å€‹æª”æ¡ˆå¯¦ä½œï¼š</p>\n<ul>\n<li><code>_posts.js</code>ï¼šè®€å–å’Œ parse markdown æª”æ¡ˆçš„ module</li>\n<li><code>[slug].svelte</code>ï¼šæ–‡ç« é é¢çš„ template</li>\n<li><code>index.svelte</code>ï¼šæ–‡ç« åˆ—è¡¨çš„ template</li>\n</ul>\n<p>æ–‡ç« å‰‡æ”¾ç½®æ–¼ <code>src/routes/blog/posts</code> è³‡æ–™å¤¾ä¸­ï¼Œæ–‡ç« æª”æ¡ˆåç¨±æœƒ parse æˆç‚ºç¶²é è·¯å¾‘ï¼Œæ’°å¯«æ–¼æ–‡ç« é–‹é ­åˆ° <code>ï¼œ!-- more --ï¼</code> ä¹‹é–“çš„å…§å®¹æœƒæˆç‚ºé è¦½éƒ¨ä»½ï¼Œæ¨™é¡Œå’Œæ—¥æœŸè¨˜è¼‰åœ¨æª”æ¡ˆå…§çš„ yaml å€åŸŸå…§</p>\n<p>ç”±æ–¼å€‹äººæ²’æœ‰ä½¿ç”¨é–±è®€æ›´å¤šè¨»è¨˜çš„åŠŸèƒ½ï¼Œå†æ”¹å¯«äº† <code>src/utils/markdown.js</code> è£¡åˆ¤æ–·ä»€éº¼æ±è¥¿è¦ä¸Ÿåˆ°ç¤¾ç¾¤é è¦½çš„éƒ¨ä»½ï¼ˆå…¶å¯¦ä¹Ÿå°±åŠ äº†ä¸€è¡Œç¨‹å¼ç¢¼ï¼‰ï¼š</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// gray-matter ç”¨æ–¼è½‰æ›åŒ¯å…¥æª”æ¡ˆä»¥ --- éš”é–‹çš„å€å¡Šéƒ¨ä»½æˆç‚º object</span>\n<span class=\"token keyword\">const</span> matter <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gray-matter\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ...</span>\n<span class=\"token comment\">// é¦–å€‹å€å¡Šç‚º yaml è³‡è¨Šå€ï¼Œå…¶é¤˜éƒ¨ä»½ç‚ºæ–‡ç« å…§å®¹</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> content<span class=\"token operator\">:</span> rawContent <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">matter</span><span class=\"token punctuation\">(</span>md<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ...</span>\n<span class=\"token comment\">// åŸæœ¬åªæœ‰åˆ¤æ–·ã€Œé–±è®€æ›´å¤šã€æ˜¯å¦å­˜åœ¨ï¼Œä»¥åŠå–å¾—ä½æ–¼å…¶ä¸Šæ–¹çš„å…§å®¹</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rawContent<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token constant\">EXCERPT_SEPARATOR</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> splittedContent <span class=\"token operator\">=</span> rawContent<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token constant\">EXCERPT_SEPARATOR</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  excerpt <span class=\"token operator\">=</span> splittedContent<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  content <span class=\"token operator\">=</span> splittedContent<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// åŠ å…¥ä¸å­˜åœ¨æ™‚ï¼Œå–å¾— yaml è£¡ summary æ¨™ç±¤çš„å…§å®¹</span>\n  excerpt <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>summary<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ...</span></code></pre><h3 id=\"æ›´æ–°ä¹‹å¾Œ\">æ›´æ–°ä¹‹å¾Œ</h3>\n<p>å¦‚æœä½ å‡ç´šäº†ç›¸ä¾å¥—ä»¶ï¼Œå¯èƒ½æœƒè·³å‡ºèˆ‡ <code>rollup-plugin-svelte</code> ç›¸é—œçš„ç·¨è­¯éŒ¯èª¤ï¼Œç¶²é ä¹Ÿæœƒå‡ºç¾éŒ¯èª¤ï¼Œé€™æ˜¯å› ç‚ºç›¸é—œè¨˜è¿°æ–¹å¼æœ‰ä¿®æ”¹çš„é—œä¿‚ï¼š</p>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/sveltejs/rollup-plugin-svelte\">sveltejs/rollup-plugin-svelte</a></li>\n</ul>\n<pre class=\"language-diff\"><code class=\"language-diff\">  client: {\n    // ...\n    plugins: [\n      // ...\n-       svelte({\n-        dev,\n-        hydratable: true,\n-        emitCss: true,\n-      }),\n-      resolve(),\n+      svelte({\n+        emitCss: true,\n+        compilerOptions: {\n+          hydratable: true,\n+        },\n+      }),\n+      resolve({ browser: true }),\n    ]\n    // ...\n  }\n\n  server: {\n    // ...\n    plugins: [\n      // ...\n-       svelte({\n-         generate: 'ssr',\n-         dev,\n-       }),\n-       resolve(),\n+       svelte({\n+         compilerOptions: {\n+           generate: 'ssr',\n+         },\n+       }),\n+       resolve({ browser: true }),\n    ]\n    // ...\n  }</code></pre><h4 id=\"circular-dependencies\">Circular Dependencies</h4>\n<p>é‹è¡Œæ™‚æœƒå‡ºç¾çš„ circular dependecies è­¦å‘Šå¯ä»¥é€éä¿®æ”¹ <code>rollup.config.js</code> è£¡çš„åµæ¸¬éƒ¨ä»½è§£æ±º</p>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/sveltejs/sapper-template/pull/246/files\">Silence preload export warnings related to TypeScript support</a></li>\n</ul>\n<pre class=\"language-diff\"><code class=\"language-diff\">- const onwarn = (warning, onwarn) =>\n-   (warning.code === 'CIRCULAR_DEPENDENCY' &amp;&amp;\n-     warning.message.includes('/@sapper/')) ||\n-   onwarn(warning)\n+ const onwarn = (warning, onwarn) =>\n+     (warning.code === 'MISSING_EXPORT' &amp;&amp; /'preload'/.test(warning.message)) ||\n+     (warning.code === 'CIRCULAR_DEPENDENCY' &amp;&amp; /[/\\\\]@sapper[/\\\\]/.test(warning.message)) ||\n+     onwarn(warning);</code></pre><h3 id=\"deploy\">Deploy</h3>\n<p>é€™æ¬¡æˆ‘åƒè€ƒäº†<a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/marketplace/actions/deploy-to-github-pages\">Deploy to GitHub Pages Â· Actions Â· GitHub Marketplace</a>ï¼Œè®“ GitHub Actions åœ¨ push åŸå§‹ç¢¼ä¸Šå»ä¹‹å¾Œè·‘ build å’Œ deploy åˆ° <code>gh-pages</code> branchï¼Œå†å°‡ <code>github.io</code> çš„é¡¯ç¤ºä¾†æºæ”¹æˆ <code>gh-pages</code> branch</p>\n<p>èˆ‡éå¾€ç¶“é©—æ¯”è¼ƒä¸åŒçš„æ˜¯ï¼Œ<code>npm run build</code> ç”Ÿç”¢å‡ºä¾†çš„ç¶²é ä»ç„¶å’Œ Routify ä¸€æ¨£éœ€è¦å¾Œç«¯ä¼ºæœå™¨ï¼Œè¦æ”¹ç”¨ <code>npm run export</code> è®“ Sapper è‡ªå·±çˆ¬ä¸€éæ•´å€‹ç¶²ç«™ï¼Œç”¢ç”Ÿå‡ºä¾†çš„éœæ…‹é é¢æ‰èƒ½ host åˆ° GitHub Pages ä¸Š</p>\n<ol>\n<li>åœ¨å°ˆæ¡ˆè³‡æ–™å¤¾æ ¹ç›®éŒ„åº•ä¸‹æ–°å¢ä¸€å€‹ <code>.github</code> è³‡æ–™å¤¾</li>\n<li>åœ¨è£¡é ­æ–°å¢ä¸€å€‹ <code>workflows</code> è³‡æ–™å¤¾</li>\n<li>åœ¨è£¡é ­æ–°å¢ä¸€å€‹ <code>deploy-to-github-pages.yaml</code> æª”æ¡ˆ</li>\n<li>è²¼ä¸Šä»¥ä¸‹æˆªå–èˆ‡ä¿®æ”¹è‡ªä¸Šæ–¹é€£çµçš„å…§å®¹</li>\n<li>æª”æ¡ˆ push åˆ° GitHub å¾Œï¼Œå°±æœƒé€é GitHub Actions\n<br>æŠŠ build å®Œç•¢çš„æª”æ¡ˆè‡ªå‹• branch åˆ° <code>gh-pages</code> åˆ†æ”¯</li>\n</ol>\n<pre class=\"language-yml\"><code class=\"language-yml\">name: Build and Deploy\non: [push]\njobs:\n  build-and-deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout ğŸ›ï¸\n        uses: actions/checkout@v2.3.1 # If you're using actions/checkout@v2 you must set persist-credentials to false in most cases for the deployment to work correctly.\n        with:\n          persist-credentials: false\n\n      - name: Install and Build ğŸ”§ # This example project is built using npm and outputs the result to the 'build' folder. Replace with the commands required to build your project, or remove this step entirely if your site is pre-built.\n        run: |\n          npm install\n          npm run export\n\n      - name: Deploy ğŸš€\n        uses: JamesIves/github-pages-deploy-action@3.7.1\n        with:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          BRANCH: gh-pages # The branch the action should deploy to.\n          FOLDER: __sapper__/export # The folder the action should deploy.\n          CLEAN: true # Automatically remove deleted files from the deploy branch</code></pre><h3 id=\"google-analytics\">Google Analytics</h3>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://analytics.google.com/analytics/web/\">Google Analytics</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://www.npmjs.com/package/sapper-google-analytics\">sapper-google-analytics - npm</a></li>\n</ul>\n<ol>\n<li>ç”³è«‹ GA å¸³æˆ¶ï¼Œé»æ“Šå·¦ä¸‹è§’çš„ <code>Admin</code> é–‹å•Ÿæ§åˆ¶é¢æ¿</li>\n<li>é»æ“Š <code>Create Property</code> å»ºç«‹è³‡æºï¼Œè¼¸å…¥åç¨±èˆ‡é¸æ“‡æ™‚å€</li>\n<li>é»æ“Šä¸‹æ–¹çš„ <code>Show advanced options</code>ï¼Œå•Ÿç”¨ <code>Create a Universal Analytics property</code> é¸é …</li>\n<li>å»ºç«‹å®Œæˆè³‡æºå¾Œï¼Œé»æ“Š <code>Tracking Info</code> åº•ä¸‹çš„ <code>Tracking Code</code>ï¼Œè¤‡è£½è£¡é ­çš„ <code>Tracking ID</code></li>\n<li><code>npm i sapper-google-analytics</code></li>\n<li>ç·¨è¼¯ <code>src/routes/_layout.svelte</code> åŠ ä¸Š</li>\n</ol>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> GoogleAnalytics <span class=\"token keyword\">from</span> <span class=\"token string\">\"sapper-google-analytics/GoogleAnalytics.svelte\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> stores <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@sapper/app\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> ga_measurement_id <span class=\"token operator\">=</span> <span class=\"token string\">\"UA-SOMETHING\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// å‰›æ‰è¤‡è£½çš„ Tracking ID</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>GoogleAnalytics</span> <span class=\"token attr-name\">{stores}</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{ga_measurement_id}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre><p>å®Œæˆå¾Œå¯ä»¥åˆ° <code>Tracking Info</code> è£¡çš„ <code>Tracking Code</code>\n<br>é»é¸ <code>Send test traffic</code> æ¸¬è©¦æ˜¯å¦æ–°å¢æˆåŠŸ</p>\n<h3 id=\"google-adsense\">Google AdSense</h3>\n<p>ï¼ˆå¾…ï¼‰</p>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://stackoverflow.com/questions/60722757/how-do-i-call-adsense-auto-ads-on-route-change-for-spa-single-page-app\">svelte - How do I call AdSense Auto Ads on route change for SPA (single page app)? - Stack Overflow</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/sveltejs/sapper/issues/30\">Hooks Â· Issue #30 Â· sveltejs/sapper</a></li>\n</ul>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> stores <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@sapper/app\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> page<span class=\"token punctuation\">,</span> preloading<span class=\"token punctuation\">,</span> session <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">stores</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\npage<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> path<span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">,</span> query <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// do amazing things</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"rss\">RSS</h3>\n<ol>\n<li>åœ¨ <code>src/routes/</code> åº•ä¸‹å»ºç«‹ä¸€å€‹ <code>rss.xml.js</code>ï¼š\n<br>ï¼ˆæª”æ¡ˆå…§çš„ <code>title</code>ã€<code>description</code> ç­‰å…§å®¹è«‹è‡ªè¡Œä¿®æ”¹ï¼‰</li>\n</ol>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> posts <span class=\"token keyword\">from</span> <span class=\"token string\">\"./_posts.js\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> siteUrl <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">toRFC3339</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">date</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">pad</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> n <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"0\"</span> <span class=\"token operator\">+</span> n <span class=\"token operator\">:</span> n<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">timezoneOffset</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">offset</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> sign<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>offset <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token string\">\"Z\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    sign <span class=\"token operator\">=</span> offset <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"_\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">;</span>\n    offset <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">abs</span><span class=\"token punctuation\">(</span>offset<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> sign <span class=\"token operator\">+</span> <span class=\"token function\">pad</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>offset <span class=\"token operator\">/</span> <span class=\"token number\">60</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\":\"</span> <span class=\"token operator\">+</span> <span class=\"token function\">pad</span><span class=\"token punctuation\">(</span>offset <span class=\"token operator\">%</span> <span class=\"token number\">60</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    date<span class=\"token punctuation\">.</span><span class=\"token function\">getFullYear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    <span class=\"token string\">\"-\"</span> <span class=\"token operator\">+</span>\n    <span class=\"token function\">pad</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">getMonth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    <span class=\"token string\">\"-\"</span> <span class=\"token operator\">+</span>\n    <span class=\"token function\">pad</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    <span class=\"token string\">\"T\"</span> <span class=\"token operator\">+</span>\n    <span class=\"token function\">pad</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">getHours</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    <span class=\"token string\">\":\"</span> <span class=\"token operator\">+</span>\n    <span class=\"token function\">pad</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">getMinutes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    <span class=\"token string\">\":\"</span> <span class=\"token operator\">+</span>\n    <span class=\"token function\">pad</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">getSeconds</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    <span class=\"token function\">timezoneOffset</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">getTimezoneOffset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">renderXmlRssFeed</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">posts</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?>\n  &lt;rss version=\"2.0\">\n    &lt;channel>\n      &lt;title>Title Here&lt;/title>\n      &lt;link href=\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>siteUrl<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"/>\n      &lt;description>Description Here&lt;/description>\n      &lt;lastBuildDate></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">toRFC3339</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/lastBuildDate>\n      &lt;managingEditor>example@example.com&lt;/managingEditor>\n\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>posts\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n        &lt;item>\n          &lt;title></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>post<span class=\"token punctuation\">.</span>title<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/title>\n          &lt;link></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>siteUrl<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/blog/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>post<span class=\"token punctuation\">.</span>slug<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/link>\n          &lt;pubDate></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">toRFC3339</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/pubDate>\n          &lt;description>\n              </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>post<span class=\"token punctuation\">.</span>excerpt<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n          &lt;/description>\n        &lt;/item>\n      </span><span class=\"token template-punctuation string\">`</span></span>\n        <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n    &lt;/channel>\n  &lt;/rss></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">writeHead</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"Cache-Control\"</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">max-age=0, s-max-age=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">600</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 10 minutes</span>\n    <span class=\"token string\">\"Content-Type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"application/rss+xml\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> feed <span class=\"token operator\">=</span> <span class=\"token function\">renderXmlRssFeed</span><span class=\"token punctuation\">(</span>posts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span>feed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre><ol start=\"2\">\n<li>åœ¨ Navbar åŠ ä¸Š RSS é€£çµï¼š<code>&lt;a class={segment === &#39;rss&#39; ? &#39;selected&#39; : &#39;&#39;} href=&quot;rss.xml&quot;&gt;rss&lt;/a&gt;</code></li>\n</ol>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://sapper-goals.netlify.app/goals/easy-rss-and-sitemap/\">Easy RSS Feed &amp; Sitemap âœ…</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://lacourt.dev/2019/06/29\">2019/06/29 - migrating to Sapper part 3 - RSS feed</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://cleverdev.codes/blog/rss-atom-and-site-map-for-svelte-sapper-blog-part-3/\">RSS/Atom and Site Map for Svelte/Sapper Blog - Part 3</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://dev.to/zechtyounes/how-to-render-your-sitemap-xml-file-in-your-svelte-sapper-blog-2joh\">How to render your sitemap.xml file in your Svelte/Sapper blog - DEV Community</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://dev.to/kevinconti/how-to-create-a-sapper-svelte-sitemap-3490\">How to create a Sapper / Svelte Sitemap - DEV Community</a></li>\n</ul>\n<hr>\n<summary>\n\n<h2 id=\"routify-blog-template\">Routify Blog Template</h2>\n</summary>\n<details>\n\n<h3 id=\"å®‰è£-1\">å®‰è£</h3>\n<pre class=\"language-bash\"><code class=\"language-bash\">mkdir svelte-md-blog\ncd svelte-md-blog\nnpx @sveltech/routify init --branch blog\nnpm run dev</code></pre><h3 id=\"whats-inside-it-1\">What&#39;s inside it?</h3>\n<h4 id=\"svelte-1\"><a target=\"_blank\" rel=\"nofollow\" href=\"https://svelte.dev/\">Svelte</a></h4>\n<p>ä¸€å¥—ç§‰æŒã€ŒWrite less codeã€çš„ç²¾ç¥ï¼Œç‚ºäº†å»ºæ§‹ UI è€Œç”Ÿçš„ JavaScript ç·¨è­¯å™¨ï¼Œä¸æ¡ç”¨ Virtual DOM diffï¼Œè€Œæ˜¯ç”¨åŸç”Ÿ JS ç›´æ¥ä¿®æ”¹ DOMï¼Œæ“æœ‰ç›¸å°å„ªç§€çš„åŸ·è¡Œé€Ÿåº¦èˆ‡æª”æ¡ˆå¤§å°è¡¨ç¾ã€‚</p>\n<h4 id=\"routify\"><a target=\"_blank\" rel=\"nofollow\" href=\"https://routify.dev/\">Routify</a></h4>\n<p>åŸºæ–¼æª”æ¡ˆç³»çµ±çµæ§‹çš„ Svelte routing libraryï¼Œå› æ‡‰æª”æ¡ˆè®Šæ›´è‡ªå‹•ç”¢ç”Ÿè·¯ç”±ï¼Œä¸¦å…·æœ‰ SPAã€SSRã€PWAã€ç”¢ç”Ÿ Meta Tagsã€åˆ†å‰² code çš„åŠŸèƒ½ã€‚</p>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://qiita.com/sho0211/items/ea99738f69d4426dbb1e\">Routify (Svelte Router) ã‚’ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦å®Œå…¨ã«ç†è§£ã™ã‚‹ - Qiita</a></li>\n</ul>\n<h4 id=\"mdsvex\"><a target=\"_blank\" rel=\"nofollow\" href=\"https://mdsvex.com/\">MDsveX</a></h4>\n<p>å¯ä»¥åœ¨ Markdown è£¡ä½¿ç”¨ Svelte componentã€åœ¨ Svelte component è£¡ä½¿ç”¨ Markdown çš„ Libraryã€‚</p>\n<h3 id=\"how-does-it-work-1\">How does it work?</h3>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> layout<span class=\"token punctuation\">,</span> isActive<span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">,</span> goto<span class=\"token punctuation\">,</span> page <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@svelte/routify\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> node <span class=\"token operator\">=</span> $layout<span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span>\n  {#each node.children as node}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{$url(node.path)}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">class:</span>active</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{$isActive(node.path)}<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token punctuation\">></span></span>{node.title}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span>\n    <span class=\"token punctuation\">></span></span>\n    {#if node.children.length}\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">svelte:</span>self</span> <span class=\"token attr-name\">{node}</span> <span class=\"token punctuation\">/></span></span>\n    {/if}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  {/each}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span></code></pre><h3 id=\"setting-html-metatags\">Setting HTML metatags</h3>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://routify.dev/docs/metatags\">HTML Metatags - Routify</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://developers.facebook.com/docs/sharing/webmasters/\">ç¶²ç«™ç®¡ç†å“¡ - Sharing</a></li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>Metatags</th>\n<th>èªªæ˜</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>og:title</code></td>\n<td>ç¶²é å…§å®¹çš„æ¨™é¡Œï¼Œä¸åŒ…å«ç¶²ç«™åç¨±ç­‰ä»»ä½•å“ç‰Œå…§å®¹</td>\n</tr>\n<tr>\n<td><code>og:url</code></td>\n<td>ç¶²é å…§å®¹çš„ç¶²å€ï¼Œæ­¤ç¶²å€æ‡‰ç‚ºæ¨™æº–ç¶²å€ï¼ˆcanonical URLï¼‰</td>\n</tr>\n<tr>\n<td><code>og:description</code></td>\n<td>å…§å®¹çš„ç°¡çŸ­èªªæ˜ï¼Œé€šå¸¸ç‚º 2 åˆ° 4 å€‹å¥å­</td>\n</tr>\n<tr>\n<td><code>og:image</code></td>\n<td>ç”¨æˆ¶å°‡å…§å®¹åˆ†äº«è‡³ SNS æ™‚é¡¯ç¤ºçš„åœ–åƒç¶²å€ï¼Œå»ºè­°ç‚º <code>1.91:1</code> æ¯”ä¾‹ã€æœ€å° <code>1200x630</code> è§£æåº¦</td>\n</tr>\n<tr>\n<td><code>og:type</code></td>\n<td>å…§å®¹çš„åª’é«”é¡å‹ï¼Œæ¯å€‹ç¶²å€éƒ½æ‡‰è©²æ˜¯å–®ä¸€ç‰©ä»¶ï¼Œé è¨­ç‚º <code>website</code></td>\n</tr>\n<tr>\n<td><code>og:locale</code></td>\n<td>è³‡æºçš„åœ°å€è¨­å®šï¼Œé è¨­ç‚º <code>en_US</code>ï¼ŒåŸç”Ÿå…§å®¹ä»¥éè‹±æ–‡æ’°å¯«æ™‚æ‰éœ€è¨­å®š</td>\n</tr>\n</tbody></table>\n<p><code>pages\\_layout.svelte</code></p>\n<pre class=\"language-svelte\"><code class=\"language-svelte\">$: metatags.title = $page.meta.frontmatter\n  ? $page.meta.frontmatter[\"title\"]\n  : `${$page.title}`;\n$: metatags.description = $page.meta.frontmatter\n  ? $page.meta.frontmatter[\"summary\"]\n  : \"\";\n\n$: metatags[\"twitter:title\"] = $page.meta.frontmatter\n  ? $page.meta.frontmatter[\"title\"]\n  : `${$page.title}`;\n$: metatags[\"twitter:description\"] = $page.meta.frontmatter\n  ? $page.meta.frontmatter[\"summary\"]\n  : \"\";</code></pre><h3 id=\"deploy-1\">Deploy</h3>\n<p>ï¼ˆå¾…ï¼‰</p>\n</details>\n","date":"1970-01-02T00:00:00.000Z","printDate":"January 2, 1970","printReadingTime":"6 min read"}