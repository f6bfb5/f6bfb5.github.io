{"title":"å‰ç«¯ç­†è¨˜ (3) JavaScript","slug":"f2e-03-javascript","html":"<h2 id=\"ecmascript\">ECMAScript</h2>\n<ul>\n<li>ECMAScript çš„è¦æ ¼æ–¼ ECMA çš„ TC39 è£¡åˆ¶å®š<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://www.ecma-international.org/technical-committees/tc39/\">ECMA TC39</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/tc39\">GitHub organization</a></li>\n</ul>\n</li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://node.green/\">Node.js ES2015/ES6, ES2016 and ES2017 support</a></li>\n</ul>\n<h2 id=\"javascript\">JavaScript</h2>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://jsprimer.net/#javascript-primer\">JavaScript Primer</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://ja.javascript.info/\">ç¾ä»£ã® JavaScript ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://openhome.cc/Gossip/ECMAScript/index.html\">èªè¨€æŠ€è¡“ï¼šECMAScript Essence</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://eyesofkids.gitbooks.io/javascript-start-from-es6/content/\">å¾ ES6 é–‹å§‹çš„ JavaScript å­¸ç¿’ç”Ÿæ´»</a></li>\n</ul>\n<h2 id=\"ç¾ä»£-js-çš„å¸¸è¦‹åŸºç¤æŠ€è¡“\">ç¾ä»£ JS çš„å¸¸è¦‹åŸºç¤æŠ€è¡“</h2>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://nodejs.org/en/\">Node.js</a></li>\n<li>Package Manager\n<br>â”œ npm\n<br>â”œ Yarn\n<br>â”” Bower</li>\n<li>Task Runner / Module Bundler\n<br>â”œ gulp\n<br>â”œ Grunt\n<br>â”œ webpack\n<br>â”” Parcel</li>\n<li>Transpiler / Compiler\n<br>â”” Babel</li>\n<li>Alt JS\n<br>â”œ CoffeeScript\n<br>â”œ TypeScript\n<br>â”” PureScript</li>\n<li>Framework / UI Library\n<br>â”œ React\n<br>â”œ Vue.js\n<br>â”œ Angular\n<br>â”” Riot.js</li>\n</ul>\n<h2 id=\"æ’°å¯«\">æ’°å¯«</h2>\n<h3 id=\"è®Šæ•¸\">è®Šæ•¸</h3>\n<ul>\n<li>case senstive</li>\n<li>é¦–å­—ç¬¦å¯ç‚ºä»»æ„ unicode æˆ– <code>$</code>ã€<code>_</code></li>\n<li>ç¬¬äºŒå­—ç¬¦ä¹‹å¾Œé™¤ä»»æ„ unicode æˆ– <code>$</code>ã€<code>_</code> ä¹‹å¤–ï¼Œé‚„å¯ç‚º <code>0-9</code></li>\n<li>ä¿ç•™å­—ä¸å¯ç”¨ç‚ºè®Šæ•¸åç¨±</li>\n</ul>\n<h3 id=\"å®£å‘Š\">å®£å‘Š</h3>\n<ul>\n<li><code>var</code> å‡½å¼ä½œç”¨åŸŸ</li>\n<li><code>let</code> å€å¡Šä½œç”¨åŸŸï¼Œä¸å¯é‡è¤‡å®£å‘Š</li>\n<li><code>const</code> å€å¡Šä½œç”¨åŸŸï¼Œä¸å¯é‡è¤‡å®£å‘Šã€ä¸å¯å†æ¬¡è³¦å€¼</li>\n</ul>\n<h4 id=\"è®Šæ•¸æå‡-hosting\">è®Šæ•¸æå‡ (Hosting)</h4>\n<p>JavaScript å¼•æ“åœ¨è§£æåŸå§‹ç¢¼æ™‚ï¼Œæœƒå…ˆå°‡æ‰€æœ‰å·²å®£å‘Šçš„è®Šæ•¸æå‡åˆ°ç¨‹å¼ç¢¼çš„é ‚éƒ¨ï¼Œç¶å®šå…¶æ‰€å±¬ä½œç”¨åŸŸä½†ä¸è³¦å€¼ã€‚</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// é¡¯ç¤º undefined</span>\n<span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></code></pre><p>å› æ­¤ä¸Šè¿°ä¾‹å­çš„ <code>a</code> ä¸¦æœªå®£å‘Šèˆ‡è³¦å€¼ï¼Œä½†åœ¨åŸ·è¡Œä¸Šä¸æœƒå ±éŒ¯ã€‚</p>\n<h3 id=\"å‘½å\">å‘½å</h3>\n<ul>\n<li>æ˜“æ–¼ç†è§£çš„å…§å®¹åç¨±</li>\n<li>ä¸éé•·æˆ–éçŸ­</li>\n<li>ä¸ä½¿ç”¨å®¹æ˜“æ··æ·†çš„åç¨±</li>\n<li>é–‹é ­ä½¿ç”¨ <code>_</code> è¡¨ç¤ºå…·æœ‰ç‰¹æ®Šæ„ç¾©ï¼Œéå¿…è¦ä¸ä½¿ç”¨</li>\n<li>çµ±ä¸€å‘½åé¢¨æ ¼</li>\n<li>åªä½¿ç”¨è‹±æ–‡å‘½å</li>\n<li>ç¿’æ…£ç”¨æ³•å¦‚ä¸‹ï¼š\n<br>â”œ è®Šæ•¸ï¼å‡½å¼åç¨±ï¼šcamelCase\n<br>â”œ é¡åˆ¥åç¨±ï¼šPascalCase\n<br>â”” å¸¸æ•¸ï¼šå…¨å¤§å¯«ï¼Œå­—è©é–“ç”¨ä¸‹åº•ç·š <code>_</code></li>\n</ul>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> numberOfStudents\n<span class=\"token keyword\">const</span> numberOfLegs\n<span class=\"token keyword\">function</span> <span class=\"token function\">setBackgroundColor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre><h2 id=\"å‹åˆ¥\">å‹åˆ¥</h2>\n<p>ç¨‹å¼èªè¨€è£¡å¸¸è¦‹çš„å‹åˆ¥æœ‰ã€Œå‹•æ…‹å‹åˆ¥ã€èˆ‡ã€Œéœæ…‹å‹åˆ¥ã€ï¼Œã€Œéœæ…‹å‹åˆ¥ã€èªè¨€çš„è®Šæ•¸ï¼Œæ–¼<strong>ç·¨è­¯æ™‚</strong>å·²ç¶“ç¢ºå®šå…¶å‹åˆ¥ï¼Œ\n<br>JavaScript æ‰€å±¬çš„å‹•æ…‹å‹åˆ¥ï¼Œå‰‡æ˜¯æ–¼<strong>åŸ·è¡Œéšæ®µè®Šæ•¸è³¦å€¼å¾Œ</strong>æ‰æœƒæ“æœ‰å‹åˆ¥ã€‚</p>\n<p>Javascript å…§å»ºæœ‰ä¸ƒå¤§å‹åˆ¥ï¼š</p>\n<h3 id=\"nullï¼ˆnullï¼‰\"><code>Null</code>ï¼ˆ<code>null</code>ï¼‰</h3>\n<p>å€¼ç‚ºç©ºæˆ–ä¸å­˜åœ¨</p>\n<h3 id=\"undefinedï¼ˆundefinedï¼‰\"><code>Undefined</code>ï¼ˆ<code>undefined</code>ï¼‰</h3>\n<p>å€¼æœªè¢«å®šç¾©ã€åˆå§‹å€¼</p>\n<h3 id=\"booleanï¼ˆtrueã€falseï¼‰\"><code>Boolean</code>ï¼ˆ<code>true</code>ã€<code>false</code>ï¼‰</h3>\n<p>å¸ƒæ—å€¼</p>\n<h3 id=\"numberï¼ˆæ•´æ•¸-1-æˆ–æµ®é»æ•¸-314ï¼‰\"><code>Number</code>ï¼ˆæ•´æ•¸ <code>1</code> æˆ–æµ®é»æ•¸ <code>3.14</code>ï¼‰</h3>\n<p>èƒ½å„²å­˜æ ¹æ“š IEE 754-2008 æ¨™æº–æ‰€å®šç¾©çš„\n<br>ç¯„åœæ–¼ <code>(2^53 -1)</code> åˆ° <code>2^53 -1</code> ä¹‹é–“çš„æ•¸å­—\n<br>å¦å¤–é‚„æœ‰ä¸‰å€‹ç¬¦è™Ÿå€¼ï¼š <code>+Infinity</code> ã€ <code>-Infinity</code> ã€ <code>NaN</code> ï¼ˆNot a Numberï¼‰\n<br>å¯ä»¥é€é <code>Number.MAX_VALUE</code> æˆ– <code>Number.MIN_VALUE</code> å…©å€‹å¸¸æ•¸\n<br>ä»¥åŠåœ¨ ES6 æ–°å¢çš„ <code>Number.isSafeInteger()</code> ã€ <code>Number.MAX_SAFE_INTEGER</code> ã€ <code>Number.MIN_SAFE_INTEGER</code>\n<br>ä¾†æª¢æŸ¥æ•¸å­—æ˜¯å¦ä½æ–¼æ¨™æº–ç¯„åœä¹‹å…§</p>\n<h3 id=\"stringï¼ˆhello-worldï¼‰\"><code>String</code>ï¼ˆ<code>Hello World</code>ï¼‰</h3>\n<p>æ–‡å­—ï¼Œä»¥å–®æ‹¬è™Ÿ <code>&#39;</code> æˆ–é›™æ‹¬è™Ÿ <code>&quot;</code> åŒ…è¦†èµ·ä¾†çš„å­—å…ƒ</p>\n<h3 id=\"object\"><code>Object</code></h3>\n<p>è³‡æ–™æˆ–å‡½å¼çš„çµ„åˆï¼ Property\n<br>å¯ç”± <code>{éµ (Key) : å€¼ (Value)}</code> æˆ– <code>new Object()</code> å®£å‘Š\n<br>å¯ä»¥é€é <code>.Key</code> æˆ– <code>[&#39;Key&#39;]</code> å­˜å–æˆ–æ“ä½œ <code>Object</code> è£¡çš„ propertyï¼Œåˆªé™¤å‰‡éœ€ä½¿ç”¨ <code>delete</code>\n<br>é™¤äº†ä¸Šè¿°å…¶ä¸­ä¸‰ç¨®åŸå§‹è³‡æ–™å‹åˆ¥ï¼ˆ <code>Boolean</code> ã€ <code>Number</code> ã€ <code>String</code> ï¼‰ä¹Ÿæ˜¯ <code>Object</code> ä¹‹å¤–\n<br>ä¸€äº›ç‰¹æ®Šçš„è³‡æ–™å‹åˆ¥ä¾‹å¦‚ <code>Array</code> ã€ <code>Date</code> ã€ <code>Function</code> ã€ <code>RegExp</code> ä¹Ÿéƒ½å±¬æ–¼ <code>Object</code></p>\n<h3 id=\"symbolï¼ˆæ–¼-es6-æ–°å¢ï¼‰\"><code>Symbol</code>ï¼ˆæ–¼ ES6 æ–°å¢ï¼‰</h3>\n<p>æ­¤é¡å‹çš„å€¼å”¯ä¸€ä¸”ä¸å¯ä¿®æ”¹\n<br>é€šå¸¸ç”¨æ–¼åšç‚º Object çš„ Key ä½¿ç”¨</p>\n<p>ä»¥åŠ <code>BigInt</code> ï¼ˆæ–¼ Chrome 67 æ–°å¢ï¼‰</p>\n<p>BigInt å‰‡å¯å„²å­˜è¶…é <code>Number</code> ç¯„åœçš„å€¼\n<br>æ–¼æ•¸å€¼å¾Œé¢åŠ ä¸Š <code>n</code> æˆ–ä½¿ç”¨ <code>BigInt()</code> å‡½å¼è½‰å‹å³å¯\n<br>ä¾‹å¦‚ <code>const bigInt = 123456789012345678901234567890n;</code>\n<br><code>Number</code> å¸¸è¦‹çš„é‹ç®—å­æ“ä½œéƒ½å¯åŒæ¨£å¥—ç”¨æ–¼ <code>BigInt</code> ä¸Š\n<br>ä½† <code>BigInt</code> é¡å‹çš„å€¼ä¸å¯èˆ‡ <code>Number</code> é¡å‹çš„å€¼é€²è¡Œæ“ä½œï¼Œæœƒé€ æˆ <code>TypeError</code> éŒ¯èª¤</p>\n<h3 id=\"typeof-é‹ç®—å­\"><code>typeof</code> é‹ç®—å­</h3>\n<p><code>typeof</code> æ˜¯èƒ½æª¢è¦–ä¸€å€‹å€¼å‹åˆ¥çš„é‹ç®—å­ã€‚</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> a<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typeof</span> a<span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"undefined\"</span>\n\na <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typeof</span> a<span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"object\"</span>\n\na <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typeof</span> a<span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"undefined\"</span>\n\na <span class=\"token operator\">=</span> <span class=\"token string\">\"string\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typeof</span> a<span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"string\"</span>\n\na <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typeof</span> a<span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"number\"</span>\n\na <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typeof</span> a<span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"boolean\"</span>\n\na <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typeof</span> a<span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"object\"</span>\n\na <span class=\"token operator\">=</span> <span class=\"token function\">Symble</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typeof</span> a<span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"symble\"</span></code></pre><p>ä½†æ˜¯ <code>typeof a</code> ä¸¦éè©¢å• <code>a</code> è®Šæ•¸çš„å‹åˆ¥ï¼Œè€Œæ˜¯è©¢å•ã€Œç›®å‰åœ¨ <code>a</code> ä¸­çš„å€¼çš„å‹åˆ¥æ˜¯ä»€éº¼ã€ã€‚JavaScript çš„è®Šæ•¸å–®ç´”åªæ˜¯å€¼çš„å®¹å™¨ã€‚</p>\n<p><code>null</code> çš„é¡å‹æ˜¯ <code>object</code>ï¼Œé€™æ˜¯ç”±æ–¼æ­·å²åŸå› é€ æˆçš„ã€‚1995 å¹´çš„ JavaScript èªè¨€ç¬¬ä¸€ç‰ˆï¼Œåªè¨­è¨ˆäº†äº”ç¨®è³‡æ–™é¡å‹ï¼ˆç‰©ä»¶ã€æ•´æ•¸ã€æµ®é»æ•¸ã€å­—ä¸²å’Œå¸ƒæ—å€¼ï¼‰ï¼Œæ²’è€ƒæ…® <code>null</code>ï¼ŒåªæŠŠå®ƒç•¶ä½œ <code>object</code> çš„ä¸€ç¨®ç‰¹æ®Šå€¼ã€‚å¾Œä¾† <code>null</code> ç¨ç«‹å‡ºä¾†ï¼Œä½œç‚ºä¸€ç¨®å–®ç¨çš„è³‡æ–™é¡å‹ï¼Œç‚ºäº†å…¼å®¹ä»¥å‰çš„ä»£ç¢¼ï¼Œ<code>typeof null</code> å‚³å› <code>object</code> å°±æ²’æ³•æ”¹è®Šäº†ï¼Œæ‰€ä»¥æ˜¯ä¸€å€‹è¬å¹´ Bugã€‚</p>\n<p>æˆ‘å€‘å¯ä»¥åˆ©ç”¨ <code>null</code> æœƒè¢« <code>typeof</code> æª¢æ¸¬ç‚º <code>object</code> ä¸¦ä¸”æœƒè½‰ç‚º <code>false</code> çš„çµæœä¾†é©—è­‰å€¼æ˜¯å¦ç‚º <code>nullã€‚</code></p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>a <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">typeof</span> a <span class=\"token operator\">===</span> <span class=\"token string\">\"object\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"null\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre><h2 id=\"éåŒæ­¥è™•ç†\">éåŒæ­¥è™•ç†</h2>\n<p>ç”±æ–¼ JavaScript æ˜¯å–®åŸ·è¡Œç·’ï¼ˆsingle-threadedï¼‰çš„åŒæ­¥ï¼ˆsynchronousï¼‰ç¨‹å¼èªè¨€ï¼Œåœ¨åŸ·è¡Œç¨‹å¼æ™‚éƒ½æ˜¯ä»¥æœ€å¾Œçµæœä¸­ç”±ä¸Šè‡³ä¸‹çš„é †åºå»æ“ä½œï¼Œä¸¦ä¸”ä¸€æ¬¡åªèƒ½è™•ç†ä¸€ä»¶äº‹ï¼Œå¦‚æœæˆ‘å€‘ä¸­é€”éœ€è¦åšä¸€å€‹ä¸å½±éŸ¿æ•´é«”å¾ŒçºŒæ“ä½œï¼Œä½†æœƒéœ€è¦éå¸¸ä¹…æ™‚é–“çš„äº‹æƒ…ï¼ŒJavaScript å°±æœƒç›´æ¥å¡æ­»åœ¨é€™é‚Šå¥½ä¸€æ®µæ™‚é–“ï¼ˆé€ æˆé˜»å¡ï¼blocking å•é¡Œï¼‰ï¼Œå› æ­¤æœ‰ç”±ç€è¦½å™¨è¨­è¨ˆéåŒæ­¥ï¼ˆasynchronousï¼‰çš„ç›¸é—œè™•ç†æ›¿æˆ‘å€‘è§£æ±ºé€™å€‹å•é¡Œã€‚</p>\n<p>ä¸Šé¢æåˆ° JavaScript æ˜¯å–®åŸ·è¡Œç·’ï¼Œéå¸¸æ¦‚ç•¥æ€§åœ°ä¾†èªªï¼ŒJavaScript è™•ç†éåŒæ­¥çš„æ–¹å¼æ˜¯ï¼Œæœ‰ä¸€å€‹ <code>call stack</code> å­˜æ”¾<strong>æ­£åœ¨åŸ·è¡Œçš„å·¥ä½œ</strong>ï¼Œä¸€å€‹ <code>task queue</code>ï¼ˆäº¦ç¨± <code>job queue</code>ã€<code>event queue</code> æˆ– <code>callback queue</code>ï¼‰å­˜æ”¾<strong>éœ€è¦ç­‰å¾…çš„éåŒæ­¥å·¥ä½œ</strong>ï¼Œä»¥åŠç€è¦½å™¨æ‰€æä¾› <code>Web APIs</code> å°ˆé–€ç”¨æ–¼è™•ç† stack ä¸­çš„éåŒæ­¥å·¥ä½œï¼Œä¾‹å¦‚å¸¸è¦‹çš„ <code>setTimeout</code> æˆ–æ˜¯èˆ‡ API ç´¢å–è³‡æ–™ç­‰ç­‰ã€‚</p>\n<p><code>Web APIs</code> æœƒå°‡å…¶ç§»å‹•åˆ° <code>task queue</code> è£¡ä¹‹å¾Œï¼Œç¹¼çºŒåŸ·è¡Œä¸‹ä¸€å€‹å·¥ä½œï¼Œç•¶ <code>call stack</code> è£¡çš„å·¥ä½œéƒ½åŸ·è¡Œå®Œç•¢å¾Œï¼Œæ‰æœƒé–‹å§‹å°‡ <code>task queue</code> è£¡çš„å·¥ä½œç§»ä¸Šä¾†ç¹¼çºŒè™•ç†ï¼Œè€Œé€™å€‹ã€Œç›£çœ‹ call stack æ˜¯å¦ç‚ºç©ºï¼åŸ·è¡Œå®Œç•¢ï¼Œè‹¥æ˜¯ï¼Œå‰‡ä¸Ÿ callback queue çš„å·¥ä½œé€²å»ã€çš„è¡Œç‚ºç¨±ç‚º <code>event loop</code>ã€‚</p>\n<pre class=\"language-mermaid\"><code class=\"language-mermaid\">flowchart TD\n    subgraph CallStack=åŸ·è¡Œä¸­\n    CST0[éåŒæ­¥å·¥ä½œ]-.->CST1\n    CST1[åŒæ­¥å·¥ä½œ]-.->CST2\n    CST2[åŒæ­¥å·¥ä½œ]\n    end\n\n    subgraph WebAPIs\n    WA0[setTimeout]\n    WA1[AJAX]\n    WA2[Events]\n    end\n\n    subgraph TaskQueue=å¾…åŸ·è¡Œ\n    TQT0[éåŒæ­¥å·¥ä½œ]\n    TQT1[éåŒæ­¥å·¥ä½œ]-.->TQT0\n    TQT2[éåŒæ­¥å·¥ä½œ]-.->TQT1\n    end\n\n    CallStack=åŸ·è¡Œä¸­--è™•ç†éåŒæ­¥å·¥ä½œ-->WebAPIs\n    WebAPIs--è™•ç†å®Œå¾Œæœƒä¸Ÿåˆ° Task Queue å»-->TaskQueue=å¾…åŸ·è¡Œ\n    TQT0 --ç•¶ Call Stack å·¥ä½œå…¨éƒ¨çµæŸå¾Œæ‰ä¸Ÿä¸Šå»--> CallStack=åŸ·è¡Œä¸­</code></pre><p>è€Œé—œæ–¼ <code>event loop</code> çš„è©³ç´°è¬›è§£ï¼Œæœ€å¤šäººæ¨è–¦çš„å°±æ˜¯ç”± Phillip Robert åœ¨ JSConf ä¸Šè§£èªªçš„é€™æ”¯å½±ç‰‡äº†ã€‚</p>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/8aGhZQkoFbQ\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://blog.techbridge.cc/2019/10/05/javascript-async-sync-and-callback/\">JavaScript ä¸­çš„åŒæ­¥èˆ‡éåŒæ­¥ï¼ˆä¸Šï¼‰ï¼šå…ˆæˆç‚º callback å¤§å¸«å§ï¼</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://5xruby.tw/posts/how-js-synchronous-works/\">ç„¡ç—›ç†è§£ JS | éåŒæ­¥æ€éº¼é‹ä½œï¼Ÿï½œå°ˆæ¬„æ–‡ç« ï½œäº”å€ç´…å¯¶çŸ³</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://pjchender.blogspot.com/2017/08/javascript-learn-event-loop-stack-queue.html\">[ç­†è¨˜] ç†è§£ JavaScript ä¸­çš„äº‹ä»¶å¾ªç’°ã€å †ç–Šã€ä½‡åˆ—å’Œä½µç™¼æ¨¡å¼ï¼ˆLearn event loop, stack, queue, and concurrency mode of JavaScript in depthï¼‰ ~ PJCHENder&lt;br&gt;é‚£äº›æ²’å‘Šè¨´ä½ çš„å°ç´°ç¯€</a></li>\n</ul>\n<h3 id=\"callback\">Callback</h3>\n<p>ä¸Šé¢å¾ˆæ¦‚ç•¥åœ°åªè¬›äº† <code>Web APIs</code> æœƒè² è²¬è™•ç†ï¼Œè€Œ <code>callback</code> æ˜¯è£¡é ­ä¸€ç¨®æœ€å¸¸è¦‹çš„æ¦‚å¿µï¼Œç•¶æˆ‘å€‘æœ‰éœ€è¦æ¥åœ¨éåŒæ­¥è™•ç†å¾Œé¢åšçš„äº‹æƒ…ï¼Œä¾‹å¦‚ <code>setTimeout</code> åªæœ‰ç­‰å¾…æ™‚é–“çš„éƒ¨ä»½æ˜¯éåŒæ­¥ã€AJAX åªæœ‰å–å¾—è³‡æ–™çš„éƒ¨ä»½æ˜¯éåŒæ­¥ï¼Œç•¶æ™‚é–“åˆ°äº†ã€è³‡æ–™å–å¾—äº†ä¹‹å¾Œï¼Œæ¥ä¸‹ä¾†çš„è¡Œç‚ºä»ç„¶æ˜¯åŒæ­¥çš„ï¼Œå°±è¦å†å¯«åœ¨ä¸€å€‹ function è£¡ï¼ŒåŒ…åœ¨éåŒæ­¥çš„è¡Œç‚ºè£¡é¢ï¼Œç›´åˆ°ç›¸é—œçš„éåŒæ­¥è¡Œç‚ºçµæŸå¾Œï¼Œå†æ¥è‘—åŸ·è¡Œé€™å€‹ function çš„è¡Œç‚ºï¼Œé€™ç¨® function å°±ç¨±ç‚º <code>callback function</code>ã€‚</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// callback function æœƒåŒ…åœ¨éåŒæ­¥è¡Œç‚ºè£¡</span>\n<span class=\"token comment\">// ç•¶éåŒæ­¥éƒ¨ä»½è™•ç†å®Œå¾Œæ‰é–‹å§‹åŸ·è¡Œ</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">addAsync</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num1<span class=\"token punctuation\">,</span> num2<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> $<span class=\"token punctuation\">.</span><span class=\"token function\">getJSON</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"https://example.com\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      num1<span class=\"token operator\">:</span> num1<span class=\"token punctuation\">,</span>\n      num2<span class=\"token operator\">:</span> num2<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    callback\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">addAsync</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">success</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> success<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><p>ä½†ç•¶æˆ‘å€‘æœ‰éœ€è¦ä¸€é€£ä¸²ç›¸é—œçš„éåŒæ­¥è™•ç†ï¼Œå¤šæ¬¡å‘¼å« callback function æœƒé€ æˆèªæ³•å…§åµŒï¼Œä½¿å¾—ç¨‹å¼ç¢¼é›£ä»¥é–±è®€å’Œç¶­è­·ï¼Œä¹Ÿå°±æ˜¯æ‰€è¬‚çš„ callback hellï¼š</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> floppy <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"floppy\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ä¸æ–·å±¤ç–Šçš„ callback function å°è‡´é›£ä»¥é–±è®€å’Œç†è§£</span>\nfloppy<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"disk\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  floppy<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"disk\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    floppy<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"disk\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      floppy<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"disk\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        floppy<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"disk\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          floppy<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"disk\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            floppy<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"disk\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              floppy<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"disk\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">// do something...</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"promises\">Promises</h3>\n<p>ç‚ºäº†è§£æ±º callback hell çš„å•é¡Œï¼ŒES2015 å¯¦ä½œäº† <code>Promise API</code> æä¾›ä¸åŒçš„éåŒæ­¥è™•ç†æ–¹å¼ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ <code>.then</code> å°‡åŸæœ¬ä¸æ–·å±¤ç–Šçš„é€£çºŒè¡Œç‚ºï¼Œæ”¹å¯«æˆæ®µè½ä¸²æ¥å¼çš„å¯«æ³•ï¼Œé›–ç„¶é—œä¿‚ä¸Šä»ç„¶æ˜¯æ¥é€£è™•ç†ï¼Œåœ¨æ’°å¯«å’Œé–±è®€ä¸Šæœ‰äº†å¤§å¹…çš„å·®ç•°ã€‚</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">promiseFn</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num<span class=\"token punctuation\">,</span> time <span class=\"token operator\">=</span> <span class=\"token number\">500</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      num <span class=\"token operator\">?</span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>num<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, æˆåŠŸ</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å¤±æ•—\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">promiseFn</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">promiseFn</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><p><code>Promise</code> æœƒå¸¶å…¥ <code>resolve</code> å’Œ <code>reject</code> å…©å€‹ callback functionï¼š</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// asynchronous action here</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>success<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// resolve å›å‚³æˆåŠŸæ™‚çš„å€¼</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>success_value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// reject å›å‚³å¤±æ•—æ™‚çš„å€¼</span>\n  <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>fail_value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><p><code>Promise</code> æœ‰å››ç¨®ç‹€æ…‹ï¼š</p>\n<ol>\n<li><code>pending</code>ï¼ˆæ“±ç½®ï¼‰ï¼šåˆå§‹ç‹€æ…‹ï¼Œæ“ä½œæœªé–‹å§‹åŸ·è¡Œ</li>\n<li><code>fulfilled</code>ï¼ˆå¯¦ç¾ï¼‰ï¼šæ“ä½œæˆåŠŸå®Œæˆ</li>\n<li><code>rejected</code>ï¼ˆæ‹’çµ•ï¼‰ï¼šæ“ä½œå¤±æ•—</li>\n<li><code>settled</code>ï¼ˆè§£æ±ºï¼‰ï¼šæ“ä½œå·²çµæŸ</li>\n</ol>\n<p>ç•¶åŒæ­¥æ“ä½œå®Œæˆå¾Œï¼Œ<code>resolve</code> æœƒè§¸ç™¼ fulfilledï¼ŒåŸ·è¡Œ <code>.then</code> ä¹‹å¾Œçš„è¡Œç‚ºï¼Œå¤±æ•—æ™‚å‰‡æœƒç”± <code>reject</code> è§¸ç™¼ rejectedï¼ŒåŸ·è¡Œ <code>.catch</code> ä¹‹å¾Œçš„è¡Œç‚ºï¼Œè€Œé€™å…©å€‹ callback function ä¹Ÿæ˜¯å›å‚³ promiseã€‚</p>\n<p><code>Promise</code> ä¹Ÿå¯ä»¥ç›´æ¥å‘¼å« <code>resolve</code> æ¥å—æŸå€‹å€¼æˆ–æ“ä½œï¼Œä¾‹å¦‚å¿…å®šæœƒå¦‚é æœŸçš„è¡Œç‚ºï¼Œæˆ–æ˜¯ä¾†è‡ªä¸åŒ Promise API çš„ promiseï¼Œäº¦å¯å‘¼ä½œ <code>reject</code> ç”¨æ–¼åµéŒ¯æˆ–ä¿æŒä¸€è‡´æ€§æ™‚ï¼Œæ‹’çµ•æŸå€‹å€¼æˆ–æ“ä½œã€‚</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\">Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>lastStep<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><p>å¦å¤–é‚„æœ‰å…©å€‹æ–¹æ³• <code>.race</code> å’Œ <code>.all</code> å¯ä»¥ä½¿ç”¨ï¼Œé€™å…©è€…éƒ½æ˜¯å‚³å…¥ä¸€å€‹é™£åˆ—ï¼Œ<code>.race</code> æ˜¯å‚³å…¥é™£åˆ—ä¸­ä»»ä½•ä¸€å€‹ promise ç‰©ä»¶è§£æ±ºä¹‹å¾Œï¼Œå°±æœƒå¾€ä¸‹åŸ·è¡Œï¼›<code>.all</code> å‰‡æ˜¯è¦å‚³å…¥é™£åˆ—ä¸­çš„æ‰€æœ‰ promise ç‰©ä»¶éƒ½è§£æ±ºæ‰æœƒå¾€ä¸‹åŸ·è¡Œã€‚</p>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://iamian.cc/promise/\">Javascript Promise example ç°¡æ˜“å¯¦ä½œæ¨¡æ“¬ | Ian Chu</a></li>\n</ul>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> p1 <span class=\"token operator\">=</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> p2 <span class=\"token operator\">=</span> <span class=\"token number\">1337</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> p3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>p1<span class=\"token punctuation\">,</span> p2<span class=\"token punctuation\">,</span> p3<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [3, 1337, \"foo\"]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"async--await\">Async / Await</h3>\n<ul>\n<li>æ–¼ ES7 æ–°å¢</li>\n<li>æ¬²ä½¿ä¸€ function å›å‚³ Promiseï¼Œéœ€æ–¼è©² function å‰åŠ ä¸Š <code>async</code></li>\n<li>ä½¿ç”¨ Promise æˆ– function å›å‚³çš„ Promise æ™‚éœ€ä½¿ç”¨ <code>await</code>\n<br>â”” å¦‚ <code>let phone = await willGetNewPhone</code> æˆ– <code>let message = await showOff(phone)</code></li>\n<li>å¯æ–¼å‡½å¼å…§ä½¿ç”¨ <code>try {} catch (error) {}</code> æ””æˆªæœªé æœŸè¡Œç‚ºæˆ–éŒ¯èª¤è¨Šæ¯</li>\n</ul>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> data1 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promiseFn</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> data2 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promiseFn</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data1<span class=\"token punctuation\">,</span> data2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"rxjs-observables\">RxJS (Observables)</h3>\n<ul>\n<li><p><a target=\"_blank\" rel=\"nofollow\" href=\"https://blog.techbridge.cc/2017/12/08/rxjs/\">å¸Œæœ›æ˜¯æœ€æ·ºé¡¯æ˜“æ‡‚çš„ RxJS æ•™å­¸</a></p>\n</li>\n<li><p><a target=\"_blank\" rel=\"nofollow\" href=\"https://blog.jerry-hong.com/series/rxjs\">30 å¤©ç²¾é€š RxJS</a></p>\n</li>\n<li><p>å¯ä»¥è¢«å–æ¶ˆ</p>\n</li>\n<li><p>éœ€è¦æ™‚æ‰åŸ·è¡Œ</p>\n</li>\n</ul>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> Observable <span class=\"token operator\">=</span> Rx<span class=\"token punctuation\">.</span>Observable<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> resultA<span class=\"token punctuation\">,</span> resultB<span class=\"token punctuation\">,</span> resultC<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">addAsync</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num1<span class=\"token punctuation\">,</span> num2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> promise <span class=\"token operator\">=</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://example.com?num1=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>num1<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&amp;num2=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>num2<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> x<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> Observable<span class=\"token punctuation\">.</span><span class=\"token function\">fromPromise</span><span class=\"token punctuation\">(</span>promise<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">addAsync</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">do</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>resultA <span class=\"token operator\">=</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">flatMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">addAsync</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">do</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>resultB <span class=\"token operator\">=</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">flatMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">addAsync</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">do</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>resultC <span class=\"token operator\">=</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"total\"</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>resultA<span class=\"token punctuation\">,</span> resultB<span class=\"token punctuation\">,</span> resultC<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><ul>\n<li><code>Observable.fromPromise</code> æœƒå°‡ Promise è½‰æ›æˆ observable streamã€‚</li>\n<li><code>.do</code> å’Œ .<code>flatMap</code> æ˜¯ Observable çš„é‹ç®—å­ã€‚</li>\n</ul>\n<h2 id=\"ajax\">AJAX</h2>\n<p>åœ¨è¬›åˆ°éåŒæ­¥è™•ç†æ™‚ï¼Œæœƒæœ‰å…©å€‹ç¶“å¸¸å‡ºç¾çš„ç›¸é—œè©å½™â€”â€”ã€ŒRESTã€å’Œã€ŒAJAXã€ï¼Œé€™å…©å€‹åè©å…¶å¯¦éƒ½æ˜¯æŠ€è¡“æ¦‚å¿µçš„ç¸½ç¨±ã€‚</p>\n<p>RESTï¼ˆRepresentational State Transferï¼‰æ˜¯ä¸€ç¨®ç¶²è·¯æ¶æ§‹çš„è¨­è¨ˆæ¦‚å¿µï¼Œå®šç¾©äº¤æ›è³‡è¨Šæ™‚éœ€è¦çš„å…·é«”ç‹€æ…‹ï¼Œä¾‹å¦‚çµ±ä¸€ä»‹é¢ã€æ‰€æœ‰è³‡æºéƒ½å…·æœ‰å”¯ä¸€çš„ URIã€å¯ä»¥é€éè¶…é€£çµå½¼æ­¤é€£æ¥ã€ä¸å…·æœ‰ç‹€æ…‹ï¼Œæ¯æ¬¡çš„äº’å‹•éƒ½åœ¨ä¸€æ¬¡è£¡å®Œçµï¼ŒRESTful API å°±æ˜¯ç¬¦åˆé€™ç¨®è¨­è¨ˆæ€æƒ³çš„ APIã€‚</p>\n<p>AJAXï¼ˆAsynchronous JavaScript and XMLï¼‰å‰‡æ˜¯æ³›æŒ‡å¦‚ä½•é€é JS å–å¾—æˆ–å‚³éå»¶ä¼¸çš„è³‡æ–™ï¼ˆå³ XMLï¼ŒExtensible Mark Languageï¼‰ï¼Œä¸¦åæ‡‰åˆ°ç¶²é ä¸Šçš„æŠ€è¡“æ¦‚å¿µï¼Œå¾ŒçºŒæåŠçš„ <code>XMLHttpRequest</code> ç‰©ä»¶ã€jQuery è£¡çš„ <code>.ajax</code> functionã€Fetch å’Œ axios éƒ½æ˜¯ç¨® AJAX æŠ€è¡“ã€‚</p>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://qiita.com/doriven/items/503fdc6de9bc0e725334\">Native ãª JavaScript ã§ Fetch API ã‚’åˆ©ç”¨ã— Ajax ã‚’è¡Œã†</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://qiita.com/katsunory/items/9bf9ee49ee5c08bf2b3d\">Javascript ã® Ajax ã«ã¤ã„ã¦ã®åŸºæœ¬ã¾ã¨ã‚ - Qiita</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://jzchangmark.wordpress.com/2016/06/12/%E9%80%8F%E9%81%8E-curl%E3%80%81python%E3%80%81postman-%E4%BE%86-request-api/\">é€é curlã€Pythonã€Postman ä¾† Request API - ğŸ´ çš„å­¸ç¿’ç­†è¨˜</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://realdennis.medium.com/%E4%B8%80%E8%B5%B7%E4%BE%86%E6%8A%8A%E7%85%A9%E4%BA%BA-xmlhttprequest-%E8%AE%8A%E6%88%90-fetch-%E6%80%8E%E9%BA%BC%E6%A8%A3-8657f2854894\">ä¸€èµ·ä¾†æŠŠç…©äºº XMLHttpRequest è®Šæˆ Fetch æ€éº¼æ¨£ï¼Ÿ</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://eyesofkids.gitbooks.io/javascript-start-from-es6/content/part4/ajax_fetch.html\">AJAX èˆ‡ Fetch API Â· å¾ ES6 é–‹å§‹çš„ JavaScript å­¸ç¿’ç”Ÿæ´»</a></li>\n</ul>\n<h3 id=\"1-xmlhttprequest\">1. XMLHttpRequest</h3>\n<ul>\n<li>æ–¼ 2006 å¹´æ­£å¼åˆ—å…¥ W3C æ¨™æº–ä¸­</li>\n<li>é›£ä»¥é–±è®€èˆ‡æ’°å¯«</li>\n</ul>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".result\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">reqOnload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> email <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>results<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">;</span>\n  result<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> email<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">reqError</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nrequest<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"get\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"https://randomuser.me/api/\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nrequest<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nrequest<span class=\"token punctuation\">.</span>onload <span class=\"token operator\">=</span> reqOnload<span class=\"token punctuation\">;</span>\nrequest<span class=\"token punctuation\">.</span>onerror <span class=\"token operator\">=</span> reqError<span class=\"token punctuation\">;</span></code></pre><h3 id=\"2-jqueryajax\">2. jQuery.ajax()</h3>\n<ul>\n<li>åŸºæ–¼ XHR é–‹ç™¼ï¼Œç„¶è€Œ XHR æ¶æ§‹ä¸æ¸…æ™°ï¼Œä¸¦å·²æœ‰æ›¿ä»£æ–¹æ¡ˆ</li>\n<li>jQuery æ•´é«”é …ç›®å¤ªå¤§ï¼Œæ•ˆç›Šä½è½</li>\n</ul>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".result\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n$<span class=\"token punctuation\">.</span><span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  url<span class=\"token operator\">:</span> <span class=\"token string\">\"https://randomuser.me/api/\"</span><span class=\"token punctuation\">,</span>\n  dataType<span class=\"token operator\">:</span> <span class=\"token string\">\"json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">success</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span><span class=\"token function\">html</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>results<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"3-fetch\">3. Fetch</h3>\n<ul>\n<li>è‡ª ES6 èµ·æä¾›çš„æ–¹å¼</li>\n<li>æ¦‚å¿µç›¸è¿‘ jQuery çš„ <code>$.ajax</code></li>\n<li>ä½¿ç”¨ ES6 çš„ Promise é€²è¡Œå›å‚³ï¼Œå›å‚³ <code>ReadableStream</code> ç‰©ä»¶</li>\n<li>éœ€æ­é… then èˆ‡ catch é€²è¡Œè™•ç†</li>\n<li>æœƒå°‡ 400ï¼Œ500 éƒ½ç•¶åšè«‹æ±‚æˆåŠŸï¼Œéœ€è¦å¦å¤–åšè™•ç†</li>\n<li>é è¨­ä¸å¸¶ cookie</li>\n<li>ä¸æ”¯æ´ timeout handle</li>\n<li>ä¸æ”¯æ´ç›£æ¸¬è«‹æ±‚çš„é€²åº¦</li>\n<li>è¼ƒæ—©çš„ç€è¦½å™¨ä¸¦ä¸æ”¯æ´ï¼ˆIE11 ä»¥ä¸‹ä¸æ”¯æ´ï¼‰</li>\n</ul>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".result\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://randomuser.me/api/\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> email <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>results<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">;</span>\n    result<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> email<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"4-axios\">4. Axios</h3>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://eugenesu0515.github.io/Blog/2018/06/25/Vue%E5%A5%97%E4%BB%B6%E4%BB%8B%E7%B4%B9%EF%BC%9Aaxios/\">Vue å¥—ä»¶ä»‹ç´¹ï¼šaxios - Eugene Su</a></li>\n<li>Vue.js ä½œè€…æ¨è–¦ä½¿ç”¨</li>\n<li>ä½¿ç”¨éœ€å¼•å…¥ <a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/axios/axios\">axios</a></li>\n<li>æ¦‚å¿µç›¸è¿‘ jQuery çš„ <code>$.ajax</code></li>\n<li>å¯ä»¥åœ¨ node.js ä¸­ä½¿ç”¨</li>\n<li>æ”¯æ´é˜² CSRF</li>\n<li>æä¾›ä½µç™¼è«‹æ±‚</li>\n<li>ç›¸ç•¶è¼•é‡ï¼Œç´„ 13kb</li>\n</ul>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".result\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\naxios\n  <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://randomuser.me/api/\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> data <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n    result<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>results<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">finally</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Execued\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h2 id=\"es6-åŠ é€²çš„æ–°åŠŸèƒ½\">ES6 åŠ é€²çš„æ–°åŠŸèƒ½</h2>\n<h3 id=\"1-default-parameters\">1. Default Parameters</h3>\n<p>æ›´å¿«é€Ÿçš„ function åƒæ•¸çµ¦å®šé è¨­å€¼ï¼š</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">link</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>height <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span> color <span class=\"token operator\">=</span> <span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span> url <span class=\"token operator\">=</span> <span class=\"token string\">\"https://example.com\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"2-template-literals\">2. Template Literals</h3>\n<p>å…è¨±é€éèªæ³• <code>${val}</code> å°‡è®Šæ•¸åµŒå…¥è‡³å­—ä¸²ä¸­ï¼š</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Your name is </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>first<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>last<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"3-multi-line-strings\">3. Multi-line Strings</h3>\n<p>å…è¨±ä½¿ç”¨ `ï¼ˆbackticksï¼‰æ¥å—å¤šè¡Œå­—ä¸²æŒ‡å®šï¼š</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">first line\nsecond line</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"4-destructing-assignment\">4. Destructing Assignment</h3>\n<pre class=\"language-javascript\"><code class=\"language-javascript\">object<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> â€¦rest<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">// 1</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">// 2</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>rest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [3, 4, 5]</span>\n\n<span class=\"token keyword\">var</span> o <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>p<span class=\"token operator\">:</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span> q<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span>p<span class=\"token punctuation\">,</span> q<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> o<span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 42</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span></code></pre><h3 id=\"5-object-literals\">5. Object Literals</h3>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">getCar</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">make<span class=\"token punctuation\">,</span> model<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">// with property value shorthand</span>\n  <span class=\"token comment\">// syntax, you can omit the property</span>\n  <span class=\"token comment\">// value if key matches variable</span>\n  <span class=\"token comment\">// name</span>\n  make<span class=\"token punctuation\">,</span> <span class=\"token comment\">// same as make: make</span>\n  model<span class=\"token punctuation\">,</span> <span class=\"token comment\">// same as</span>\n  model<span class=\"token operator\">:</span> model\n  value<span class=\"token punctuation\">,</span> <span class=\"token comment\">// same as value: value</span>\n  <span class=\"token comment\">// computed values now work with</span>\n  <span class=\"token comment\">// object literals</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">'make'</span> <span class=\"token operator\">+</span> make<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// Method definition shorthand syntax</span>\n  <span class=\"token comment\">// omits `function` keyword &amp; colon</span>\n  <span class=\"token function\">depreciate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">-=</span> <span class=\"token number\">2500</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> car <span class=\"token operator\">=</span> <span class=\"token function\">getCar</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Kia'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Sorento'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"6-arrow-function\">6. Arrow Function</h3>\n<p>ç®­é ­å‡½å¼äº¦æœƒæ›´æ”¹ç‰©ä»¶è£¡çš„ this æŒ‡å‘è¡Œç‚ºï¼Œå¾åŸæœ¬çš„æŒ‡å‘å‘¼å«è€…æ”¹ç‚ºæŒ‡å‘å…¶æ‰€å±¬ç‰©ä»¶</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">(</span><span class=\"token parameter\">param1<span class=\"token punctuation\">,</span> param2<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">,</span> paramN</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> statements <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">(</span><span class=\"token parameter\">param1<span class=\"token punctuation\">,</span> param2<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">,</span> paramN</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> expression\n<span class=\"token comment\">// ç­‰æ–¼ : => { return expression; }</span>\n\n<span class=\"token comment\">// åªæœ‰ä¸€å€‹åƒæ•¸æ™‚, æ‹¬è™Ÿæ‰èƒ½ä¸åŠ :</span>\n<span class=\"token punctuation\">(</span><span class=\"token parameter\">singleParam</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> statements <span class=\"token punctuation\">}</span>\n<span class=\"token parameter\">singleParam</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> statements <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// è‹¥ç„¡åƒæ•¸, å°±ä¸€å®šè¦åŠ æ‹¬è™Ÿ:</span>\n<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> statements <span class=\"token punctuation\">}</span></code></pre><h3 id=\"7-promise\">7. Promise</h3>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">wait1000</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">wait1000</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Yay!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">wait1000</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Wheeyee!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"8-let--const-block-scoped\">8. Let &amp; Const, Block-Scoped</h3>\n<ul>\n<li><code>let</code> å’Œ <code>const</code> çš„ä½œç”¨åŸŸå¾ä¹‹å‰ <code>var</code> çš„å‡½å¼è®Šæˆäº†é›¢æ­¤è®Šæ•¸æœ€è¿‘çš„ <code>{}</code> å€å¡Šç¯„åœå…§</li>\n<li><code>let</code> ä¸å¯é‡è¦†å®£å‘Šï¼ŒåŸ·è¡Œæ™‚æœƒåå‡ºéŒ¯èª¤</li>\n<li><code>const</code> å®£å‘Šæ™‚å³é ˆåˆå§‹åŒ–ï¼Œä¸¦ä¸”ä¸å¯ä¿®æ”¹</li>\n</ul>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">letExample</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> letValue <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"inside block\"</span><span class=\"token punctuation\">,</span> letValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// [SyntaxError] redeclaration of letValue would be a SyntaxError</span>\n    <span class=\"token keyword\">let</span> letValue <span class=\"token operator\">=</span> <span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// [SyntaxError] Accessing letValue is a Reference Error because it</span>\n    <span class=\"token comment\">// was defined w/in if-block</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>letValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// if we get here, it means that the JS engine didn't</span>\n    <span class=\"token comment\">// throw an exception, which means that the engine</span>\n    <span class=\"token comment\">// (or transpiled code) did not faithfully reproduce</span>\n    <span class=\"token comment\">// how let should work</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"let not faithfully handled\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// e is a ReferenceError</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"letValue not accessible\"</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">letExample</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"9-classes\">9. Classes</h3>\n<p>ES6 é€é prototype å’Œ function å¯¦ä½œå‡ºäº†é¡ inheritance çµæ§‹çš„ classï¼Œä½†ä»å’Œå‚³çµ± Javaã€Python çš„ class æœ‰äº›å·®åˆ¥</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Cat</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">speak</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">' makes a noise.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Lion</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Cat</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">speak</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">speak</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> ' roars<span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre><h3 id=\"10-module\">10. Module</h3>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Export</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">var</span> port <span class=\"token operator\">=</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getAccounts</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Import</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> port<span class=\"token punctuation\">,</span> getAccounts <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"module\"</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h2 id=\"mutationobserver\">MutationObserver</h2>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://blog.fundebug.com/2019/01/10/understand-mutationobserver/\">JavaScript æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼šä½¿ç”¨ MutationObserver è·Ÿè¸ª DOM çš„å˜åŒ–</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://blog.sessionstack.com/how-javascript-works-tracking-changes-in-the-dom-using-mutationobserver-86adc7446401\">How JavaScript works: tracking changes in the DOM using MutationObserver | by Alexander Zlatkov | SessionStack Blog</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://zh.javascript.info/mutation-observer\">DOM å˜åŠ¨è§‚å¯Ÿå™¨ï¼ˆMutation observerï¼‰</a></li>\n</ul>\n<h3 id=\"ç°¡ä»‹\">ç°¡ä»‹</h3>\n<p><code>MutationObserver</code> æœƒåœ¨æŒ‡å®šçš„ DOM å‡ºç¾è®ŠåŒ–ï¼Œä¾‹å¦‚å¢æ¸›ç¯€é»ã€è®Šæ›´å±¬æ€§ã€ä¿®æ”¹æ–‡å­—æ™‚å›å‚³é€šçŸ¥ã€‚</p>\n<h3 id=\"ä½¿ç”¨\">ä½¿ç”¨</h3>\n<p>æƒ³è¦ä½¿ç”¨ <code>MutationObserver</code> ä¹‹å‰ï¼Œæˆ‘å€‘éœ€è¦å…ˆå»ºç«‹ä¸€å€‹ instanceï¼Œä¸¦ä¸”å‚³å…¥ä¸€å€‹ function è®“å®ƒæ¯æ¬¡åµæ¸¬åˆ°è®ŠåŒ–æ™‚èª¿ç”¨ã€‚</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> mutationObserver <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MutationObserver</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">mutations</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  mutations<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">mutation</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>mutation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><p>å»ºç«‹å¥½çš„ç‰©ä»¶æœ‰ä¸‰å€‹ methodsï¼š</p>\n<ul>\n<li><code>observe</code>ï¼šé–‹å§‹ç›£è½è®ŠåŒ–ï¼Œéœ€è¦å…©å€‹åƒæ•¸â€”â€” ä½ æƒ³è§€æ¸¬çš„ DOM ç¯€é»å’Œè¨­å®šç”¨çš„ç‰©ä»¶</li>\n<li><code>disconnect</code>ï¼šåœæ­¢ç›£è½è®ŠåŒ–</li>\n<li><code>takeRecords</code>ï¼šå›å‚³ callback å•Ÿå‹•ä¹‹å‰çš„æœ€å¾Œä¸€æ¬¡ä¿®æ”¹</li>\n</ul>\n<p>é€™è£¡æœ‰å€‹é–‹å§‹ç›£è½è®ŠåŒ–çš„ä¾‹å­ï¼š</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Starts listening for changes in the root HTML element of the page.</span>\n<span class=\"token comment\">// ç¬¬ä¸€å€‹å‚³å…¥åƒæ•¸ç‚ºç›£å¯Ÿç›®æ¨™ï¼Œå¯æ”¹ç‚ºå¦‚ document.querySelector(\"body\")</span>\nmutationObserver<span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  attributes<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  characterData<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  childList<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  subtree<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  attributeOldValue<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  characterDataOldValue<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><p>ç•¶æˆ‘å€‘èª¿ç”¨äº† <code>mutationObserver.observe(...)</code> é–‹å§‹ç›£è½ï¼Œç¶²é ä¸Šçš„ DOM å‡ºç¾è®ŠåŒ–æ™‚ï¼Œæˆ‘å€‘å°±èƒ½åœ¨æ§åˆ¶å°è£¡çœ‹åˆ° mutations é™£åˆ—è£¡çš„å„å€‹ <a target=\"_blank\" rel=\"nofollow\" href=\"https://developer.mozilla.org/zh-TW/docs/Web/API/MutationObserver#MutationRecord\">MutationRecord</a> çš„è¨˜éŒ„ã€‚</p>\n<p>ç•¶å·¥ä½œå®Œæˆï¼Œæˆ‘å€‘æƒ³è¦åœæ­¢è§€å¯Ÿ DOMï¼Œå¯ä»¥èª¿ç”¨ç›¸é—œ methodï¼š</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Stops the MutationObserver from listening for changes.</span>\nmutationObserver<span class=\"token punctuation\">.</span><span class=\"token function\">disconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><p>åœ¨ <code>MutationObserver</code> å‡ºç¾ä¹‹å‰ï¼Œäººå€‘ç”¨ä¾†è§€æ¸¬ç¶²é å…ƒä»¶è®ŠåŒ–çš„æ–¹æ³•æœ‰ï¼š</p>\n<ul>\n<li>Polling</li>\n<li>MutationEvents</li>\n<li>CSS animations</li>\n</ul>\n<p>Pollingï¼šæœ€ç°¡å–®ä¹Ÿæœ€ç°¡æ½”çš„æ–¹æ³•ï¼Œä½¿ç”¨ç€è¦½å™¨çš„ <code>setInterval</code> WebAPI å®šæœŸæª¢æŸ¥æ˜¯å¦ç™¼ç”Ÿä»»ä½•è®ŠåŒ–ï¼Œä½†é€™ç¨®æ–¹æ³•æœƒæ˜é¡¯åœ°é™ä½ç¶²è·¯æ‡‰ç”¨ï¼ç¶²ç«™çš„æ•ˆèƒ½ã€‚</p>\n<p>MutationEventsï¼šæ–¼ 2000 å¹´åŠ å…¥çš„ <a target=\"_blank\" rel=\"nofollow\" href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Mutation_events\">Mutation events API</a>ï¼Œç”±æ–¼å®ƒåœ¨æ¯æ¬¡ DOM è®ŠåŒ–éƒ½æœƒè¢«èª¿ç”¨ï¼ŒåŒæ¨£å°è‡´æ•ˆèƒ½å•é¡Œï¼Œç›®å‰ <code>MutationEvents</code> API å·²ç¶“è¢«æ£„ç”¨ã€‚</p>\n<p>CSS animationsï¼šé€™æ˜¯å€‹æœ‰äº›ç‰¹æ€ªç•°çš„æ–¹æ¡ˆï¼ŒåŸºæœ¬ä¸Šçš„æ¦‚å¿µæ˜¯ä¸€å€‹æœ‰ CSS å‹•ç•«çš„å…ƒç´ åŠ é€² DOM ä¸­æ™‚ï¼Œå‹•ç•«é–‹å§‹å°±æœƒè§¸ç™¼ animationstart äº‹ä»¶ï¼Œç•¶æˆ‘å€‘å†å°é€™å€‹äº‹ä»¶åŠ ä¸Š handlerï¼Œå°±èƒ½æŒæ¡å…ƒç´ åŠ é€² DOM ä¸­çš„ç¢ºåˆ‡æ™‚é–“ã€‚</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>container-element<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@keyframes</span> nodeInserted</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">from</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 0.99<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">to</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">#container-element *</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">animation-duration</span><span class=\"token punctuation\">:</span> 0.001s<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">animation-name</span><span class=\"token punctuation\">:</span> nodeInserted<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre><p>éœ€è¦å…ˆæª¢æŸ¥ <code>event.animationName</code> æ˜¯å¦æ˜¯æˆ‘å€‘æ‰€æƒ³è¦çš„å‹•ç•«ã€‚</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">insertionListener</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Making sure that this is the animation we want.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>animationName <span class=\"token operator\">===</span> <span class=\"token string\">\"nodeInserted\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Node has been inserted: \"</span> <span class=\"token operator\">+</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"animationstart\"</span><span class=\"token punctuation\">,</span> insertionListener<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// standard + firefox</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MSAnimationStart\"</span><span class=\"token punctuation\">,</span> insertionListener<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// IE</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"webkitAnimationStart\"</span><span class=\"token punctuation\">,</span> insertionListener<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Chrome + Safari</span></code></pre><p><code>MutationObserver</code> ç›¸è¼ƒé€™äº›æ–¹æ¡ˆæä¾›äº†æ›´å¤šå„ªå‹¢ï¼ŒåŒ…æ‹¬å®ƒæ¶µè“‹äº† DOM ä¸­çš„æ¯ç¨®å¯èƒ½è®ŠåŒ–ï¼Œä»¥åŠåˆ†æ®µå•Ÿå‹•çš„ç‰¹æ€§ï¼Œè®“å®ƒæœ‰æ›´å¥½çš„æ•ˆèƒ½ï¼Œä¸¦ä¸”æ“æœ‰ç›¸ç•¶å„ªç§€çš„æ”¯æ´æ€§ã€‚</p>\n<h2 id=\"intersectionobserver\">IntersectionObserver</h2>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://codepen.io/osublake/embed/6fd214ecd74e7091ec7b609bb0270f97?height=450&amp;slug-hash=6fd214ecd74e7091ec7b609bb0270f97&amp;user=osublake&amp;tab-bar-color=%23222&amp;name=cp_embed_2#result-box\">example</a></li>\n</ul>\n<h3 id=\"ç°¡ä»‹-1\">ç°¡ä»‹</h3>\n<p><code>IntersectionObserver</code> æœƒåœ¨æŒ‡å®šçš„ç›®æ¨™å‡ºç¾åœ¨è§€å¯Ÿå™¨ (window) ä¸­æ™‚ï¼Œæ‰å›å‚³ <code>true</code>ï¼Œ\nä¸åŒæ–¼ jQuery çš„ <code>onscroll</code> æ˜¯åœ¨æ¯æ¬¡æ²å‹•æ™‚éƒ½åŸ·è¡Œä¸€æ¬¡ç›£è½ã€‚</p>\n<h3 id=\"ä½¿ç”¨-1\">ä½¿ç”¨</h3>\n<p><code>let observer = new IntersectionObserver(callback, [option]);</code></p>\n<ul>\n<li><code>callback</code>: è¦åŸ·è¡Œçš„å‹•ä½œå‡½å¼</li>\n</ul>\n<p>callback é è¨­çš„å‚³å…¥åƒæ•¸ç‚ºä¸€é™£åˆ—</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// å”¯è®€è®Šæ•¸ï¼Œç›®æ¨™å…ƒç´ çš„çŸ©å½¢ç¯€é»çš„è³‡è¨Š (IDã€åº§æ¨™ã€é•·å¯¬)</span>\n    boundingClientRect<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// ç›®æ¨™å…ƒç´ çš„å‡ºç¾æ¯”ä¾‹</span>\n    intersectionRation<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// å”¯è®€è®Šæ•¸ï¼Œç›®æ¨™å…ƒç´ èˆ‡è§€å¯Ÿå™¨çš„ç›¸äº¤å€åŸŸ</span>\n    intersectionRect<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// æ˜¯å¦å‡ºç¾æ–¼è§€å¯Ÿå™¨ä¸­</span>\n    isIntersecting<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// è§€å¯Ÿå™¨çš„è³‡è¨Š</span>\n    rootBounds<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// ç›®æ¨™</span>\n    target<span class=\"token operator\">:</span> ç›®æ¨™çš„ <span class=\"token constant\">DOM</span> ç¯€é»\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre><ul>\n<li><code>option</code>: æœ‰ä¸‰å€‹åƒæ•¸å¯èª¿æ•´</li>\n</ul>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  root<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  rootMargin<span class=\"token operator\">:</span> <span class=\"token string\">\"0px 0px 0px 0px\"</span><span class=\"token punctuation\">,</span>\n  threshold<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre><p><code>root</code>: å¯æŒ‡å®šæŸå€‹ç‰¹å®šçš„ element åšç‚ºè§€å¯Ÿå™¨: <code>root: documnet.getElementById(&#39;container&#39;)</code>ï¼Œé è¨­å€¼ç‚º <code>null</code>ï¼Œå³ç›®å‰è§€çœ‹ä¸­çš„è¦–çª—ã€‚\n<code>rootMargin</code>: å››å€‹å€¼ä¾åºç‚ºä¸Šã€å³ã€ä¸‹ã€å·¦ï¼Œå¯æ”¾å¤§æˆ–ç¸®å°çš„è§€å¯Ÿå™¨çš„ç¯„åœï¼Œé è¨­å€¼ç‚º <code>&quot;0px 0px 0px 0px&quot;</code>ã€‚\n<code>threshold</code>: æŒ‡å®šç›®æ¨™å‡ºç¾æ–¼è§€å¯Ÿå™¨å…§çš„ç™¾åˆ†æ¯”ï¼Œåˆ°é”è©²å€¼å¾Œæ‰åŸ·è¡Œ callbackï¼Œå¯æŒ‡å®šå¤šå€‹å€¼å¦‚: <code>[0, 0.25, 0.5, 0.75, 1]</code> æœƒåœ¨ç›®æ¨™å‡ºç¾ 0%ã€25%ã€50%ã€75%ã€100% çš„æ™‚å€™éƒ½åŸ·è¡Œä¸€æ¬¡ callback å‡½å¼ï¼Œé è¨­å€¼ç‚º <code>[0]</code>ï¼Œå³ç›®æ¨™æ¥è§¸åˆ°è§€å¯Ÿå™¨çš„é‚Šç·£ä¾¿è§¸ç™¼ callback å‡½å¼ã€‚</p>\n<p><code>observer.observe(el)</code>\n<code>observer.unobserve(el)</code>\n<code>observer.disconnect()</code></p>\n<h2 id=\"é€²éš\">é€²éš</h2>\n<h3 id=\"whats-this-in-javascript-\">What&#39;s THIS in JavaScript ?</h3>\n<ul>\n<li><code>this</code> æ˜¯ JavaScript çš„ä¸€å€‹é—œéµå­—ã€‚</li>\n<li><code>this</code> æ˜¯ function åŸ·è¡Œæ™‚ï¼Œè‡ªå‹•ç”Ÿæˆçš„ä¸€å€‹å…§éƒ¨ç‰©ä»¶ã€‚</li>\n<li>éš¨è‘— function åŸ·è¡Œå ´åˆçš„ä¸åŒï¼Œ<code>this</code> æ‰€æŒ‡å‘çš„å€¼ï¼Œä¹Ÿæœƒæœ‰æ‰€ä¸åŒã€‚</li>\n<li>åœ¨å¤§å¤šæ•¸çš„æƒ…æ³ä¸‹ï¼Œ<code>this</code> ä»£è¡¨çš„å°±æ˜¯å‘¼å« function çš„ç‰©ä»¶ï¼ˆOwner Object of the functionï¼‰ã€‚\näº¦å³ function åŸ·è¡Œæ™‚æ‰€å±¬çš„ç‰©ä»¶ï¼Œè€Œé function æœ¬èº«</li>\n<li>è„«é›¢ç‰©ä»¶çš„ <code>this</code> åŸºæœ¬ä¸Šæ²’æœ‰ä»»ä½•æ„ç¾©</li>\n<li>æ²’æœ‰æ„ç¾©çš„ <code>this</code> æœƒæ ¹æ“š<strong>åš´æ ¼æ¨¡å¼</strong>ä»¥åŠ<strong>ç’°å¢ƒ</strong>çµ¦ä¸€å€‹é è¨­å€¼</li>\n<li>åš´æ ¼æ¨¡å¼åº•ä¸‹é è¨­å°±æ˜¯ <code>undefined</code>ï¼Œéåš´æ ¼æ¨¡å¼åœ¨ç€è¦½å™¨åº•ä¸‹é è¨­å€¼æ˜¯ <code>window</code>ã€‚</li>\n<li>è¦çœ‹ thisï¼Œå°±çœ‹é€™å€‹å‡½å¼ã€Œæ€éº½ã€è¢«å‘¼å«\nä¾‹å¦‚ <code>addEventListener</code> åº•ä¸‹çš„ <code>this</code> æœƒæ˜¯ã€Œè§¸ç™¼äº‹ä»¶çš„å…ƒç´ ã€\nä½†è£¡é ­çš„ callback function ä¸­çš„ <code>this</code> æœƒå› ç‚º Default Binding è€ŒæŒ‡å‘ <code>window</code></li>\n<li>å¯ä»¥ç”¨ <code>call</code>ã€<code>apply</code> èˆ‡ <code>bind</code> æŒ‡å®š this çš„å€¼\næˆ–æ˜¯ arrow function å¼·åˆ¶ç¶å®š thisã€ä½¿ç”¨ä¸€å€‹è®Šæ•¸å„²å­˜ this ç•¶åšåƒè€ƒå€¼</li>\n</ul>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token string\">\"use strict\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">hello</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"yo\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç¬¬ä¸€å€‹åƒæ•¸å€¼å³ç‚º this</span>\n<span class=\"token function\">hello</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hihihi\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// apply ä»¥ Array çš„æ–¹å¼å‚³é€²åƒæ•¸</span>\n<span class=\"token comment\">// é€™å…©ç¨®æ–¹å¼çš†ç‚ºå‘¼å« function çš„å‡½å¼</span>\n\n<span class=\"token keyword\">const</span> myHello <span class=\"token operator\">=</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"my\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">myHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// bind å‰‡æ˜¯æœƒå›å‚³ä¸€å€‹æ–°çš„ function</span>\n<span class=\"token comment\">// ä¸¦ä¸”åœ¨èª¿ç”¨ bind å¾Œå€¼å°±ä¸æœƒæ”¹è®Šäº†</span></code></pre><ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://kuro.tw/posts/2017/10/12/What-is-THIS-in-JavaScript-%E4%B8%8A/\">What&#39;s THIS in JavaScript ? [ä¸Š]</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://blog.techbridge.cc/2019/02/23/javascript-this/\">æ·ºè«‡ JavaScript é ­è™Ÿé›£é¡Œ thisï¼šçµ•å°ä¸å®Œæ•´ï¼Œä½†ä¿è­‰å¥½æ‡‚</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://ithelp.ithome.com.tw/articles/10193193\">é‡æ–°èªè­˜ JavaScript: Day 20 What&#39;s &quot;THIS&quot; in JavaScript (éµäººç²¾è¯ç‰ˆ)</a></li>\n</ul>\n<h3 id=\"closure\">Closure</h3>\n<p>é–‰åŒ…ï¼ˆClosureï¼‰æ˜¯åˆ©ç”¨è®Šæ•¸ä½œç”¨åŸŸçš„ç‰¹æ€§ï¼ŒåŠ ä¸Šä¸€å±¤ function ä»¥é™åˆ¶å„²å­˜ç’°å¢ƒçš„è®Šæ•¸å€¼ä½œç”¨ç¯„åœï¼Œé¿å…æ±¡æŸ“ global ç’°å¢ƒï¼Œä¸”æ­¤è®Šæ•¸ä¸æœƒå› ç‚º function åŸ·è¡Œå®Œç•¢å¾Œè€Œæ¶ˆå¤±</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// without closure</span>\n<span class=\"token keyword\">var</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">counterTick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">++</span>count<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">counterTick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">counterTick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2</span>\n\n<span class=\"token comment\">// with closure</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">counterTick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">++</span>count<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> counterTick<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// also could be written as arrow function</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">++</span>count<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> countFunc <span class=\"token operator\">=</span> <span class=\"token function\">counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">countFunc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">countFunc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2</span></code></pre><ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://blog.techbridge.cc/2018/12/08/javascript-closure/\">æ‰€æœ‰çš„å‡½å¼éƒ½æ˜¯é–‰åŒ…ï¼šè«‡ JS ä¸­çš„ä½œç”¨åŸŸèˆ‡ Closure</a></li>\n</ul>\n<h3 id=\"hoisting\">Hoisting</h3>\n<p>Hoistingï¼ˆæå‡ï¼‰æ˜¯æŒ‡ä¸€å€‹è®Šæ•¸æˆ–å‡½å¼åœ¨å®£å‘Šå‰å°±è¢«ä½¿ç”¨ï¼ŒJavaScript å°±æœƒåœ¨ä½¿ç”¨ä¹‹å‰å†é€²è¡Œä¸€æ¬¡å®£å‘Šï¼Œè€Œè®Šæ•¸åªæœƒå–®ç´”å®£å‘Šä¸æœƒçµ¦å®šå€¼ï¼Œå› æ­¤åŸ·è¡Œçµæœé€šå¸¸æœƒæ˜¯ <code>undefined</code> ï¼Œå…·é«”ä¸Šå¦‚ä¸‹ä¾‹</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">doSomething</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> x<span class=\"token punctuation\">;</span> <span class=\"token comment\">// æ­¤è¡ŒéåŸæœ¬æ’°å¯«çš„ç¨‹å¼</span>\n  <span class=\"token comment\">// æ˜¯ç”±æ–¼ä¸‹é¢ä½¿ç”¨çš„ x=100 è£¡çš„ x æœªç¶“å®£å‘Š</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è€Œè¢« JavaScript æå‡è‡³åŸ·è¡Œåºçš„å…ˆé ­</span>\n  <span class=\"token comment\">// æ¦‚å¿µä¸Šé¡ä¼¼ç§»å‹•è‡³æ­¤å‡½å¼çš„æœ€ä¸Šæ–¹é€²è¡Œå®£å‘Š</span>\n  <span class=\"token comment\">// å› æ­¤å‡½å¼å…§éƒ¨çš„ console.log æœƒæ˜¯ undefined</span>\n  x <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 150</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1</span></code></pre><p>å‡½å¼å‰‡åˆ†æœ‰å­˜å…¥è®Šæ•¸åŠç›´æ¥å®šç¾©çš„å…©ç¨®å®£å‘Šæ–¹å¼ï¼Œå­˜å…¥è®Šæ•¸çš„å‡½å¼å®£å‘Šç”±æ–¼èˆ‡è®Šæ•¸åŒæ¨£åªæœ‰å®£å‘Šè¢«æå‡ï¼Œå› æ­¤æœƒå‡ºç¾ <code>TypeError</code> éŒ¯èª¤ï¼Œç›´æ¥å®šç¾©çš„å‡½å¼å‰‡æœƒé€£åŒå…§å®¹ä¸€èµ·è¢«æå‡</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">square</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// å‚³å…¥è®Šæ•¸å¼</span>\n<span class=\"token comment\">// åŸ·è¡Œçµæœæœƒç‚º TypeError: square is not a function</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">square</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> number <span class=\"token operator\">*</span> number<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ç›´æ¥å®šç¾©å¼</span>\n<span class=\"token comment\">// åŸ·è¡Œçµæœç‚ºæ­£å¸¸è¼¸å‡º</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">square</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> number <span class=\"token operator\">*</span> number<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre><p>è‹¥æœ‰åŒåçš„å®šç¾©å‡½å¼å’Œè®Šæ•¸ä½¿ç”¨ï¼Œç”±æ–¼å‡½å¼çš„å„ªå…ˆæ¬Šè¼ƒé«˜ï¼ŒåŸ·è¡Œçµæœæœƒæ˜¯å®šç¾©å‡½å¼</p>\n<p><code>let</code> å’Œ <code>const</code> ä¸€æ¨£ä¹Ÿæœ‰ Hoisting è¡Œç‚ºï¼Œä½†é€™å…©ç¨®å®£å‘Šä¸æœƒè¢«åˆå§‹åŒ–æˆ <code>undefined</code> ï¼Œä¸¦ä¸”åœ¨è³¦å€¼ä¹‹å‰å°±å­˜å–é€™å…©ç¨®å®£å‘Šçš„å€¼æ™‚ï¼Œæœƒç›´æ¥æ‹‹å‡ºéŒ¯èª¤</p>\n<p>è€Œç•¶åˆåŠ å…¥ Hoisting è¨­è¨ˆçš„åŸå› æ˜¯ç‚ºäº†é”æˆå‡½å¼ç›¸äº’æ­¸éï¼ˆmutual recursionï¼‰ï¼Œä»¥åŠé¿å…å¿…é ˆä»¥é¡ ML èªè¨€çš„é †åºæ’°å¯«ï¼ˆavoid painful bottom-up ML-like orderï¼‰</p>\n<p>å¯¦éš›é‹ä½œä¸Šæ˜¯ JavaScript æœƒæ–¼åŸ·è¡Œ function æ™‚ç”¢ç”Ÿä¸€å€‹ Execution Contexts åŸ·è¡Œç’°å¢ƒï¼ˆåŒç†äº¦æœ‰ global ECï¼‰ï¼Œå°‡æ‰€æœ‰éœ€è¦çš„è³‡è¨Šå­˜åœ¨è£¡é¢ï¼Œè£¡é ­æœƒæœ‰å€‹å°æ‡‰çš„ Variable Object ç”¨ä»¥å­˜æ”¾å®£å‘Šçš„è®Šæ•¸ã€å‡½å¼å’Œå‚³å…¥çš„è®Šæ•¸ï¼Œåœ¨åŸ·è¡Œçš„æ™‚å€™åˆ° VO è£¡é ­æŸ¥æ‰¾ï¼Œä¸¦ä¾åƒæ•¸ã€å‡½å¼å’Œè®Šæ•¸çš„é †åºæ”¾å…¥å…¶ä¸­</p>\n<p>åƒæ•¸å‚³é€² VO æ™‚ç›´æ¥æ”¾å…¥ï¼Œæ²’æœ‰å€¼çš„è©±æœƒåˆå§‹åŒ–ç‚º <code>undefined</code> ï¼›function å‚³é€² VO æ™‚æ–°å¢ä¸€å±¬æ€§æ”¾å…¥å»ºç«‹ function å®Œå¾Œçš„å›å‚³å€¼ï¼ˆå¯é¡æ¯”ç‚ºæŒ‡å‘æ­¤ function çš„æŒ‡æ¨™ï¼‰ï¼Œå·²æœ‰åŒåå±¬æ€§æ™‚é€²è¡Œè¦†è“‹ï¼›è®Šæ•¸å‚³é€² VO æ™‚æ–°å¢ä¸€å±¬æ€§ä¸¦è³¦å€¼ç‚º <code>undefined</code> ï¼Œå·²æœ‰åŒåå±¬æ€§æ™‚å‰‡ä¸æœƒä¿®æ”¹è©²å€¼</p>\n<p><code>let</code> å’Œ <code>const</code> å¤šåšäº†ä¸€å€‹æª¢æŸ¥ï¼Œçš†æ˜¯åœ¨ã€Œæå‡ä¹‹å¾Œã€å’Œã€Œè³¦å€¼ä¹‹å‰ã€çš„ã€ŒåŸ·è¡ŒæœŸé–“ã€å…§ï¼ˆTemporal Dead Zoneï¼‰è¢«å­˜å–å°±æœƒæ‹‹å‡ºéŒ¯èª¤ï¼Œäº¦å³ Hoisting çš„åŸç†å¯¦è³ªä¸Šæ˜¯åŸ·è¡Œæ™‚åºçš„èª¿å‹•ï¼Œè€Œéç¨‹å¼ç¢¼çš„ç·¨ä¿®</p>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://blog.techbridge.cc/2018/11/10/javascript-hoisting/\">æˆ‘çŸ¥é“ä½ æ‡‚ hoistingï¼Œå¯æ˜¯ä½ äº†è§£åˆ°å¤šæ·±ï¼Ÿ</a></li>\n</ul>\n<h3 id=\"æµ®é»æ•¸è¨ˆç®—\">æµ®é»æ•¸è¨ˆç®—</h3>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://0.30000000000000004.com/\">Floating Point Math</a></li>\n</ul>\n<h3 id=\"typescript\">TypeScript</h3>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://willh.gitbook.io/typescript-tutorial/\">TypeScript æ–°æ‰‹æŒ‡å—</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://future-architect.github.io/typescript-guide/\">ä»•äº‹ã§ã™ãã«ä½¿ãˆã‚‹ TypeScript</a></li>\n</ul>\n<h3 id=\"api-mocking\">API Mocking</h3>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://drive.google.com/file/d/1OOV55pClWtNBBM7StU7wepH39-UZb0lM/view\">ç”¨ API mocking è®“å‰ç«¯ä¸å†è‹¦è‹¦ç­‰å¾…</a></li>\n</ul>\n<h2 id=\"åƒè€ƒè³‡æ–™\">åƒè€ƒè³‡æ–™</h2>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://ithelp.ithome.com.tw/users/20065504/ironman/1259\">é‡æ–°èªè­˜ JavaScript ç³»åˆ—</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://johnresig.com/apps/learn/\">Learning Advanced JavaScript</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://chupainotebook.blogspot.com/search/label/%E5%85%8B%E6%9C%8D%20JS%20%E7%9A%84%E5%A5%87%E6%80%AA%E9%83%A8%E5%88%86\">å…‹æœ JS çš„å¥‡æ€ªéƒ¨ä»½</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/get-started/ch1.md\">You Don&#39;t Know JS Yet: Get Started - 2nd Edition</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://exploringjs.com/deep-js/toc.html\">Deep JavaScript</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/stephentian/33-js-concepts\">JavaScript å¼€å‘è€…åº”æ‡‚çš„ 33 ä¸ªæ¦‚å¿µ</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://qiita.com/oimo23/items/b380a914867ec973039a\">ã€ç¿»è¨³ã€‘JavaScript é–‹ç™ºè€…ãŒçŸ¥ã‚‹ã¹ã 33 ã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆ ãƒªãƒ³ã‚¯é›† - Qiita</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://qiita.com/rana_kualu/items/6bcc99226be741348c34\">2016 å¹´ã‹ã‚‰ 2019 å¹´ã¾ã§ã® JavaScript ã®å…¨ã¦</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/AllJointTW/clean-code-javascript\">ç„¡ç‘•çš„ç¨‹å¼ç¢¼ JavaScript</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://blog.techbridge.cc/2017/07/15/javascript-event-propagation/\">DOM çš„äº‹ä»¶å‚³éæ©Ÿåˆ¶ï¼šæ•ç²èˆ‡å†’æ³¡</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://medium.com/enjoy-life-enjoy-coding/javascript-%E9%97%9C%E6%96%BC-object-%E4%B8%80%E5%8F%A3%E6%B0%A3%E5%85%A8%E8%AA%AA%E5%AE%8C-4bb924bcc79f\">JavaScript | é—œæ–¼ Object ï¼Œä¸€å£æ°£å…¨èªªå®Œ</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://medium.com/walkout/js-%E5%8E%9F%E5%8A%9B%E8%A6%BA%E9%86%92-day13-event-queue-event-loop-event-table-374fbbef3e40\">JS åŸåŠ›è¦ºé†’ â€” Event Queue &amp; Event Loop ã€Event Table</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://blog.huli.tw/2020/04/18/javascript-function-is-awesome/\">è¦ºå¾— JavaScript function å¾ˆæœ‰è¶£çš„æˆ‘æ˜¯ä¸æ˜¯å¾ˆå¥‡æ€ª - Huli</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://f2e.kalan.dev/\">æ·±å…¥ç¾ä»£å‰ç«¯é–‹ç™¼</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://azu.github.io/promises-book/\">JavaScript Promise ã®æœ¬</a></li>\n</ul>\n","date":"2019-07-18T07:03:00.000Z","excerpt":null,"printDate":"July 18, 2019","printReadingTime":"14 min read","tags":["F2E","JavaScript"],"image":"https://f6bfb5.github.io/preview/f2e-03-javascript.png"}