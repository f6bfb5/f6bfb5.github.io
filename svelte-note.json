{"title":"Svelte 筆記","slug":"svelte-note","html":"<h2 id=\"what-is-svelte？\">What is Svelte？</h2>\n<ul>\n<li>Svelte 是套秉持「Write less code」精神，為了建構 UI 而生的 <strong>JavaScript 編譯器</strong></li>\n<li>不同於 Vue 和 React 等框架在瀏覽器上執行處理，Svelte 先在編譯階段就完成建構</li>\n<li>Svelte 不採用 Virtual DOM diff，使用原生 JS 直接修改 DOM</li>\n<li>擁有相對優秀的執行速度與檔案大小表現</li>\n</ul>\n<h2 id=\"安裝\">安裝</h2>\n<h3 id=\"前置需求\">前置需求</h3>\n<ul>\n<li>Node.js</li>\n<li>npm</li>\n</ul>\n<h3 id=\"下載樣板\">下載樣板</h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"># download template\nnpx degit sveltejs/template svelte-app\n# install dependencies\ncd svelte-app\nnpm install\n# start rollup\nnpm run dev</code></pre><ul>\n<li><code>npx</code> 是 npm 在 v5.2.0 之後內建的指令，提供暫時性執行某個 npm 套件的功能</li>\n<li><code>degit</code> 是一套能供使用者直接取用現存 project 樣板的套件</li>\n<li>也可用 <code>npm i -g degit</code> 安裝後直接呼叫 <code>degit</code></li>\n</ul>\n<h2 id=\"撰寫-svelte\">撰寫 Svelte</h2>\n<h3 id=\"基礎語法\">基礎語法</h3>\n<ul>\n<li>svelte 與其它框架相同，使用獨有的 <code>.svelte</code> 副檔名撰寫</li>\n<li>每個檔案為獨立的 component，包含 Javascript、CSS 和 HTML<ul>\n<li>架構和傳統 HTML 相去不大</li>\n<li>JS 和 CSS 分別寫在 <code>&lt;script&gt;&lt;/script&gt;</code>、<code>&lt;style&gt;&lt;/style&gt;</code> 標籤裡</li>\n<li>HTML 元素直接撰寫於其下方</li>\n</ul>\n</li>\n</ul>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token comment\">/* js gones here */</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token comment\">/* styles goes here */</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- markup (zero or more items) goes here --></span></code></pre><ul>\n<li>變數可直接於 <code>&lt;script&gt;</code> 中常規宣告，並使用 <code>{}</code> 代入／顯示變數<ul>\n<li>亦可使用於 attribute 的雙括號中：<code>&lt;p class=&quot;primary-{bar}&quot;&gt;Some text&lt;/p&gt;</code></li>\n</ul>\n</li>\n<li>與屬性同名的變數<ul>\n<li>如 <code>&lt;img src={src} alt=&quot;A man dances.&quot;&gt;</code></li>\n<li>可省略成 <code>&lt;img {src} alt=&quot;A man dances.&quot;&gt;</code></li>\n</ul>\n</li>\n<li>匯入 component 亦同樣於 <code>&lt;script&gt;</code> 中引入即可使用<ul>\n<li><code>import Nested from &#39;./Nested.svelte&#39;;</code></li>\n</ul>\n</li>\n<li>CSS 樣式作用域僅該 component<ul>\n<li>svelte 會自動用 hash 命名，因此不必擔心命名衝突</li>\n</ul>\n</li>\n</ul>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">\"./App.svelte\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  target<span class=\"token operator\">:</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">,</span>\n  props<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// we'll learn about props later</span>\n    answer<span class=\"token operator\">:</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code></pre><ul>\n<li>svelte 可使用 <code>@html</code> 從 JS 中傳入 HTML 內容進行渲染<ul>\n<li>e.g. <code>&lt;p&gt;{@html string}&lt;/p&gt;</code></li>\n<li>但 svelte 沒有進行任何過濾處理，會有 XSS 攻擊的風險 d\n<br>需確保此內容來自可信任的來源</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"reactivity\">Reactivity</h3>\n<ul>\n<li>「Reactivity」意指指派值時會觸發的相關行為，類似 Vue 的 <code>computed</code></li>\n<li>svelte 以 <code>$:</code> 宣告 reactivity 內容</li>\n<li>component 的狀態改變時，會自動更新 <code>$:</code> 後面的行為內容到 DOM 上\n<br>e.g. <code>$: doubled = count * 2;</code><ul>\n<li>以 <code>$:</code> 宣告的變數不需再加上 <code>let</code> 等宣告</li>\n</ul>\n</li>\n<li><code>$:</code> 裡的行為亦可使用如 <code>console.log()</code> 等函式監看數值變化</li>\n<li>reactivity 只會於賦值時觸發<ul>\n<li>如 Array 的 <code>push</code> 和 <code>splice</code> 不會觸發更新\n<br>因此 <code>push</code> 要改寫成 <code>numbers = [...numbers, numbers.length + 1];</code>\n<br>並且賦值變數（等號左邊的變數）必須為 <code>$:</code> 宣告的更新變數</li>\n</ul>\n</li>\n</ul>\n<pre class=\"language-js\"><code class=\"language-js\">$<span class=\"token operator\">:</span> obj<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 若是二段式的賦值，並不會觸發更新</span>\n<span class=\"token keyword\">const</span> foo <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">;</span>\nfoo<span class=\"token punctuation\">.</span>bar <span class=\"token operator\">=</span> <span class=\"token string\">\"baz\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 除非在最後加上 obj=obj</span>\nobj <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">;</span></code></pre><ul>\n<li>想於 Reactivity 裡進行多段處裡時，加上 <code>{}</code> 即可</li>\n</ul>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> length <span class=\"token operator\">=</span> <span class=\"token string\">\"5\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> lengthNum<span class=\"token punctuation\">;</span>\n$<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  lengthNum <span class=\"token operator\">=</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>lengthNum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre><h4 id=\"reactivity-搭配非同步處理\">Reactivity 搭配非同步處理</h4>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/sveltejs/svelte/issues/2118\">Async reactive declarations · Issue #2118 · sveltejs/svelte</a></li>\n</ul>\n<h5 id=\"reactive-statements\">Reactive Statements</h5>\n<pre class=\"language-svelte\"><code class=\"language-svelte\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">let</span> package_name <span class=\"token operator\">=</span> <span class=\"token string\">'svelte'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> download_count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n$<span class=\"token operator\">:</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://api.npmjs.org/downloads/point/last-week/'</span> <span class=\"token operator\">+</span> package_name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> download_count <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>downloads <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Updating `package_name` will asynchronously update `download_count`</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n</code></pre><h5 id=\"derived-stores\">Derived Stores</h5>\n<pre class=\"language-svelte\"><code class=\"language-svelte\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> writable<span class=\"token punctuation\">,</span> derived <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'svelte/store'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> package_name <span class=\"token operator\">=</span> <span class=\"token function\">writable</span><span class=\"token punctuation\">(</span><span class=\"token string\">'svelte'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> download_count <span class=\"token operator\">=</span> <span class=\"token function\">derived</span><span class=\"token punctuation\">(</span>\n    package_name<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">$package_name<span class=\"token punctuation\">,</span> set</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://api.npmjs.org/downloads/point/last-week/'</span> <span class=\"token operator\">+</span> $package_name<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token function\">set</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>downloads<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// We override the `set` function to eliminate race conditions</span>\n            <span class=\"token comment\">// This does *not* abort running fetch() requests, it only prevents</span>\n            <span class=\"token comment\">// them from overriding the store.</span>\n            <span class=\"token comment\">// To learn about canceling fetch requests, search the internet for `AbortController`</span>\n            <span class=\"token function-variable function\">set</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Updating `$package_name` will asynchronously update `$download_count`</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n</code></pre><h3 id=\"props（屬性傳遞）\">Props（屬性傳遞）</h3>\n<ul>\n<li>想使用 props 傳入值時，需於 component 中的變數前加上 <code>export</code><ul>\n<li>e.g. <code>export let answer;</code>\n<br>※此為 svelte 用法，與 Javascript 中的 <code>export</code> 用法不同</li>\n<li>亦可於宣告時指定預設值<code>export let answer = &#39;a mystery&#39;;</code></li>\n</ul>\n</li>\n<li>就可將值傳入 component 中：<code>&lt;Nested answer={answer}&gt;</code></li>\n<li>亦可使用 <code>{...pkg}</code> 將物件傳進 component 的 props 內<ul>\n<li>e.g. <code>&lt;Info {...pkg}/&gt;</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"區塊功能\">區塊功能</h3>\n<h4 id=\"分歧\">分歧</h4>\n<ul>\n<li>svelte 提供了各種區塊語法，分歧區塊可依條件決定是否要 render 內容</li>\n<li>各區塊皆以 <code>#</code> 開頭，以 <code>/</code> 結尾，以 <code>:</code> 連接<ul>\n<li>e.g. <code>{#if condition}</code> 開頭，<code>{/if}</code> 結尾</li>\n</ul>\n</li>\n</ul>\n<pre class=\"language-\"><code class=\"language-\">{#if x > 10}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>{x} is greater than 10<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n{:else if 5 > x}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>{x} is less than 5<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n{:else}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>{x} is between 5 and 10<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n{/if}</code></pre><h4 id=\"遞迴\">遞迴</h4>\n<ul>\n<li>遞迴區塊可以遞迴陣列或 array-like 型態的資料<ul>\n<li><code>{#each 變數 as 區域變數, index}</code> 開頭，<code>{/each}</code> 結尾</li>\n<li>其中可使用如 <code>{區域變數.值}</code> 顯示內容</li>\n</ul>\n</li>\n<li>也可先解構內容後再顯示<ul>\n<li><code>{#each 變數 as { 值1, 值2 }} ... {/each}</code></li>\n</ul>\n</li>\n<li>替 item 加上 key：<code>{#each things as thing (thing.id)}</code></li>\n</ul>\n<h4 id=\"非同步處理\">非同步處理</h4>\n<pre class=\"language-\"><code class=\"language-\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">export</span> id<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> api <span class=\"token operator\">=</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/post/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n{#await api}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>...waiting<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n{:then response}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>The response is {response}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n{:catch error}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token style-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token style language-css\"><span class=\"token property\">color</span><span class=\"token punctuation\">:</span> red</span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>{error.message}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n{/await}</code></pre><h3 id=\"事件綁定\">事件綁定</h3>\n<ul>\n<li>bind event：<code>&lt;div on:mousemove={handleMousemove}&gt;&lt;/div&gt;</code><ul>\n<li>也可使用 inline 寫法：<code>&lt;div on:click={() =&gt; console.log(&quot;clicked&quot;);}&gt;&lt;/div&gt;</code></li>\n</ul>\n</li>\n<li>svelte 也實作了自動註冊和銷毀事件的處理，省去撰寫的麻煩</li>\n<li>bind event 亦可使用修飾子，以 <code>|</code> 加在 even 的後方：<ul>\n<li><code>&lt;div on:click|preventDefault={handleClick}&gt;</code></li>\n<li><code>preventDefault</code></li>\n<li><code>stopPropagation</code></li>\n<li><code>passive</code></li>\n<li><code>capture</code></li>\n<li><code>once</code></li>\n<li><code>self</code></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"event-dispatcher\">Event dispatcher</h4>\n<ul>\n<li>svelte 亦提供了客製化事件的功能</li>\n</ul>\n<p><code>Event.svelte</code>：</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> onMount<span class=\"token punctuation\">,</span> createEventDispatcher <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> dispatch <span class=\"token operator\">=</span> <span class=\"token function\">createEventDispatcher</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">onMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"completed\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> elapsedTime<span class=\"token operator\">:</span> <span class=\"token number\">3000</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre><p><code>App.svelte</code>：</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> Event <span class=\"token keyword\">from</span> <span class=\"token string\">\"./Event.svelte\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> completed <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"world\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> once <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"clicked\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n&lt;Event on:completed={() => completed = true}><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Event</span><span class=\"token punctuation\">></span></span>\n\n{#if completed}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>Finished<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n{/if}</code></pre><h3 id=\"資料綁定\">資料綁定</h3>\n<ul>\n<li><p>bind data（<code>v-model</code>）</p>\n<ul>\n<li><code>&lt;input bind:value={name}&gt;</code></li>\n<li>會將值同步更新回變數，或將值反應到 <code>input</code> 上</li>\n<li>也可以用來套用 DOM 屬性<ul>\n<li>例如：<code>&lt;input type=&quot;checkbox&quot; bind:checked={isChecked} /&gt;</code></li>\n<li>或是：<code>&lt;input type=&quot;radio&quot; bind:group={selected} vale={1} /&gt;</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>bind DOM 元素</p>\n<ul>\n<li><code>&lt;input type=&quot;text&quot; bind:this=&quot;{inputNode}&quot; /&gt;</code></li>\n</ul>\n</li>\n<li><p>bind class</p>\n<ul>\n<li><code>class:active={active}</code></li>\n<li>當陳述為 true 時才綁定該 class<ul>\n<li>當 class 與變數同名時，可以省略掉後方的括弧：<code>class:active</code></li>\n<li>亦可於括號中撰寫陳述式\n<br/>例如：<code>class:active={status == &#39;playing&#39;}</code></li>\n</ul>\n</li>\n</ul>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">let</span> active <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token selector\">.btn</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 1em<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> .5em<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.active</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #d7003a<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n&lt;button class=\"btn\" class:active={active} on:click={() => active = !active}>\n  Click me\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre></li>\n</ul>\n<h3 id=\"生命週期\"><a target=\"_blank\" rel=\"nofollow\" href=\"https://svelte.dev/docs#svelte\">生命週期</a></h3>\n<ul>\n<li>初始化：<code>beforeUpdate</code> -&gt; <code>onMount</code> -&gt; <code>afterUpdate</code></li>\n<li>元件更新：<code>beforeUpdate</code> -&gt; <code>afterUpdate</code></li>\n<li>元件銷毀：<code>onDestroy</code></li>\n<li><code>onMount</code>：在 Svelte 元件掛載時呼叫<ul>\n<li>SSR 模式不會呼叫</li>\n<li>回傳函式則會在 unmount／銷毀時呼叫</li>\n</ul>\n</li>\n<li><code>beforeUpdate</code>：狀態更新後、元件更新前執行<ul>\n<li>會在 <code>onMount</code> 之前執行<ul>\n<li>因此如 <code>bind</code> 之類於 <code>onMount</code> 階段執行的處理就會報錯</li>\n<li>以及這時狀態資料可能會更新，但還沒反應到 DOM 上</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>afterUpdate</code>：狀態更新後、元件更新後執行</li>\n<li><code>onDestroy</code>：元件銷毀時執行</li>\n</ul>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> onMount <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">onMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// execution here</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"store\"><a target=\"_blank\" rel=\"nofollow\" href=\"https://svelte.dev/docs#svelte_store\">Store</a></h3>\n<ul>\n<li>統一保存資料管理狀態</li>\n<li>Store 用於資料經常變動，並且需要跨元件使用時</li>\n<li>Svelte 提供了 3 個 function，設定資料的可存取範圍，\n<br/>分別為 <code>readable()</code>、<code>writable()</code>、<code>derived()</code></li>\n<li>將想存於 store 的值以此 function 宣告即可，例如 <code>const count = writable(0);</code></li>\n<li>以及 1 個 <code>subscribe()</code> 方法，用以處理元件的生命週期問題</li>\n</ul>\n<h4 id=\"writable\"><code>writable()</code></h4>\n<ul>\n<li>可以使用 <code>update()</code> 或 <code>set()</code> 從外部修改 store 的值</li>\n<li><code>import { writable } from &#39;svelte/store&#39;</code></li>\n</ul>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> countdown <span class=\"token operator\">=</span> <span class=\"token function\">writable</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncountdown<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">currentValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">9</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncountodnw<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h4 id=\"subscribe\"><code>subscribe()</code></h4>\n<ul>\n<li>所有的 svelte store 都有個 <code>subscribe</code> 方法</li>\n<li>當值更新時會進行通知，以及處理元件的生命週期問題</li>\n<li>呼叫後會回傳一個 unsubscribe 函數，可以搭配生命週期的 <code>onDestroy</code> 使用，避免 memory leak 問題（※）</li>\n</ul>\n<p>※：Svelte 的教學裡對這部份沒有太多著墨，相關概念應該是來自於 RxJS，需要這樣做的原因是，假如主應用中 <code>元件 A</code> 需要存取 store（等同於 RxJS 中的 <code>subscribe</code>？），當使用者切換到另一個頁面，原本的 <code>元件 A</code> 會銷毀並切換為 <code>元件 B</code>，但 <code>元件 A</code> 的資料取用行為還存在（instance 依然存在），就會造成 memory leak 與無法預期的行為，因此需要 <code>unsubscribe</code></p>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://oldbug.net/q/2ZThe/Angular-RxJs-When-should-I-unsubscribe-from-Subscription\">angular - Angular/RxJs When should I unsubscribe from `Subscription` - Solve Old Bugs</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://yuugou727.github.io/blog/2019/06/22/when-to-unsubscribe/\">[Angular] RxJs unsubscribe 的時機</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://netbasal.com/why-its-important-to-unsubscribe-from-rxjs-subscription-a7a6455d6a02\">Why It&#39;s Important to Unsubscribe from RxJS Subscription</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/ueler/angular-rxjs-unsubscribe\">ueler/angular-rxjs-unsubscribe</a></li>\n</ul>\n<p><code>store.js</code></p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> writable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte/store\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">writable</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><p><code>Incrementer.svelte</code></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> count <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./stores.js\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    count<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> n <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{count.increment}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>+<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre><p><code>App.svelte</code></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> onDestroy <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> count <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./stores.js\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> Incrementer <span class=\"token keyword\">from</span> <span class=\"token string\">\"./Incrementer.svelte\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 對 store 進行存取操作的 component</span>\n\n  <span class=\"token keyword\">let</span> count_value<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> unsubscribe <span class=\"token operator\">=</span> count<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    count_value <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">onDestroy</span><span class=\"token punctuation\">(</span>unsubscribe<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>The count is {count_value}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Incrementer</span> <span class=\"token punctuation\">/></span></span></code></pre><h5 id=\"auto-subscription\">Auto-subscription</h5>\n<ul>\n<li>也可以在變數名稱前方加上 <code>$</code>，Svelte 就會自動 subscribe 此 store，同時處理 unsubscribe 邏輯</li>\n<li><code>&lt;span&gt;{$countdonw}&lt;/span&gt;</code></li>\n</ul>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> count <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./stores.js\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> Incrementer <span class=\"token keyword\">from</span> <span class=\"token string\">\"./Incrementer.svelte\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> count_value<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> unsubscribe <span class=\"token operator\">=</span> count<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    count_value <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>The count is {$count}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Incrementer</span> <span class=\"token punctuation\">/></span></span></code></pre><h4 id=\"readable\"><code>readable()</code></h4>\n<ul>\n<li><p>只能從內部元件使用 <code>set()</code> 修改，外部元件只能取得資料的 store</p>\n</li>\n<li><p>例如滑鼠的所在位置，或是使用者的地理座標</p>\n</li>\n<li><p>第一個參數為預設值，第二個參數為修改資料的 function</p>\n</li>\n<li><p><code>import { readable } from &#39;svelte/store&#39;</code></p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\">chatSub <span class=\"token operator\">=</span> <span class=\"token function\">readable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">set</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> chatList <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">...</span>chatList<span class=\"token punctuation\">,</span> chat<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></li>\n</ul>\n<h4 id=\"derived\"><code>derived()</code></h4>\n<ul>\n<li>接收 1 至多個 store 並且進行加工</li>\n<li><code>import { derived } from &#39;svelte/store&#39;</code>;</li>\n</ul>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> derived <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte/store\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> list <span class=\"token operator\">=</span> <span class=\"token function\">readable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"Do homework\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"sleep\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"programming\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> ids <span class=\"token operator\">=</span> <span class=\"token function\">writable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> selectedList <span class=\"token operator\">=</span> <span class=\"token function\">derived</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>list<span class=\"token punctuation\">,</span> ids<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>list<span class=\"token punctuation\">,</span> ids<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> set</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">set</span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">val<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> ids<span class=\"token punctuation\">.</span><span class=\"token function\">inclueds</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n{$selectedList}</code></pre><h3 id=\"context\"><a target=\"_blank\" rel=\"nofollow\" href=\"https://svelte.dev/docs#setContext\">Context</a></h3>\n<ul>\n<li>Context 用於資料幾乎不會變動或跨元件溝通時</li>\n<li>沒有 reactive 效果（e.g. subscribe, unsubscribe）</li>\n<li>需要在 svelte 元件中使用才有效果</li>\n<li>只作用在 svelte 的元件樹中</li>\n<li>svelte 會去尋找距離元件最近的 context</li>\n</ul>\n<p><code>App.svelte</code></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> Profile <span class=\"token keyword\">from</span> <span class=\"token string\">\"./Profile.svelte\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> setContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token function\">setContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"Kalan\"</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token operator\">:</span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Profile</span> <span class=\"token punctuation\">/></span></span></code></pre><p><code>Profile.svelte</code></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> getContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token function\">setContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>{user.name}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>{user.age}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre><h3 id=\"motion-機制\"><a target=\"_blank\" rel=\"nofollow\" href=\"https://svelte.dev/docs#svelte_motion\">motion 機制</a></h3>\n<p>svelte 提供了「motion」機制處理數值動態的呈現</p>\n<h4 id=\"tweened\">Tweened</h4>\n<p>例如下例：</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> writable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte/store\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> progress <span class=\"token operator\">=</span> <span class=\"token function\">writable</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token selector\">progress</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> block<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>progress</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{$progress}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>progress</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{() => progress.set(0)}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>0%<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{() => progress.set(0.25)}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>25%<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{() => progress.set(0.5)}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>50%<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{() => progress.set(0.75)}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>75%<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{() => progress.set(1)}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>100%<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre><p>修改進度條的數值後，進度條會馬上跳到指定的進度\n<br>如果改為使用 motion 裡的 <code>Tweened</code> 取代 <code>writable</code>：</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> tweened <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte/motion\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> cubicOut <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte/easing\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> progress <span class=\"token operator\">=</span> <span class=\"token function\">tweened</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    duration<span class=\"token operator\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span>\n    easing<span class=\"token operator\">:</span> cubicOut<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n...</code></pre><p>進度條的值變更後，就會有中間進度變化的過程了</p>\n<ul>\n<li><code>Tweened</code> 可以使用 <code>duration</code> 與 <code>easing</code> 定義兩個數值之間的變化</li>\n<li>介面和 writable store 相同，具有 <code>subscribe</code>、<code>set</code>、<code>update</code> 等方法</li>\n<li>使用簡記：</li>\n</ul>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> tweened <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte/motion\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> <span class=\"token function\">tweened</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> duration<span class=\"token operator\">:</span> <span class=\"token number\">3000</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n{$value}</code></pre><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> onMount <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> tweened <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte/motion\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"world\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> year <span class=\"token operator\">=</span> <span class=\"token function\">tweened</span><span class=\"token punctuation\">(</span><span class=\"token number\">1990</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> duration<span class=\"token operator\">:</span> <span class=\"token number\">1500</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">onMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> year<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token number\">2020</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n{Math.floor($year)}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>Hello {name}!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></code></pre><h4 id=\"spring\">Spring</h4>\n<p>motion 還有 <code>Spring</code> 可以使用 <code>stiffness</code>（剛性）和 <code>damping</code>（摩擦係數）\n<br>替動畫加上輕重緩急，讓物件動態變得更生動</p>\n<p>例如以下是一個圖片會追隨滑鼠移動的範例，將 <code>writable</code> 改為 <code>spring</code> 之後，晃動滑鼠後圖片的移動會變為具有彈簧般的來回變化。</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> spring <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte/motion\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> positionX<span class=\"token punctuation\">,</span> positionY<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> image<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> imageURL <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> position <span class=\"token operator\">=</span> <span class=\"token function\">spring</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span>\n      x<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n      y<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      stiffness<span class=\"token operator\">:</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span>\n      damping<span class=\"token operator\">:</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleMousemove</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    position<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      x<span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>clientX <span class=\"token operator\">-</span> image<span class=\"token punctuation\">.</span>width <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n      y<span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>clientY <span class=\"token operator\">-</span> image<span class=\"token punctuation\">.</span>height <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token selector\">img</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> aboslute<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 350px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">cursor</span><span class=\"token punctuation\">:</span> move<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">bind:</span>this</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{image}<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>mousemove</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{handleMousemove}<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{imageURL}<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token style-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token style language-css\"><span class=\"token punctuation\">{</span><span class=\"token selector\">`transform: translate($</span><span class=\"token punctuation\">{</span>$position.x<span class=\"token punctuation\">}</span><span class=\"token selector\">px, $</span><span class=\"token punctuation\">{</span>$position.y<span class=\"token punctuation\">}</span>px<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>`<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">\"</span></span></span>\n<span class=\"token punctuation\">/></span></span></code></pre><h3 id=\"transition-機制\"><a target=\"_blank\" rel=\"nofollow\" href=\"https://svelte.dev/docs#svelte_transition\">transition 機制</a></h3>\n<ul>\n<li>svelte 內建有 <code>fade</code>、<code>blur</code>、<code>fly</code>、<code>slide</code>、<code>scale</code>、<code>draw</code>、<code>crossfade</code> 等轉場／動態效果函式</li>\n<li>使用 <code>&lt;transition:轉場名稱&gt;</code> 套用至元素上</li>\n<li>亦可使用 <code>&lt;in:轉場名稱 out:轉場名稱&gt;</code> 單獨指定開始和結束要套用的轉場效果</li>\n<li>transition 採用將獨自的語法計算轉換成原生 css 動畫，因此較不會有效能問題</li>\n<li>亦可搭配 svelte 的其它語法運用</li>\n<li><code>draw</code> 與其它 function 較為不同，專門用於 SVG 圖形</li>\n</ul>\n<h4 id=\"transition-設定\">transition 設定</h4>\n<ul>\n<li><p>這些轉場函式有兩個通用參數：</p>\n<ul>\n<li><code>delay</code>：延遲多久開始 transition</li>\n<li><code>duration</code>：transition 持續多久</li>\n</ul>\n</li>\n<li><p>各個動畫亦有獨自參數可以設定</p>\n<ul>\n<li>e.g. <code>&lt;h1 in:fade out:fly={{ x: 0, y: 50 }}&gt;I&#39;m Transition!&lt;/h1&gt;</code></li>\n</ul>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> fade<span class=\"token punctuation\">,</span> fly <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte/transition\"</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n{#if condition}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\"><span class=\"token namespace\">transition:</span>fade</span><span class=\"token punctuation\">></span></span>I'm Transition!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\"><span class=\"token namespace\">in:</span>fade</span> <span class=\"token attr-name\"><span class=\"token namespace\">out:</span>fly</span><span class=\"token punctuation\">></span></span>I'm Transition!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n{/if}</code></pre></li>\n</ul>\n<h4 id=\"easing-function-緩動函數\">easing function 緩動函數</h4>\n<p>替移動加上緩急，讓動靜看起來更真實且活潑：</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> fade<span class=\"token punctuation\">,</span> fly <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte/transition\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> elasticOut <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'svelte/easing'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> condition <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> condition <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> condition <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n{#if condition}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\"><span class=\"token namespace\">in:</span>fade</span> <span class=\"token attr-name\"><span class=\"token namespace\">out:</span>fly</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{{</span> <span class=\"token attr-name\"><span class=\"token namespace\">x:</span></span> <span class=\"token attr-name\">0,</span> <span class=\"token attr-name\"><span class=\"token namespace\">y:</span></span> <span class=\"token attr-name\">100,</span> <span class=\"token attr-name\"><span class=\"token namespace\">easing:</span></span> <span class=\"token attr-name\">ealsticOut</span> <span class=\"token attr-name\">}}</span><span class=\"token punctuation\">></span></span>\n  I'm Transition!\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n{/if}</code></pre><h4 id=\"自訂轉場函式\">自訂轉場函式</h4>\n<pre class=\"language-html\"><code class=\"language-html\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword\">let</span> condition <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">node<span class=\"token punctuation\">,</span> params</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">loog</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> duration <span class=\"token operator\">=</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        duration<span class=\"token punctuation\">,</span>\n        easing<span class=\"token operator\">:</span> cubicOut<span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">css</span><span class=\"token operator\">:</span> <span class=\"token parameter\">t</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n          transform: rotate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>params<span class=\"token punctuation\">.</span>range <span class=\"token operator\">*</span> t<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">deg);\n        </span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> condition <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n  </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n  {#if condition}\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\"><span class=\"token namespace\">transition:</span>rotate</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{{</span> <span class=\"token attr-name\"><span class=\"token namespace\">range:</span></span> <span class=\"token attr-name\">180</span> <span class=\"token attr-name\">}}</span><span class=\"token punctuation\">></span></span>I'm Transition<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n  {/if}</code></pre><h4 id=\"套用動畫效果到「未轉場」的元素上\">套用動畫效果到「未轉場」的元素上</h4>\n<p>svelte 還有 <a target=\"_blank\" rel=\"nofollow\" href=\"https://svelte.dev/docs#svelte_animate\">animate</a> 中所提供的 FLIP（First, Last, Invert, Play）function\n<br>會計算元素的舊位置與新位置之間的距離後，套用到動畫效果上\n<br>例如一個列表的資料有所改變，<code>flip</code> 會讓「沒有轉場」的元素也套用動畫效果</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> quintOut <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte/easing\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> crossfade <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte/transition\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 引入 animate 的 FLIP</span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> flip <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte/animate\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>send<span class=\"token punctuation\">,</span> receive<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">crossfade</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">duration</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">d</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>d <span class=\"token operator\">*</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token function\">fallback</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">node<span class=\"token punctuation\">,</span> params</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> style <span class=\"token operator\">=</span> <span class=\"token function\">getComputedStyle</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> transform <span class=\"token operator\">=</span> style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">===</span> <span class=\"token string\">\"none\"</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"\"</span> <span class=\"token operator\">:</span> style<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        duration<span class=\"token operator\">:</span> <span class=\"token number\">600</span><span class=\"token punctuation\">,</span>\n        easing<span class=\"token operator\">:</span> quintOut<span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">css</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n          transform: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>transform<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> scale(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>t<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">);\n          opacity: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>t<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n        </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- 使用 animate:flip 加上效果 --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">in:</span>receive</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{key: todo.id}}<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">out:</span>send</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{key: todo.id}}<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">animate:</span>flip</span>\n<span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span></code></pre><h3 id=\"樣板語法（slot）\">樣板語法（Slot）</h3>\n<ul>\n<li>可以將客製化元件／內容放進子元件中</li>\n</ul>\n<p><code>Card.svelte</code></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token selector\">.card</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 300px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #efefef<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 15px<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>card<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>slot</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Default Text<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>slot</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre><p><code>App.svelte</code></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> Card <span class=\"token keyword\">from</span> <span class=\"token string\">\"./Card.svelte\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"world\"</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Card</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>Title<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Body<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Card</span><span class=\"token punctuation\">></span></span></code></pre><ul>\n<li>可以替 slot 命名，讓元件能同時使用多個 slot</li>\n<li>也可以將變數傳給父元件</li>\n</ul>\n<p><code>Card.svelte</code></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token selector\">.card</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 300px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #efefef<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 15px<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.image</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 150px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">background-position</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">background-size</span><span class=\"token punctuation\">:</span> cover<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">background-repeat</span><span class=\"token punctuation\">:</span> no-repeat<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>card<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>slot</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>card-image<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">imageURL</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{imageURL}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>image<span class=\"token punctuation\">\"</span></span> <span class=\"token style-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token style language-css\"><span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>{imageURL}<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>slot</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>slot</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>card-body<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Default Text<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>slot</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre><p><code>App.svelte</code></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> Card <span class=\"token keyword\">from</span> <span class=\"token string\">\"./Card.svelte\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"world\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> title<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> imageURL<span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token selector\">img</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n\n&lt;Card imageURL={''}>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">slot</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>card-image<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">let:</span>imageURL</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{imageURL}</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{imageURL}</span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">slot</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>card-body<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    Body\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Card</span><span class=\"token punctuation\">></span></span></code></pre><h3 id=\"內建-element\">內建 Element</h3>\n<ul>\n<li>svelte 會在正確的時間點幫忙處理自訂與銷毀監聽器，省去需要的麻煩</li>\n<li>可以幫忙處理 SSR 的問題</li>\n<li><code>&lt;svelte:self /&gt;</code>：遞迴使用元件</li>\n<li><code>&lt;svelte:window /&gt;</code>：操作 window 物件</li>\n<li><code>&lt;svelte:body /&gt;</code>：類似 <code>&lt;svelte:window /&gt;</code>，操作 body</li>\n<li><code>&lt;svelte:head /&gt;</code>：操作 head</li>\n<li><code>&lt;svelte:component /&gt;</code>：動態引入 svelte 元件</li>\n<li><code>&lt;svelte:options /&gt;</code>：對元件分別指定編譯選項</li>\n</ul>\n<pre class=\"language-svelte\"><code class=\"language-svelte\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> count <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n{#if count > 0}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>countdown ... {count}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">svelte:</span>self</span> <span class=\"token attr-name\">count</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{count</span> <span class=\"token attr-name\">-</span> <span class=\"token attr-name\">1}</span> <span class=\"token punctuation\">/></span></span>\n{:else}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>empty<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n{/if}</code></pre><pre class=\"language-svelte\"><code class=\"language-svelte\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">let</span> innerWidth<span class=\"token punctuation\">;</span>\n  $<span class=\"token operator\">:</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>innerWidth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">svelte:</span>window</span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">bind:</span>innerWidth</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{innerWidth}</span>\n<span class=\"token punctuation\">/></span></span></code></pre><h4 id=\"server-side-rendering\">Server-Side Rendering</h4>\n<p><code>server.js</code></p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n  <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"svelte/register\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">const</span> myApp <span class=\"token operator\">=</span>\n  <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">const</span> App <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./App.svelte\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">;</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">{</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">,</span> css<span class=\"token punctuation\">,</span> head<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> App<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> myApp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/public'</span><span class=\"token punctuation\">,</span>\n  express<span class=\"token punctuation\">.</span><span class=\"token function\">static</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./public'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> myApp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span><span class=\"token punctuation\">{</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">{</span>res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;html>\n      &lt;head>\n        </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>head<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n\n        &lt;style>\n          </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>css<span class=\"token punctuation\">.</span>code<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n        &lt;/style>\n      &lt;/head>\n      &lt;body>\n        </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>html<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n        &lt;script src=\"/public/build/bundle.js\">&lt;/script>\n      &lt;/body>\n    &lt;/html></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre><p><code>main.js</code></p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">\"./App.svelte\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  hydrate<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  target<span class=\"token operator\">:</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> app<span class=\"token punctuation\">;</span></code></pre><p><code>rollup.config.js</code></p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\">  <span class=\"token operator\">...</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token function\">svelte</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      hydratable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token operator\">...</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span></code></pre><h2 id=\"svelte-生態系\">Svelte 生態系</h2>\n<h3 id=\"sass-support\">SASS support</h3>\n<p>若想使用 SASS 語法撰寫 CSS，需於樣板安裝好後，再安裝 SASS 相依套件</p>\n<pre class=\"language-shell\"><code class=\"language-shell\">npm install svelte-preprocess node-sass</code></pre><p>安裝完成後，開啟 <code>rollup.config.js</code></p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 於 import 區加入</span>\n<span class=\"token keyword\">import</span> preprocess <span class=\"token keyword\">from</span> 'svelte<span class=\"token operator\">-</span>preprocess`<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/* ... */</span>\n\n<span class=\"token comment\">// 於 plugin 區加入 preprocess</span>\nexprot <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* ... */</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token function\">svelte</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">/* ... */</span>\n      preprocess<span class=\"token operator\">:</span> <span class=\"token function\">preprocess</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">/* ... */</span>\n<span class=\"token punctuation\">}</span></code></pre><p>這時我們修改 <code>App.svelte</code> 裡的樣式部分，於 <code>&lt;style&gt;</code> 裡加上 <code>lang=&#39;scss&#39;</code>：</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> name<span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>Hello {name}!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>\n    Visit the <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://svelte.dev/tutorial<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Svelte tutorial<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span> to learn\n    how to build Svelte apps.\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>scss<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n  $<span class=\"token property\">primary-color</span><span class=\"token punctuation\">:</span> #ff3e00<span class=\"token selector\">;\n\n  main</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 1em<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> 240px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0 auto<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">h1</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> $primary-color<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">text-transform</span><span class=\"token punctuation\">:</span> uppercase<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 4em<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> 100<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token atrule\"><span class=\"token rule\">@media</span> <span class=\"token punctuation\">(</span><span class=\"token property\">min-width</span><span class=\"token punctuation\">:</span> 640px<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token selector\">main</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span></code></pre><p>執行 <code>npm run dev</code>，確認是否成功生效。</p>\n<p>若想讓 VSCode 上也支援相關顯示，需要再於根目錄新增或編輯檔案 <code>svelte.config.js</code>：</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// svelte.config.js</span>\n<span class=\"token keyword\">const</span> preprocess <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"svelte-preprocess\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  preprocess<span class=\"token operator\">:</span> <span class=\"token function\">preprocess</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"sapper\">Sapper</h3>\n<ul>\n<li>svelte 的網頁框架，類似於 Vue 的 Nuxt.js</li>\n</ul>\n<h4 id=\"安裝-1\">安裝</h4>\n<pre class=\"language-bash\"><code class=\"language-bash\"># for Rollup\nnpx degit \"sveltejs/sapper-template#rollup\" my-app\n\n# for webpack\nnpx degit \"sveltejs/sapper-template#webpack\" my-app</code></pre><h3 id=\"smelte\"><a target=\"_blank\" rel=\"nofollow\" href=\"https://smeltejs.com/?ref=madewithsvelte.com\">Smelte</a></h3>\n<ul>\n<li>svelte 的 CSS 框架，類似於 Vue 的 Vuetify</li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://qiita.com/azukisiromochi/items/969fc9808c931cfadf22\">Sapper で Smelte を利用する - Qiita</a></li>\n</ul>\n<h4 id=\"安裝-2\">安裝</h4>\n<pre class=\"language-bash\"><code class=\"language-bash\">npx degit matyunya/smelte-sapper-template my-app\ncd my-app\nnpm run dev</code></pre><h3 id=\"routify\"><a target=\"_blank\" rel=\"nofollow\" href=\"https://routify.dev/\">Routify</a></h3>\n<h2 id=\"參考文章\">參考文章</h2>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://sapper.svelte.dev/docs/\">Docs • Sapper</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://gist.github.com/peltho/ad6e051b854cd3095f9e7f9d9c550a84\">Svelte cheatsheet</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://sveltesociety.dev/cheatsheet/\">Cheat Sheet - Svelte Society</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://qiita.com/irico/items/3875c7ee6423cdf09392\">Svelte チュートリアルやってみた - Qiita</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://qiita.com/nishinoshake/items/46a64591c6411af68af1#svelte\">Svelte で Web サイトを作ってみて感じた魅力 - Qiita</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://qiita.com/myLifeAsaDog/items/5d3036201f37a98e685d\">Svelte のドキュメントを翻訳してみた - Qiita</a></li>\n</ul>\n","date":"2020-08-12T22:05:02.000Z","excerpt":"Svelte 是套秉持「Write less code」的精神，為了建構 UI 而生的編譯器，不同於 Vue 和 React 這類框架在瀏覽器上執行處理，而是先在編譯階段就完成建構，因此擁有相對優秀的執行速度與檔案大小表現。","printDate":"August 12, 2020","printReadingTime":"12 min read","tags":["F2E","JavaScript"],"image":"https://f6bfb5.github.io/preview/svelte-note.png"}