<!doctype html> <head> <meta charset=utf-8> <meta name=viewport content="width=device-width,initial-scale=1"> <meta name=theme-color content=#333333> <base href=/ > <link href=global.css rel=stylesheet> <link href=fonts.css rel=stylesheet> <link href=highlight.css rel=stylesheet> <link href=manifest.json rel=manifest> <link href=favicon.png rel=icon type=image/png> <link href=client/client-d6603d8f.css rel=stylesheet><link href=client/[slug]-be2f2fa9.css rel=stylesheet> <title>如何建立 Chrome 插件</title><script async data-svelte=svelte-a2kvt3 src="https://www.googletagmanager.com/gtag/js?id=UA-114661136-2"></script><script async data-svelte=svelte-1op50db src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js data-ad-client=ca-pub-9613661448556355></script><link href=/apple-touch-icon.png rel=apple-touch-icon data-svelte=svelte-12mb5ri sizes=180x180><link href=/favicon-32x32.png rel=icon data-svelte=svelte-12mb5ri sizes=32x32 type=image/png><link href=/favicon-16x16.png rel=icon data-svelte=svelte-12mb5ri sizes=16x16 type=image/png><link href=/site.webmanifest rel=manifest data-svelte=svelte-12mb5ri><link href=/safari-pinned-tab.svg rel=mask-icon data-svelte=svelte-12mb5ri color=#5bbad5><meta data-svelte=svelte-12mb5ri name=msapplication-TileColor content=#ffc40d><meta data-svelte=svelte-12mb5ri name=theme-color content=#ffffff><meta data-svelte=svelte-yn5fq1 content=article property=og:type><meta data-svelte=svelte-yn5fq1 content="如何建立 Chrome 插件" property=og:title><meta data-svelte=svelte-yn5fq1 name=Description><meta data-svelte=svelte-yn5fq1 property=og:description><meta data-svelte=svelte-yn5fq1 name=twitter:card content=summary_large_image><meta data-svelte=svelte-yn5fq1 name=twitter:title value="如何建立 Chrome 插件"><meta data-svelte=svelte-yn5fq1 name=twitter:description><meta data-svelte=svelte-yn5fq1 name=twitter:label1 value="Published on"><meta data-svelte=svelte-yn5fq1 name=twitter:data1 value="Nov 5, 2019"> <link href=/client/client.142ec532.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-d6603d8f.css rel=preload as=style><link href=/client/[slug].1ba0a803.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/[slug]-be2f2fa9.css rel=preload as=style></head> <body> <div id=sapper> <div class="svelte-wjh32h layout"> <header class=svelte-310tmg><nav class=svelte-dvivxn><a href=. class=svelte-dvivxn>blog</a> <a href=about class=svelte-dvivxn>about</a> <a href=rss.xml class=svelte-dvivxn>rss</a></nav> <a href=/ ><img alt="Buddha of Kamakura" class=svelte-nsstmh src=noun_great_buddha_of_kamakura_3572172.svg> </a></header> <main class=svelte-wjh32h> <header class=svelte-7rau0t><h1 class=svelte-7rau0t>如何建立 Chrome 插件</h1> <p class=svelte-7rau0t>November 5, 2019</header> <div class=container><article class=content><h2 id=chrome-套件架構>Chrome 套件架構</h2> <ol> <li>manifest</li> <li>background script</li> <li>ui elements</li> <li>content script</li> <li>options page</li> </ol> <h2 id=詳細介紹>詳細介紹</h2> <h3 id=mainfest>mainfest</h3> <p>建立 Manifest 檔案</p> <ul> <li><code>manifest.json</code>：基本設定</li> <li><code>manifest_version</code>: manifest 檔案使用的格式版本（目前官方最新版為 2）</li> <li><code>version</code>: 此套件的版本資訊（初次完成的版本可設定為 1）</li> <li><code>name</code>: 套件名稱</li> <li><code>description</code>: 套件簡短介紹</li> <li><code>icons</code>: 提供套件將使用到的各尺寸圖像檔</li> </ul> <pre class=language-json><code class=language-json>{
  "name": "Placeholder Image",
  "version": "1.1",
  "description": "Quickly find the right placeholder image for yourself!",
  "manifest_version": 2,
  "icons": {
    "16": "images/image16.png",
    "32": "images/image32.png",
    "48": "images/image48.png",
    "128": "images/image128.png"
  }
}</code></pre><h3 id=background-script>background script</h3> <p>設定 Background Scripts</p> <ul> <li><code>manifest.json</code>：設定 <code>background</code> 屬性和其相關設定</li> <li><code>scripts</code>: 設定使用哪個背景腳本檔案（在此用 <code>background.js</code>）</li> <li><code>persistent</code>: 設定背景腳本是否持續運行（官方建議 <code>false</code>: 根據事件開啟和關閉）</li> </ul> <pre class=language-json><code class=language-json>{
  ...
  "background": {
    "scripts": [
      "background.js"
    ],
    "persistent": false
  },
  ...
}</code></pre><h2 id=download-file-chrome-extension>Download File Chrome Extension</h2> <pre class=language-jsx><code class=language-jsx><span class="token keyword">let</span> images <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span>
  <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">img</span><span class="token punctuation">)</span> <span class="token operator">=></span>
      img<span class="token punctuation">.</span>href <span class="token operator">&&</span>
      img<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"jpeg"</span><span class="token punctuation">,</span> img<span class="token punctuation">.</span>href<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token string">"jpeg"</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>img <span class="token keyword">of</span> images<span class="token punctuation">)</span> img<span class="token punctuation">.</span><span class="token function">setAttributeNode</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createAttribute</span><span class="token punctuation">(</span><span class="token string">"download"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ul> <li><a href=https://hamedoragon.fanbox.cc/posts/1197681 rel=nofollow target=_blank>いつも弟の部屋で口淫してくれるパシリの姉ちゃん(オリジナルサイズ差分 25 枚!!!)｜ハメドラゴン｜ pixivFANBOX</a></li> <li><a href=https://gist.github.com/sfrdmn/8834747 rel=nofollow target=_blank>Bookmarklet to download all images on a page</a></li> <li><a href=https://stackoverflow.com/questions/19830088/download-multiple-images-at-once-with-javascript rel=nofollow target=_blank>google chrome extension - Download multiple images at once with Javascript - Stack Overflow</a></li> <li><a href=https://blog.verslu.is/development/chrome-extension-vs-code/ rel=nofollow target=_blank>Creating a Chrome Extension with VS Code - Gerald Versluis</a></li> </ul> <h2 id=參考文章>參考文章</h2> <ul> <li><a href=https://medium.com/%E9%BA%A5%E5%85%8B%E7%9A%84%E5%8D%8A%E8%B7%AF%E5%87%BA%E5%AE%B6%E7%AD%86%E8%A8%98/%E7%AD%86%E8%A8%98-%E5%BE%9E%E9%9B%B6%E9%96%8B%E5%A7%8B%E8%A3%BD%E4%BD%9C-chrome-%E5%A5%97%E4%BB%B6%E5%88%B0%E4%B8%8A%E6%9E%B6%E5%95%86%E5%BA%97-4971ed79ac77 rel=nofollow target=_blank>[筆記] 從零開始製作 Chrome 套件到上架商店</a></li> <li><a href=https://medium.com/chris-chuang/%E5%88%9D%E6%8E%A2-chrome-extension-19688ab79ae0 rel=nofollow target=_blank>初探 Chrome Extension</a></li> </ul> </article></div></main> <footer class=svelte-wjh32h><span><a href=https://creativecommons.org/licenses/by-sa/4.0/ rel="noreferrer noopener nofollow" target=_blank>CC BY-SA 4.0.</a></span></footer> </div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,{post:{title:"如何建立 Chrome 插件",slug:"make-chrome-extension",html:"\u003Ch2 id=\"chrome-套件架構\"\u003EChrome 套件架構\u003C\u002Fh2\u003E\n\u003Col\u003E\n\u003Cli\u003Emanifest\u003C\u002Fli\u003E\n\u003Cli\u003Ebackground script\u003C\u002Fli\u003E\n\u003Cli\u003Eui elements\u003C\u002Fli\u003E\n\u003Cli\u003Econtent script\u003C\u002Fli\u003E\n\u003Cli\u003Eoptions page\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch2 id=\"詳細介紹\"\u003E詳細介紹\u003C\u002Fh2\u003E\n\u003Ch3 id=\"mainfest\"\u003Emainfest\u003C\u002Fh3\u003E\n\u003Cp\u003E建立 Manifest 檔案\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003Emanifest.json\u003C\u002Fcode\u003E：基本設定\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Emanifest_version\u003C\u002Fcode\u003E: manifest 檔案使用的格式版本（目前官方最新版為 2）\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eversion\u003C\u002Fcode\u003E: 此套件的版本資訊（初次完成的版本可設定為 1）\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Ename\u003C\u002Fcode\u003E: 套件名稱\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Edescription\u003C\u002Fcode\u003E: 套件簡短介紹\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eicons\u003C\u002Fcode\u003E: 提供套件將使用到的各尺寸圖像檔\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-json\"\u003E\u003Ccode class=\"language-json\"\u003E{\n  \"name\": \"Placeholder Image\",\n  \"version\": \"1.1\",\n  \"description\": \"Quickly find the right placeholder image for yourself!\",\n  \"manifest_version\": 2,\n  \"icons\": {\n    \"16\": \"images\u002Fimage16.png\",\n    \"32\": \"images\u002Fimage32.png\",\n    \"48\": \"images\u002Fimage48.png\",\n    \"128\": \"images\u002Fimage128.png\"\n  }\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"background-script\"\u003Ebackground script\u003C\u002Fh3\u003E\n\u003Cp\u003E設定 Background Scripts\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003Emanifest.json\u003C\u002Fcode\u003E：設定 \u003Ccode\u003Ebackground\u003C\u002Fcode\u003E 屬性和其相關設定\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Escripts\u003C\u002Fcode\u003E: 設定使用哪個背景腳本檔案（在此用 \u003Ccode\u003Ebackground.js\u003C\u002Fcode\u003E）\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Epersistent\u003C\u002Fcode\u003E: 設定背景腳本是否持續運行（官方建議 \u003Ccode\u003Efalse\u003C\u002Fcode\u003E: 根據事件開啟和關閉）\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-json\"\u003E\u003Ccode class=\"language-json\"\u003E{\n  ...\n  \"background\": {\n    \"scripts\": [\n      \"background.js\"\n    ],\n    \"persistent\": false\n  },\n  ...\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch2 id=\"download-file-chrome-extension\"\u003EDownload File Chrome Extension\u003C\u002Fh2\u003E\n\u003Cpre class=\"language-jsx\"\u003E\u003Ccode class=\"language-jsx\"\u003E\u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E images \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eslice\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ecall\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edocument\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EquerySelectorAll\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"a\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efilter\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eimg\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E\n      img\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ehref \u003Cspan class=\"token operator\"\u003E&amp;&amp;\u003C\u002Fspan\u003E\n      img\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ehref\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EindexOf\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"jpeg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E img\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ehref\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Elength \u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"jpeg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Elength\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E!==\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eimg \u003Cspan class=\"token keyword\"\u003Eof\u003C\u002Fspan\u003E images\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E img\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EsetAttributeNode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edocument\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EcreateAttribute\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"download\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fhamedoragon.fanbox.cc\u002Fposts\u002F1197681\"\u003Eいつも弟の部屋で口淫してくれるパシリの姉ちゃん(オリジナルサイズ差分 25 枚!!!)｜ハメドラゴン｜ pixivFANBOX\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fgist.github.com\u002Fsfrdmn\u002F8834747\"\u003EBookmarklet to download all images on a page\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fstackoverflow.com\u002Fquestions\u002F19830088\u002Fdownload-multiple-images-at-once-with-javascript\"\u003Egoogle chrome extension - Download multiple images at once with Javascript - Stack Overflow\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fblog.verslu.is\u002Fdevelopment\u002Fchrome-extension-vs-code\u002F\"\u003ECreating a Chrome Extension with VS Code - Gerald Versluis\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"參考文章\"\u003E參考文章\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fmedium.com\u002F%E9%BA%A5%E5%85%8B%E7%9A%84%E5%8D%8A%E8%B7%AF%E5%87%BA%E5%AE%B6%E7%AD%86%E8%A8%98\u002F%E7%AD%86%E8%A8%98-%E5%BE%9E%E9%9B%B6%E9%96%8B%E5%A7%8B%E8%A3%BD%E4%BD%9C-chrome-%E5%A5%97%E4%BB%B6%E5%88%B0%E4%B8%8A%E6%9E%B6%E5%95%86%E5%BA%97-4971ed79ac77\"\u003E[筆記] 從零開始製作 Chrome 套件到上架商店\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fmedium.com\u002Fchris-chuang\u002F%E5%88%9D%E6%8E%A2-chrome-extension-19688ab79ae0\"\u003E初探 Chrome Extension\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n",date:"2019-11-05T01:57:35.000Z",excerpt:null,printDate:"November 5, 2019",printReadingTime:"1 min read"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.142ec532.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main","/client/client.142ec532.js")}document.head.appendChild(s)</script> 