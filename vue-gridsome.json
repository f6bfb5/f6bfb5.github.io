{"title":"Vue 筆記 - 靜態網頁產生器 Gridsome","slug":"vue-gridsome","html":"<h2 id=\"what-is-gridsome\">What is gridsome</h2>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://gridsome.org/\">Gridsome</a> 是一套 Vue.js 靜態網站產生器的 JAMstack (JavaScript、API、Markup) 架構框架，建構靈感來自於 React 製的靜態網站生成框架 Gatsby。</li>\n<li>JAMStack 架構可以達成更好的網站效能、更低的建構成本、更高的安全性與更良好的開發者體驗。</li>\n<li>Gridsome 最大的特徵為使用 GraphQL 方式取得資料，在選取資料來源上有非常高的自由度。</li>\n<li>在建構階段便處理好所有的效能優化，包括 <code>code-splitting</code>、<code>asset optimisation</code>、<code>lazy-loading</code>，以及滿分的 <code>Lighthouse scores out-of-the-box</code>。</li>\n</ul>\n<h2 id=\"graphql？\">GraphQL？</h2>\n<h3 id=\"query\">Query</h3>\n<pre class=\"language-GraphQL\"><code class=\"language-GraphQL\">query {\n  # 想取得的資料模型名稱\n  persona(personId: 1) {\n    # 想取得的資料內容\n    name\n    age\n    address\n    # 也可取得相關資料模型\n    company {\n      name\n    }\n  }\n}</code></pre><h3 id=\"mutation\">Mutation</h3>\n<pre class=\"language-GraphQL\"><code class=\"language-GraphQL\">mutation personMutation {\n  update(name: \"New name\") {\n    id\n    name\n  }\n}</code></pre><h3 id=\"subscription\">Subscription</h3>\n<pre class=\"language-GraphQL\"><code class=\"language-GraphQL\">subscription {\n  nameChange {\n    name\n  }\n}</code></pre><h2 id=\"安裝框架\">安裝框架</h2>\n<ul>\n<li><code>yarn global add @gridsome/cli</code> or <code>npm install --global @gridsome/cli</code></li>\n</ul>\n<h2 id=\"創建專案\">創建專案</h2>\n<ol>\n<li><code>gridsome create my-gridsome-site</code></li>\n<li><code>cd my-gridsome-site</code></li>\n<li><code>gridsome develop</code></li>\n</ol>\n<h2 id=\"目錄結構\">目錄結構</h2>\n<pre class=\"language-\"><code class=\"language-\">.\n├── package.json\n├── gridsome.config.js\n├── gridsome.server.js\n├── static/\n└── src/\n    ├── main.js\n    ├── index.html\n    ├── App.vue\n    ├── components/\n    ├── layouts/\n    │   └── Default.vue\n    ├── pages/\n    │   ├── Index.vue\n    │   └── Blog.vue\n    └── templates/\n        └── BlogPost.vue</code></pre><h3 id=\"packagejson\"><code>package.json</code></h3>\n<p>此檔案包含 project 所使用的 plugins 資訊。</p>\n<h3 id=\"gridsomeconfigjs\"><code>gridsome.config.js</code></h3>\n<p>此檔案包含 project 和 plugins 的設定資訊。\n更多資訊請參考 <a target=\"_blank\" rel=\"nofollow\" href=\"https://gridsome.org/docs/config/\">Project configuration</a>。</p>\n<h3 id=\"gridsomeserverjs\"><code>gridsome.server.js</code></h3>\n<p>此檔案可自選是否要使用，用於串接 Gridsome 伺服器的各個部份。此檔案必須 export 一存取 API 用的 function。</p>\n<h3 id=\"src\"><code>/src</code>:</h3>\n<ul>\n<li><code>main.js</code>: 從此導入通用樣式和 scripts。此檔案亦可 export 一存取客戶端 API 用的 function。安裝 Vue plugins、註冊 components 和 directives 亦在此檔案內處理。</li>\n<li><code>components/</code>: 在此資料夾內新增會插入至 Pages 和 Layouts 內的 Components。</li>\n<li><code>layouts/</code>: Layouts 是 Pages 和 Templates 這類內容的 Vue Components 包裝器。\n像 headers、footers、sidebars 這類網站上的 components 都會放在 Layouts 裡。</li>\n<li><code>pages/</code>: Pages 通常用於一般頁面或從 GraphQL 集合中列出的項目。\n從這邊新增 <code>.vue</code> 檔案以創建頁面。 例如 <strong>About.vue</strong> 會建立 <strong>site.com/about</strong> 頁面。</li>\n<li><code>templates/</code>: Templates 負責顯示節點 (單頁) 的集合。\n用於 <strong>GraphQL 集合</strong> 的樣板應該新增於此。\n例如要建立 <code>WordPressPost</code> 集合的樣板，要於此資料夾新增檔案 <code>WordPressPost.vue</code>。</li>\n<li><code>index.html</code>: 當需要覆寫原本用於產生頁面的 HTML 樣板時，只需要在 <code>src</code> 資料夾內建立一個新的 <code>index.html</code> 檔案即可。</li>\n<li><code>App.vue</code>: <code>App.vue</code> 是包含所有 pages 和 templates 的主要 component。當想修改所有頁面上的 layout 時，可以在 <code>src</code> 資料夾內新增 <code>App.vue</code> 覆寫預設內容。</li>\n<li>(可選) <code>assets/</code>: 通用樣式、圖片、字體、 icons 檔案。</li>\n<li>(可選) <code>data/</code>: 如 <code>.json</code> 或 <code>.yaml</code> 這類匯入至 components 內的資料檔案。</li>\n</ul>\n<h3 id=\"static\"><code>/static</code>:</h3>\n<p>此資料夾下的檔案會在編譯時直接複製到 dist 資料夾內。</p>\n<h3 id=\"components\">Components</h3>\n<h4 id=\"images\">Images</h4>\n<p>Gridsome 內建有 <code>&lt;g-image&gt;</code> component 輸出已經最佳化過的漸進式圖片。可在寬度或高度改變時即時修改或裁剪圖片尺寸。 <code>&lt;g-images&gt;</code> 也會建立一個超小的模糊行內 base64 圖片，並使用 IntersectionObserver 達成 lazy load 的效果。</p>\n<h4 id=\"linking\">Linking</h4>\n<p>Gridsome 內建有 <code>&lt;g-link&gt;</code> component 使用 IntersectionObserver 預先取得畫面裡的連結頁面。這使得 Gridsome 網站能在點擊頁面時的瀏覽速度大幅加快。</p>\n<h2 id=\"速成專案\">速成專案</h2>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/gridsome/gridsome-starter-default\">gridsome/gridsome-starter-default: 🐣 Default starter for Gridsome</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/gridsome/gridsome-starter-blog\">gridsome/gridsome-starter-blog: A simple, hackable &amp; minimalistic starter for Gridsome that uses Markdown for content.</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://github.com/noxify/gridsome-starter-casper-v2\">noxify/gridsome-starter-casper-v2: Grisome starter based on Ghost Casper V2 and tailwindcss.</a></li>\n</ul>\n<h2 id=\"撰寫內容\">撰寫內容</h2>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://fpjs.fun/gridsome/data/markdown/\">使用 Gridsome 讀取 Markdown | 點燈坊</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://qiita.com/neneta0921/items/2dff64e3c9589e046330\">Gridsome でブログを作成する - Building a Blog with Vue and Markdown Using Gridsome - Qiita</a></li>\n</ul>\n<p>原始碼基礎架構和 Vue 相去不大，多了一個 <code>&lt;page-query&gt;</code> 撰寫 GraphQL 語法用。</p>\n<pre class=\"language-vue\"><code class=\"language-vue\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>Latest blog posts<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">v-for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>edge in $page.posts.edges<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">:key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>edge.node.id<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        {{ edge.node.title }}\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>page-query</span><span class=\"token punctuation\">></span></span>\nquery Blog {\n  posts: allWordPressPost (limit: 5) {\n    edges {\n      node {\n        id\n        title\n      }\n    }\n  }\n}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>page-query</span><span class=\"token punctuation\">></span></span></code></pre><h3 id=\"query-1\">query</h3>\n<h4 id=\"gridsomeconfigjs-1\"><code>gridsome.config.js</code></h4>\n<pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  siteName<span class=\"token operator\">:</span> <span class=\"token string\">\"Gridsome Blog\"</span><span class=\"token punctuation\">,</span>\n  siteDescription<span class=\"token operator\">:</span> <span class=\"token string\">\"A simple blog designed with Gridsome\"</span><span class=\"token punctuation\">,</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      use<span class=\"token operator\">:</span> <span class=\"token string\">\"@gridsome/source-filesystem\"</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token operator\">:</span> <span class=\"token string\">\"content/posts/**/*.md\"</span><span class=\"token punctuation\">,</span>\n        typeName<span class=\"token operator\">:</span> <span class=\"token string\">\"Post\"</span><span class=\"token punctuation\">,</span>\n        route<span class=\"token operator\">:</span> <span class=\"token string\">\"/blog/:slug\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre><h4 id=\"indexvue\"><code>Index.vue</code></h4>\n<pre class=\"language-GraphQL\"><code class=\"language-GraphQL\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>page-query</span><span class=\"token punctuation\">></span></span>\nquery ($page: Int) {\n  posts: allPost(filter: { published: { eq: true }}, perPage: 10, page: $page) @paginate {\n    totalCount\n    pageInfo {\n      totalPages\n      currentPage\n    }\n    edges {\n      node {\n        id\n        title\n        date (format: \"YYYY-MM-DD\")\n        timeToRead\n        description\n        cover_image (width: 770, height: 380, blur: 10)\n        path\n        tags {\n          id\n          title\n          path\n        }\n      }\n    }\n  }\n}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>page-query</span><span class=\"token punctuation\">></span></span></code></pre><h4 id=\"homevue\"><code>Home.vue</code></h4>\n<pre class=\"language-GraphQL\"><code class=\"language-GraphQL\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>page-query</span><span class=\"token punctuation\">></span></span>\nquery Home ($page: Int) {\n  posts: allPost (page: $page, perPage: 9) @paginate {\n    totalCount\n    pageInfo {\n      totlaPages\n      currentPage\n    }\n    edges {\n      node {\n        id\n        title\n        timeToRead\n        content\n        excerpt\n        description\n        path\n        tages {\n          id\n          title\n          path\n        }\n      }\n    }\n  }\n}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>page-query</span><span class=\"token punctuation\">></span></span></code></pre><h4 id=\"postvue\"><code>Post.vue</code></h4>\n<pre class=\"language-GraphQL\"><code class=\"language-GraphQL\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>page-query</span><span class=\"token punctuation\">></span></span>\nquery Post ($id: ID!) {\n  post: post (id: $id) {\n    title\n    path\n    date (format: \"YYYY-MM-DD\")\n    timeToRead\n    tags {\n      id\n      title\n      path\n    }\n    description\n    content\n    cover_image (width: 860, blur: 10)\n  }\n}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>page-query</span><span class=\"token punctuation\">></span></span></code></pre><p><code>Tag.vue</code></p>\n<pre class=\"language-GraphQL\"><code class=\"language-GraphQL\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>page-query</span><span class=\"token punctuation\">></span></span>\nquery Tag ($id: ID!) {\n  tag (id: $id) {\n    title\n    belongsTo {\n      edges {\n        node {\n          ...on Post {\n            title\n            path\n            date (format: \"YYYY-MM-DD\")\n            timeToRead\n            description\n            content\n          }\n        }\n      }\n    }\n  }\n}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>page-query</span><span class=\"token punctuation\">></span></span></code></pre><h3 id=\"修正預設路由無法處理中文標題的問題\">修正預設路由無法處理中文標題的問題</h3>\n<ol>\n<li>在 markdown 檔案的 meta 資訊裡加入 <code>path</code> 供路由處理使用</li>\n<li>將 <code>gridsome.config.js</code> 的 <code>templates</code> 裡的 <code>Post</code> 改為 <code>/:path</code></li>\n</ol>\n<h2 id=\"推播上線\">推播上線</h2>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://gridsome.org/docs/deploy-to-github/\">Deploy to GitHub pages - Gridsome</a></li>\n</ul>\n<ol>\n<li>使用 git 建立版控，使用 <code>git remote add origin &lt;url&gt;</code> 設定 repo</li>\n<li>使用 <code>yarn add gh-pages</code> 或 <code>npm i gh-pages</code> 安裝 <code>gh-pages</code></li>\n<li>於 <code>gridsome.config.js</code> 裡新增</li>\n</ol>\n<pre class=\"language-js\"><code class=\"language-js\">  siteUrl<span class=\"token operator\">:</span> <span class=\"token string\">'https://&lt;your-github-username>.github.io'</span><span class=\"token punctuation\">,</span>\n  pathPrefix<span class=\"token operator\">:</span> <span class=\"token string\">'/&lt;your-gridsome-repo-name>'</span><span class=\"token punctuation\">,</span></code></pre><ol start=\"4\">\n<li>於 <code>package.json</code> 裡新增</li>\n</ol>\n<pre class=\"language-json\"><code class=\"language-json\">  \"predeploy\": \"npm run build\",\n  \"deploy\": \"gh-pages -d dist\"</code></pre><ol start=\"5\">\n<li>執行指令 <code>npm run deploy</code></li>\n</ol>\n<h2 id=\"可用插件\">可用插件</h2>\n<h3 id=\"tailwindcss\">Tailwindcss</h3>\n<ul>\n<li><code>yarn add tailwindcss --dev</code></li>\n<li><code>yarn add @fullhuman/postcss-purgecss --dev</code></li>\n<li><code>yarn add postcss-import --dev</code></li>\n<li><code>yarn add postcss-nested --dev</code></li>\n</ul>\n<p><code>gridsome.config.js</code>:</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">TailwindExtractor</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">static</span> <span class=\"token function\">extract</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">content</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> content<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">{A-Za-z0-0-_:\\/]+</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token function-variable function\">chainWebpack</span><span class=\"token operator\">:</span> <span class=\"token parameter\">config</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    config<span class=\"token punctuation\">.</span>module\n      <span class=\"token punctuation\">.</span><span class=\"token function\">rule</span><span class=\"token punctuation\">(</span><span class=\"token string\">'css'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">oneOf</span><span class=\"token punctuation\">(</span>'normal<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token string\">'postcss-loader'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token function\">tap</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">options</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        options<span class=\"token punctuation\">.</span>plugins<span class=\"token punctuation\">.</span><span class=\"token function\">unshift</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span>\n          <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'postcss-import'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'postcss-nested'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tailwindcss'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">undefined</span> <span class=\"token operator\">===</span> <span class=\"token string\">'production'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        options<span class=\"token punctuation\">.</span>plugins<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">[</span>\n          <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@fullhuman/postcss-prugecss'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            content<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n              <span class=\"token string\">'src/assets/**/*.css'</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">'src/**/*.vue'</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">'src/**/*.js'</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            extractors<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n              <span class=\"token punctuation\">{</span>\n                extractor<span class=\"token operator\">:</span> TailwindExtractor<span class=\"token punctuation\">,</span>\n                extensions<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'css'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'js'</span><span class=\"token punctuation\">]</span>\n              <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">return</span> options\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre><p><code>main.js</code>:</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/*! purgecss start ignore */</span>\n@<span class=\"token keyword\">import</span> <span class=\"token string\">'tailwindcss/base'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*! purgecss end ignore */</span>\n\n@<span class=\"token keyword\">import</span> <span class=\"token string\">'tailwindcss/components'</span><span class=\"token punctuation\">;</span>\n@imprt <span class=\"token string\">'tailwindcss/utilities'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Other import css file</span>\n<span class=\"token comment\">// @import './components/custom-css-file</span></code></pre><h3 id=\"font-awesome\">Font Awesome</h3>\n<h4 id=\"安裝\">安裝</h4>\n<ul>\n<li><code>npm i -D @fortawesome/{vue-fontawesome,fontawesome-svg-core,free-brands-svg-icons}</code></li>\n<li>免費圖示：\n<br>├ <code>@fortawesome/free-solid-svg-icons</code>\n<br>├ <code>@fortawesome/free-regular-svg-icons</code>\n<br>└ <code>@fortawesome/free-brands-svg-icons</code></li>\n<li>付費圖示：\n<br>├ <code>@fortawesome/pro-solid-svg-icons</code>\n<br>├ <code>@fortawesome/pro-regular-svg-icons</code>\n<br>├ <code>@fortawesome/pro-light-svg-icons</code>\n<br>└ <code>@fortawesome/pro-duotone-svg-icons</code></li>\n</ul>\n<h4 id=\"設定付費資訊\">設定付費資訊</h4>\n<pre class=\"language-bash\"><code class=\"language-bash\"># A. 全體設定\nnpm config set \"@fortawesome:registry\" https://npm.fontawesome.com/ &amp;&amp; \\\nnpm config set \"//npm.fontawesome.com/:_authToken\" TOKEN\n\n# B. 在 project 主資料夾或與 package.json 相同位置的資料夾裡建立 .npmrc 檔案設定\n@fortawesome:registry=https://npm.fontawesome.com/\n//npm.fontawesome.com/:_authToken=TOKEN</code></pre><h4 id=\"導入\">導入</h4>\n<p><code>main.js</code></p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> library <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@fortawesome/fontawesome-svg-core\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 圖示名稱至 fontawesome 網站 https://fontawesome.com/icons?d=gallery 上搜尋</span>\n<span class=\"token comment\">// 依欲使用的風格選擇</span>\n<span class=\"token comment\">// free-solid-svg-icons 為填滿圖示，通常以 fas 為標頭</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> 欲使用的圖示名稱 <span class=\"token keyword\">as</span> 圖示變數 <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@fortawesome/free-solid-svg-icons\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> faStar <span class=\"token keyword\">as</span> fasStar <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@fortawesome/free-solid-svg-icons\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// free-regular-svg-icons 為一般圖示，通常以 far 為標頭</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> 欲使用的圖示名稱 <span class=\"token keyword\">as</span> 圖示變數 <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@fortawesome/free-regular-svg-icons\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> faStar <span class=\"token keyword\">as</span> farStar <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@fortawesome/free-regular-svg-icons\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FontAwesomeIcon <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@fortawesome/vue-fontawesome\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 加入至 project 中</span>\nlibrary<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>欲使用的圖示名稱<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">component</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"font-awesome-icon\"</span><span class=\"token punctuation\">,</span> FontAwesomeIcon<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h4 id=\"使用\">使用</h4>\n<p>元件的名稱於上方的 <code>Vue.component</code> 裡設定，如文內的範例是 <code>font-awesome-icon</code>；在欲使用的頁面裡加入：\n<br><code>&lt;font-awesome-icon :icon=&quot;[&#39;圖示標頭&#39;, &#39;圖示名稱&#39;]&quot; /&gt;</code>\n<br>ex: <code>&lt;font-awesome-icon :icon=&quot;[&#39;fab&#39;, &#39;font-awesome&#39;]&quot; /&gt;</code></p>\n<h3 id=\"google-adsense\">Google Adsense</h3>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://www.google.com/adsense/new/\">Adsense</a></li>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://knote.dev/post/2020-04-19/gridsome-google-adsense/\">Gridsome で作ったサイトに Google Adsense を導入する方法 | K note</a></li>\n</ul>\n<ol>\n<li>在 <code>&lt;head&gt;&lt;/head&gt;</code> 內新增 Adsense 需要的 Script\n由於使用 Gridsome 在 <code>src/main.js</code> 內新增的方法，會因為 <code>vue-meta</code> 在切換頁面時遇到錯誤，</li>\n</ol>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">Vue<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> head <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  head<span class=\"token punctuation\">.</span>script<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">\"text/javascript\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"data-ad-client\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ca-pub-XXXXXXXXXXXXXXXX\"</span><span class=\"token punctuation\">,</span>\n    src<span class=\"token operator\">:</span> <span class=\"token string\">\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\"</span><span class=\"token punctuation\">,</span>\n    async<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre><pre class=\"language-undefined\"><code class=\"language-undefined\">需改為直接加在 `src/index.html` 的 `<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>` 標籤內。</code></pre><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">${htmlAttrs}</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    ${head}\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span>\n      <span class=\"token attr-name\">async</span>\n      <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">data-ad-client</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ca-pub-XXXXXXXXXXXXXXXX<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span> <span class=\"token attr-name\">${bodyAttrs}</span><span class=\"token punctuation\">></span></span>\n    ${app} ${scripts}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre><ol start=\"2\">\n<li>新增 Adsense 用的 component <code>components/Adsense.vue</code></li>\n</ol>\n<pre class=\"language-vue\"><code class=\"language-vue\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ins</span>\n    <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>adsbygoogle<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">:data-ad-layout</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>adLayout<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">:data-ad-client</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>adClient<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">:data-ad-slot</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>adSlot<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">:data-ad-format</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>adFormat<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">:data-full-width-responsive</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>adResponsive<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">:data-ad-layout-key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>adLayoutKey<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">:style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>adStyle<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  props<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    adClient<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n      required<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ca-pub-XXXXXXXXXXXXXXXX\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    adSlot<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n      required<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    adFormat<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n      required<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    adLayout<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n      required<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    adStyle<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n      required<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">\"display: block;\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    adResponsive<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n      required<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    adLayoutKey<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n      required<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">mounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">showAd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  methods<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">showAd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">$nextTick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>adsbygoogle <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>adsbygoogle <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre><ol start=\"3\">\n<li>在頁面內加入 component</li>\n</ol>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>adsense</span>\n      <span class=\"token attr-name\">ad-layout</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>in-article<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">ad-slot</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>9999999999<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">ad-format</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>fluid<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">ad-responsive</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></code></pre><h3 id=\"rss\">RSS</h3>\n<ul>\n<li><a target=\"_blank\" rel=\"nofollow\" href=\"https://blog.solunita.net/posts/develop-blog-by-gridsome-from-scratch-publish-rss/\">Gridsome でイチからブログを作る - RSS を配信する | Trial and Spiral</a></li>\n<li><code>yarn add gridsome-plugin-feed</code></li>\n<li><code>npm install gridsome-plugin-feed</code></li>\n</ul>\n","date":"2019-12-07T10:48:03.000Z","excerpt":null,"printDate":"December 7, 2019","printReadingTime":"7 min read","tags":["F2E","JavaScript"],"image":"https://f6bfb5.github.io/preview/vue-gridsome.png"}