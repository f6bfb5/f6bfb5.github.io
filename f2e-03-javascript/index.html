<!DOCTYPE html> <html lang=zh-Hant-TW> <head> <meta charset=utf-8> <meta name=viewport content="width=device-width,initial-scale=1"> <meta name=theme-color content=#333333> <base href=/ > <link href=global.css rel=stylesheet> <link href=fonts/fonts.css rel=stylesheet> <link href=highlight.css rel=stylesheet> <link href=manifest.json rel=manifest> <link href=favicon.png rel=icon type=image/png> <link href=https://cdn.jsdelivr.net/gh/chiron-fonts/chiron-sans-hk-pro@1.006/build/webfont/css/vf.css rel=stylesheet> <link href=client/client-4a05e78a.css rel=stylesheet><link href=client/[slug]-db3f61d1.css rel=stylesheet> <title>前端筆記 (3) JavaScript</title><script async data-svelte=svelte-a2kvt3 src="https://www.googletagmanager.com/gtag/js?id=UA-114661136-2"></script><script async data-svelte=svelte-1op50db src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js data-ad-client=ca-pub-9613661448556355></script><link href=/apple-touch-icon.png rel=apple-touch-icon data-svelte=svelte-12mb5ri sizes=180x180><link href=/favicon-32x32.png rel=icon data-svelte=svelte-12mb5ri sizes=32x32 type=image/png><link href=/favicon-16x16.png rel=icon data-svelte=svelte-12mb5ri sizes=16x16 type=image/png><link href=/site.webmanifest rel=manifest data-svelte=svelte-12mb5ri><link href=/safari-pinned-tab.svg rel=mask-icon data-svelte=svelte-12mb5ri color=#5bbad5><meta data-svelte=svelte-12mb5ri name=msapplication-TileColor content=#ffc40d><meta data-svelte=svelte-12mb5ri name=theme-color content=#ffffff><meta data-svelte=svelte-d2s233 content=article property=og:type><meta data-svelte=svelte-d2s233 content="前端筆記 (3) JavaScript" property=og:title><meta data-svelte=svelte-d2s233 name=Description><meta data-svelte=svelte-d2s233 property=og:description><meta data-svelte=svelte-d2s233 name=twitter:card content=summary_large_image><meta data-svelte=svelte-d2s233 name=twitter:title value="前端筆記 (3) JavaScript"><meta data-svelte=svelte-d2s233 name=twitter:description><meta data-svelte=svelte-d2s233 name=twitter:label1 value="Published on"><meta data-svelte=svelte-d2s233 name=twitter:data1 value="Jul 18, 2019"> <link href=/client/client.8ed0d3c1.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-4a05e78a.css rel=preload as=style><link href=/client/[slug].43fe5661.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/[slug]-db3f61d1.css rel=preload as=style></head> <body> <div id=sapper> <div class="svelte-hspq99 layout"> <header class=svelte-310tmg><nav class=svelte-1c2nkmp><a href=. class=svelte-1c2nkmp>blog</a> <a href=about class=svelte-1c2nkmp>about</a> <a href=rss.xml class=svelte-1c2nkmp>rss</a> </nav> <button class=svelte-f00uho><svg height=24 viewBox="0 0 24 24" width=24 xmlns=http://www.w3.org/2000/svg><path d="M17 14v2.639c0 1.776-1.625 2.608-2 4.361h-6c-.369-1.782-2-2.582-2-4.361v-2.639h10zm-2.25 8h-5.5l1.451 1.659c.19.216.465.341.752.341h1.094c.287 0 .562-.125.752-.341l1.451-1.659zm-1.25-22c-1.381 0-2.5 1.119-2.5 2.5v10.5h2v-10.5c0-.276.225-.5.5-.5s.5.224.5.5v10.5h2v-10.5c0-1.381-1.119-2.5-2.5-2.5zm-3.5 2.5c0-.953.386-1.817 1.006-2.449-.163-.033-.333-.051-.506-.051-1.381 0-2.5 1.119-2.5 2.5v10.5h2v-10.5z"></path></svg> </button> <a href=/ ><img alt="Buddha of Kamakura" class=svelte-12gcptb src=noun_great_buddha_of_kamakura_3572172.svg> </a> </header> <main class=svelte-hspq99> <header class=svelte-73z1by><h1 class=svelte-73z1by>前端筆記 (3) JavaScript</h1> <p class=svelte-73z1by>July 18, 2019 <small class=svelte-73z1by>14 min read</small></header> <div class=container><article class=content><h2 id=ecmascript>ECMAScript</h2> <ul> <li>ECMAScript 的規格於 ECMA 的 TC39 裡制定<ul> <li><a href=https://www.ecma-international.org/technical-committees/tc39/ target=_blank rel=nofollow>ECMA TC39</a></li> <li><a href=https://github.com/tc39 target=_blank rel=nofollow>GitHub organization</a></li> </ul> </li> <li><a href=https://node.green/ target=_blank rel=nofollow>Node.js ES2015/ES6, ES2016 and ES2017 support</a></li> </ul> <h2 id=javascript>JavaScript</h2> <ul> <li><a href=https://jsprimer.net/#javascript-primer target=_blank rel=nofollow>JavaScript Primer</a></li> <li><a href=https://ja.javascript.info/ target=_blank rel=nofollow>現代の JavaScript チュートリアル</a></li> <li><a href=https://openhome.cc/Gossip/ECMAScript/index.html target=_blank rel=nofollow>語言技術：ECMAScript Essence</a></li> <li><a href=https://eyesofkids.gitbooks.io/javascript-start-from-es6/content/ target=_blank rel=nofollow>從 ES6 開始的 JavaScript 學習生活</a></li> </ul> <h2 id=現代-js-的常見基礎技術>現代 JS 的常見基礎技術</h2> <ul> <li><a href=https://nodejs.org/en/ target=_blank rel=nofollow>Node.js</a></li> <li>Package Manager <br>├ npm <br>├ Yarn <br>└ Bower</li> <li>Task Runner / Module Bundler <br>├ gulp <br>├ Grunt <br>├ webpack <br>└ Parcel</li> <li>Transpiler / Compiler <br>└ Babel</li> <li>Alt JS <br>├ CoffeeScript <br>├ TypeScript <br>└ PureScript</li> <li>Framework / UI Library <br>├ React <br>├ Vue.js <br>├ Angular <br>└ Riot.js</li> </ul> <h2 id=撰寫>撰寫</h2> <h3 id=變數>變數</h3> <ul> <li>case senstive</li> <li>首字符可為任意 unicode 或 <code>$</code>、<code>_</code></li> <li>第二字符之後除任意 unicode 或 <code>$</code>、<code>_</code> 之外，還可為 <code>0-9</code></li> <li>保留字不可用為變數名稱</li> </ul> <h3 id=宣告>宣告</h3> <ul> <li><code>var</code> 函式作用域</li> <li><code>let</code> 區塊作用域，不可重複宣告</li> <li><code>const</code> 區塊作用域，不可重複宣告、不可再次賦值</li> </ul> <h4 id=變數提升-hosting>變數提升 (Hosting)</h4> <p>JavaScript 引擎在解析原始碼時，會先將所有已宣告的變數提升到程式碼的頂部，綁定其所屬作用域但不賦值。</p> <pre class=language-javascript><code class=language-javascript>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 顯示 undefined</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></code></pre><p>因此上述例子的 <code>a</code> 並未宣告與賦值，但在執行上不會報錯。</p> <h3 id=命名>命名</h3> <ul> <li>易於理解的內容名稱</li> <li>不過長或過短</li> <li>不使用容易混淆的名稱</li> <li>開頭使用 <code>_</code> 表示具有特殊意義，非必要不使用</li> <li>統一命名風格</li> <li>只使用英文命名</li> <li>習慣用法如下： <br>├ 變數／函式名稱：camelCase <br>├ 類別名稱：PascalCase <br>└ 常數：全大寫，字詞間用下底線 <code>_</code></li> </ul> <pre class=language-javascript><code class=language-javascript><span class="token keyword">let</span> numberOfStudents
<span class="token keyword">const</span> numberOfLegs
<span class="token keyword">function</span> <span class="token function">setBackgroundColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><h2 id=型別>型別</h2> <p>程式語言裡常見的型別有「動態型別」與「靜態型別」，「靜態型別」語言的變數，於<strong>編譯時</strong>已經確定其型別， <br>JavaScript 所屬的動態型別，則是於<strong>執行階段變數賦值後</strong>才會擁有型別。</p> <p>Javascript 內建有七大型別：</p> <h3 id=null（null）><code>Null</code>（<code>null</code>）</h3> <p>值為空或不存在</p> <h3 id="undefined（undefined）"><code>Undefined</code>（<code>undefined</code>）</h3> <p>值未被定義、初始值</p> <h3 id=boolean（true、false）><code>Boolean</code>（<code>true</code>、<code>false</code>）</h3> <p>布林值</p> <h3 id=number（整數-1-或浮點數-314）><code>Number</code>（整數 <code>1</code> 或浮點數 <code>3.14</code>）</h3> <p>能儲存根據 IEE 754-2008 標準所定義的 <br>範圍於 <code>(2^53 -1)</code> 到 <code>2^53 -1</code> 之間的數字 <br>另外還有三個符號值： <code>+Infinity</code> 、 <code>-Infinity</code> 、 <code>NaN</code> （Not a Number） <br>可以透過 <code>Number.MAX_VALUE</code> 或 <code>Number.MIN_VALUE</code> 兩個常數 <br>以及在 ES6 新增的 <code>Number.isSafeInteger()</code> 、 <code>Number.MAX_SAFE_INTEGER</code> 、 <code>Number.MIN_SAFE_INTEGER</code> <br>來檢查數字是否位於標準範圍之內</p> <h3 id=string（hello-world）><code>String</code>（<code>Hello World</code>）</h3> <p>文字，以單括號 <code>'</code> 或雙括號 <code>"</code> 包覆起來的字元</p> <h3 id=object><code>Object</code></h3> <p>資料或函式的組合＝ Property <br>可由 <code>{鍵 (Key) : 值 (Value)}</code> 或 <code>new Object()</code> 宣告 <br>可以透過 <code>.Key</code> 或 <code>['Key']</code> 存取或操作 <code>Object</code> 裡的 property，刪除則需使用 <code>delete</code> <br>除了上述其中三種原始資料型別（ <code>Boolean</code> 、 <code>Number</code> 、 <code>String</code> ）也是 <code>Object</code> 之外 <br>一些特殊的資料型別例如 <code>Array</code> 、 <code>Date</code> 、 <code>Function</code> 、 <code>RegExp</code> 也都屬於 <code>Object</code></p> <h3 id=symbol（於-es6-新增）><code>Symbol</code>（於 ES6 新增）</h3> <p>此類型的值唯一且不可修改 <br>通常用於做為 Object 的 Key 使用</p> <p>以及 <code>BigInt</code> （於 Chrome 67 新增）</p> <p>BigInt 則可儲存超過 <code>Number</code> 範圍的值 <br>於數值後面加上 <code>n</code> 或使用 <code>BigInt()</code> 函式轉型即可 <br>例如 <code>const bigInt = 123456789012345678901234567890n;</code> <br><code>Number</code> 常見的運算子操作都可同樣套用於 <code>BigInt</code> 上 <br>但 <code>BigInt</code> 類型的值不可與 <code>Number</code> 類型的值進行操作，會造成 <code>TypeError</code> 錯誤</p> <h3 id=typeof-運算子><code>typeof</code> 運算子</h3> <p><code>typeof</code> 是能檢視一個值型別的運算子。</p> <pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> a<span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a<span class="token punctuation">;</span> <span class="token comment">// "undefined"</span>

a <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a<span class="token punctuation">;</span> <span class="token comment">// "object"</span>

a <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a<span class="token punctuation">;</span> <span class="token comment">// "undefined"</span>

a <span class="token operator">=</span> <span class="token string">"string"</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a<span class="token punctuation">;</span> <span class="token comment">// "string"</span>

a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a<span class="token punctuation">;</span> <span class="token comment">// "number"</span>

a <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a<span class="token punctuation">;</span> <span class="token comment">// "boolean"</span>

a <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a<span class="token punctuation">;</span> <span class="token comment">// "object"</span>

a <span class="token operator">=</span> <span class="token function">Symble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a<span class="token punctuation">;</span> <span class="token comment">// "symble"</span></code></pre><p>但是 <code>typeof a</code> 並非詢問 <code>a</code> 變數的型別，而是詢問「目前在 <code>a</code> 中的值的型別是什麼」。JavaScript 的變數單純只是值的容器。</p> <p><code>null</code> 的類型是 <code>object</code>，這是由於歷史原因造成的。1995 年的 JavaScript 語言第一版，只設計了五種資料類型（物件、整數、浮點數、字串和布林值），沒考慮 <code>null</code>，只把它當作 <code>object</code> 的一種特殊值。後來 <code>null</code> 獨立出來，作為一種單獨的資料類型，為了兼容以前的代碼，<code>typeof null</code> 傳回 <code>object</code> 就沒法改變了，所以是一個萬年 Bug。</p> <p>我們可以利用 <code>null</code> 會被 <code>typeof</code> 檢測為 <code>object</code> 並且會轉為 <code>false</code> 的結果來驗證值是否為 <code>null。</code></p> <pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>a <span class="token operator">&&</span> <span class="token keyword">typeof</span> a <span class="token operator">===</span> <span class="token string">"object"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><h2 id=非同步處理>非同步處理</h2> <p>由於 JavaScript 是單執行緒（single-threaded）的同步（synchronous）程式語言，在執行程式時都是以最後結果中由上至下的順序去操作，並且一次只能處理一件事，如果我們中途需要做一個不影響整體後續操作，但會需要非常久時間的事情，JavaScript 就會直接卡死在這邊好一段時間（造成阻塞／blocking 問題），因此有由瀏覽器設計非同步（asynchronous）的相關處理替我們解決這個問題。</p> <p>上面提到 JavaScript 是單執行緒，非常概略性地來說，JavaScript 處理非同步的方式是，有一個 <code>call stack</code> 存放<strong>正在執行的工作</strong>，一個 <code>task queue</code>（亦稱 <code>job queue</code>、<code>event queue</code> 或 <code>callback queue</code>）存放<strong>需要等待的非同步工作</strong>，以及瀏覽器所提供 <code>Web APIs</code> 專門用於處理 stack 中的非同步工作，例如常見的 <code>setTimeout</code> 或是與 API 索取資料等等。</p> <p><code>Web APIs</code> 會將其移動到 <code>task queue</code> 裡之後，繼續執行下一個工作，當 <code>call stack</code> 裡的工作都執行完畢後，才會開始將 <code>task queue</code> 裡的工作移上來繼續處理，而這個「監看 call stack 是否為空／執行完畢，若是，則丟 callback queue 的工作進去」的行為稱為 <code>event loop</code>。</p> <pre class=language-mermaid><code class=language-mermaid>flowchart TD
    subgraph CallStack=執行中
    CST0[非同步工作]-.->CST1
    CST1[同步工作]-.->CST2
    CST2[同步工作]
    end

    subgraph WebAPIs
    WA0[setTimeout]
    WA1[AJAX]
    WA2[Events]
    end

    subgraph TaskQueue=待執行
    TQT0[非同步工作]
    TQT1[非同步工作]-.->TQT0
    TQT2[非同步工作]-.->TQT1
    end

    CallStack=執行中--處理非同步工作-->WebAPIs
    WebAPIs--處理完後會丟到 Task Queue 去-->TaskQueue=待執行
    TQT0 --當 Call Stack 工作全部結束後才丟上去--> CallStack=執行中</code></pre><p>而關於 <code>event loop</code> 的詳細講解，最多人推薦的就是由 Phillip Robert 在 JSConf 上解說的這支影片了。</p> <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen frameborder=0 height=315 src=https://www.youtube.com/embed/8aGhZQkoFbQ width=560></iframe> <ul> <li><a href=https://blog.techbridge.cc/2019/10/05/javascript-async-sync-and-callback/ target=_blank rel=nofollow>JavaScript 中的同步與非同步（上）：先成為 callback 大師吧！</a></li> <li><a href=https://5xruby.tw/posts/how-js-synchronous-works/ target=_blank rel=nofollow>無痛理解 JS | 非同步怎麼運作？｜專欄文章｜五倍紅寶石</a></li> <li><a href=https://pjchender.blogspot.com/2017/08/javascript-learn-event-loop-stack-queue.html target=_blank rel=nofollow>[筆記] 理解 JavaScript 中的事件循環、堆疊、佇列和併發模式（Learn event loop, stack, queue, and concurrency mode of JavaScript in depth） ~ PJCHENder&lt;br>那些沒告訴你的小細節</a></li> </ul> <h3 id=callback>Callback</h3> <p>上面很概略地只講了 <code>Web APIs</code> 會負責處理，而 <code>callback</code> 是裡頭一種最常見的概念，當我們有需要接在非同步處理後面做的事情，例如 <code>setTimeout</code> 只有等待時間的部份是非同步、AJAX 只有取得資料的部份是非同步，當時間到了、資料取得了之後，接下來的行為仍然是同步的，就要再寫在一個 function 裡，包在非同步的行為裡面，直到相關的非同步行為結束後，再接著執行這個 function 的行為，這種 function 就稱為 <code>callback function</code>。</p> <pre class=language-javascript><code class=language-javascript><span class="token comment">// callback function 會包在非同步行為裡</span>
<span class="token comment">// 當非同步部份處理完後才開始執行</span>
<span class="token keyword">function</span> <span class="token function">addAsync</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> $<span class="token punctuation">.</span><span class="token function">getJSON</span><span class="token punctuation">(</span>
    <span class="token string">"https://example.com"</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      num1<span class="token operator">:</span> num1<span class="token punctuation">,</span>
      num2<span class="token operator">:</span> num2<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    callback
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">addAsync</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">success</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> success<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>但當我們有需要一連串相關的非同步處理，多次呼叫 callback function 會造成語法內嵌，使得程式碼難以閱讀和維護，也就是所謂的 callback hell：</p> <pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> floppy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"floppy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 不斷層疊的 callback function 導致難以閱讀和理解</span>
floppy<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"disk"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  floppy<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"disk"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    floppy<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"disk"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      floppy<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"disk"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        floppy<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"disk"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          floppy<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"disk"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            floppy<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"disk"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              floppy<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"disk"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// do something...</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id=promises>Promises</h3> <p>為了解決 callback hell 的問題，ES2015 實作了 <code>Promise API</code> 提供不同的非同步處理方式，我們可以使用 <code>.then</code> 將原本不斷層疊的連續行為，改寫成段落串接式的寫法，雖然關係上仍然是接連處理，在撰寫和閱讀上有了大幅的差異。</p> <pre class=language-js><code class=language-js><span class="token keyword">function</span> <span class="token function">promiseFn</span><span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span> time <span class="token operator">=</span> <span class="token number">500</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      num <span class="token operator">?</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string template-punctuation">`</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>num<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">, 成功</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"失敗"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">promiseFn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">promiseFn</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code>Promise</code> 會帶入 <code>resolve</code> 和 <code>reject</code> 兩個 callback function：</p> <pre class=language-javascript><code class=language-javascript><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// asynchronous action here</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// resolve 回傳成功時的值</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span>success_value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// reject 回傳失敗時的值</span>
  <span class="token function">reject</span><span class="token punctuation">(</span>fail_value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code>Promise</code> 有四種狀態：</p> <ol> <li><code>pending</code>（擱置）：初始狀態，操作未開始執行</li> <li><code>fulfilled</code>（實現）：操作成功完成</li> <li><code>rejected</code>（拒絕）：操作失敗</li> <li><code>settled</code>（解決）：操作已結束</li> </ol> <p>當同步操作完成後，<code>resolve</code> 會觸發 fulfilled，執行 <code>.then</code> 之後的行為，失敗時則會由 <code>reject</code> 觸發 rejected，執行 <code>.catch</code> 之後的行為，而這兩個 callback function 也是回傳 promise。</p> <p><code>Promise</code> 也可以直接呼叫 <code>resolve</code> 接受某個值或操作，例如必定會如預期的行為，或是來自不同 Promise API 的 promise，亦可呼作 <code>reject</code> 用於偵錯或保持一致性時，拒絕某個值或操作。</p> <pre class=language-javascript><code class=language-javascript>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>lastStep<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>另外還有兩個方法 <code>.race</code> 和 <code>.all</code> 可以使用，這兩者都是傳入一個陣列，<code>.race</code> 是傳入陣列中任何一個 promise 物件解決之後，就會往下執行；<code>.all</code> 則是要傳入陣列中的所有 promise 物件都解決才會往下執行。</p> <ul> <li><a href=https://iamian.cc/promise/ target=_blank rel=nofollow>Javascript Promise example 簡易實作模擬 | Ian Chu</a></li> </ul> <pre class=language-javascript><code class=language-javascript><span class="token keyword">const</span> p1 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token number">1337</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> p3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 1337, "foo"]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id=async--await>Async / Await</h3> <ul> <li>於 ES7 新增</li> <li>欲使一 function 回傳 Promise，需於該 function 前加上 <code>async</code></li> <li>使用 Promise 或 function 回傳的 Promise 時需使用 <code>await</code> <br>└ 如 <code>let phone = await willGetNewPhone</code> 或 <code>let message = await showOff(phone)</code></li> <li>可於函式內使用 <code>try {} catch (error) {}</code> 攔截未預期行為或錯誤訊息</li> </ul> <pre class=language-javascript><code class=language-javascript><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data1 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">promiseFn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">promiseFn</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data1<span class="token punctuation">,</span> data2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id=rxjs-observables>RxJS (Observables)</h3> <ul> <li><p><a href=https://blog.techbridge.cc/2017/12/08/rxjs/ target=_blank rel=nofollow>希望是最淺顯易懂的 RxJS 教學</a></p> </li> <li><p><a href=https://blog.jerry-hong.com/series/rxjs target=_blank rel=nofollow>30 天精通 RxJS</a></p> </li> <li><p>可以被取消</p> </li> <li><p>需要時才執行</p> </li> </ul> <pre class=language-js><code class=language-js><span class="token keyword">let</span> Observable <span class="token operator">=</span> Rx<span class="token punctuation">.</span>Observable<span class="token punctuation">;</span>
<span class="token keyword">let</span> resultA<span class="token punctuation">,</span> resultB<span class="token punctuation">,</span> resultC<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">addAsync</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">http://example.com?num1=</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>num1<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">&num2=</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>num2<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string template-punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> x<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Observable<span class="token punctuation">.</span><span class="token function">fromPromise</span><span class="token punctuation">(</span>promise<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">addAsync</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">do</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>resultA <span class="token operator">=</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">addAsync</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">do</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>resultB <span class="token operator">=</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">addAsync</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">do</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>resultC <span class="token operator">=</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"total"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resultA<span class="token punctuation">,</span> resultB<span class="token punctuation">,</span> resultC<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ul> <li><code>Observable.fromPromise</code> 會將 Promise 轉換成 observable stream。</li> <li><code>.do</code> 和 .<code>flatMap</code> 是 Observable 的運算子。</li> </ul> <h2 id=ajax>AJAX</h2> <p>在講到非同步處理時，會有兩個經常出現的相關詞彙——「REST」和「AJAX」，這兩個名詞其實都是技術概念的總稱。</p> <p>REST（Representational State Transfer）是一種網路架構的設計概念，定義交換資訊時需要的具體狀態，例如統一介面、所有資源都具有唯一的 URI、可以透過超連結彼此連接、不具有狀態，每次的互動都在一次裡完結，RESTful API 就是符合這種設計思想的 API。</p> <p>AJAX（Asynchronous JavaScript and XML）則是泛指如何透過 JS 取得或傳遞延伸的資料（即 XML，Extensible Mark Language），並反應到網頁上的技術概念，後續提及的 <code>XMLHttpRequest</code> 物件、jQuery 裡的 <code>.ajax</code> function、Fetch 和 axios 都是種 AJAX 技術。</p> <ul> <li><a href=https://qiita.com/doriven/items/503fdc6de9bc0e725334 target=_blank rel=nofollow>Native な JavaScript で Fetch API を利用し Ajax を行う</a></li> <li><a href=https://qiita.com/katsunory/items/9bf9ee49ee5c08bf2b3d target=_blank rel=nofollow>Javascript の Ajax についての基本まとめ - Qiita</a></li> <li><a href=https://jzchangmark.wordpress.com/2016/06/12/%E9%80%8F%E9%81%8E-curl%E3%80%81python%E3%80%81postman-%E4%BE%86-request-api/ target=_blank rel=nofollow>透過 curl、Python、Postman 來 Request API - 🐴 的學習筆記</a></li> <li><a href=https://realdennis.medium.com/%E4%B8%80%E8%B5%B7%E4%BE%86%E6%8A%8A%E7%85%A9%E4%BA%BA-xmlhttprequest-%E8%AE%8A%E6%88%90-fetch-%E6%80%8E%E9%BA%BC%E6%A8%A3-8657f2854894 target=_blank rel=nofollow>一起來把煩人 XMLHttpRequest 變成 Fetch 怎麼樣？</a></li> <li><a href=https://eyesofkids.gitbooks.io/javascript-start-from-es6/content/part4/ajax_fetch.html target=_blank rel=nofollow>AJAX 與 Fetch API · 從 ES6 開始的 JavaScript 學習生活</a></li> </ul> <h3 id=1-xmlhttprequest>1. XMLHttpRequest</h3> <ul> <li>於 2006 年正式列入 W3C 標準中</li> <li>難以閱讀與撰寫</li> </ul> <pre class=language-javascript><code class=language-javascript><span class="token keyword">const</span> result <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".result"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">reqOnload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> email <span class="token operator">=</span> data<span class="token punctuation">.</span>results<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>email<span class="token punctuation">;</span>
  result<span class="token punctuation">.</span>textContent <span class="token operator">=</span> email<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">reqError</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"get"</span><span class="token punctuation">,</span> <span class="token string">"https://randomuser.me/api/"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span>onload <span class="token operator">=</span> reqOnload<span class="token punctuation">;</span>
request<span class="token punctuation">.</span>onerror <span class="token operator">=</span> reqError<span class="token punctuation">;</span></code></pre><h3 id=2-jqueryajax>2. jQuery.ajax()</h3> <ul> <li>基於 XHR 開發，然而 XHR 架構不清晰，並已有替代方案</li> <li>jQuery 整體項目太大，效益低落</li> </ul> <pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".result"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  url<span class="token operator">:</span> <span class="token string">"https://randomuser.me/api/"</span><span class="token punctuation">,</span>
  dataType<span class="token operator">:</span> <span class="token string">"json"</span><span class="token punctuation">,</span>
  <span class="token function function-variable">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>results<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id=3-fetch>3. Fetch</h3> <ul> <li>自 ES6 起提供的方式</li> <li>概念相近 jQuery 的 <code>$.ajax</code></li> <li>使用 ES6 的 Promise 進行回傳，回傳 <code>ReadableStream</code> 物件</li> <li>需搭配 then 與 catch 進行處理</li> <li>會將 400，500 都當做請求成功，需要另外做處理</li> <li>預設不帶 cookie</li> <li>不支援 timeout handle</li> <li>不支援監測請求的進度</li> <li>較早的瀏覽器並不支援（IE11 以下不支援）</li> </ul> <pre class=language-javascript><code class=language-javascript><span class="token keyword">const</span> result <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".result"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"https://randomuser.me/api/"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> email <span class="token operator">=</span> data<span class="token punctuation">.</span>results<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>email<span class="token punctuation">;</span>
    result<span class="token punctuation">.</span>textContent <span class="token operator">=</span> email<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id=4-axios>4. Axios</h3> <ul> <li><a href=https://eugenesu0515.github.io/Blog/2018/06/25/Vue%E5%A5%97%E4%BB%B6%E4%BB%8B%E7%B4%B9%EF%BC%9Aaxios/ target=_blank rel=nofollow>Vue 套件介紹：axios - Eugene Su</a></li> <li>Vue.js 作者推薦使用</li> <li>使用需引入 <a href=https://github.com/axios/axios target=_blank rel=nofollow>axios</a></li> <li>概念相近 jQuery 的 <code>$.ajax</code></li> <li>可以在 node.js 中使用</li> <li>支援防 CSRF</li> <li>提供併發請求</li> <li>相當輕量，約 13kb</li> </ul> <pre class=language-javascript><code class=language-javascript><span class="token keyword">const</span> result <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".result"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

axios
  <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"https://randomuser.me/api/"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> data <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    result<span class="token punctuation">.</span>textContent <span class="token operator">=</span> data<span class="token punctuation">.</span>results<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>email<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Execued"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id=es6-加進的新功能>ES6 加進的新功能</h2> <h3 id=1-default-parameters>1. Default Parameters</h3> <p>更快速的 function 參數給定預設值：</p> <pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> <span class="token function function-variable">link</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>height <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">,</span> color <span class="token operator">=</span> <span class="token string">"red"</span><span class="token punctuation">,</span> url <span class="token operator">=</span> <span class="token string">"https://example.com"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id=2-template-literals>2. Template Literals</h3> <p>允許透過語法 <code>${val}</code> 將變數嵌入至字串中：</p> <pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">Your name is </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>first<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>last<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">.</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">;</span></code></pre><h3 id=3-multi-line-strings>3. Multi-line Strings</h3> <p>允許使用 `（backticks）接受多行字串指定：</p> <pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">first line
second line</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">;</span></code></pre><h3 id=4-destructing-assignment>4. Destructing Assignment</h3> <pre class=language-javascript><code class=language-javascript>object<span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> …rest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 4, 5]</span>

<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>p<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span> q<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token punctuation">{</span>p<span class="token punctuation">,</span> q<span class="token punctuation">}</span> <span class="token operator">=</span> o<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 42</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre><h3 id=5-object-literals>5. Object Literals</h3> <pre class=language-javascript><code class=language-javascript><span class="token keyword">function</span> <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token parameter">make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token punctuation">{</span>
   <span class="token comment">// with property value shorthand</span>
  <span class="token comment">// syntax, you can omit the property</span>
  <span class="token comment">// value if key matches variable</span>
  <span class="token comment">// name</span>
  make<span class="token punctuation">,</span> <span class="token comment">// same as make: make</span>
  model<span class="token punctuation">,</span> <span class="token comment">// same as</span>
  model<span class="token operator">:</span> model
  value<span class="token punctuation">,</span> <span class="token comment">// same as value: value</span>
  <span class="token comment">// computed values now work with</span>
  <span class="token comment">// object literals</span>
  <span class="token punctuation">[</span><span class="token string">'make'</span> <span class="token operator">+</span> make<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// Method definition shorthand syntax</span>
  <span class="token comment">// omits `function` keyword & colon</span>
  <span class="token function">depreciate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">-=</span> <span class="token number">2500</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> car <span class="token operator">=</span> <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token string">'Kia'</span><span class="token punctuation">,</span> <span class="token string">'Sorento'</span><span class="token punctuation">,</span> <span class="token number">40000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id=6-arrow-function>6. Arrow Function</h3> <p>箭頭函式亦會更改物件裡的 this 指向行為，從原本的指向呼叫者改為指向其所屬物件</p> <pre class=language-javascript><code class=language-javascript><span class="token punctuation">(</span><span class="token parameter">param1<span class="token punctuation">,</span> param2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">,</span> paramN</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> statements <span class="token punctuation">}</span>
<span class="token punctuation">(</span><span class="token parameter">param1<span class="token punctuation">,</span> param2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">,</span> paramN</span><span class="token punctuation">)</span> <span class="token operator">=></span> expression
<span class="token comment">// 等於 : => { return expression; }</span>

<span class="token comment">// 只有一個參數時, 括號才能不加:</span>
<span class="token punctuation">(</span><span class="token parameter">singleParam</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> statements <span class="token punctuation">}</span>
<span class="token parameter">singleParam</span> <span class="token operator">=></span> <span class="token punctuation">{</span> statements <span class="token punctuation">}</span>

<span class="token comment">// 若無參數, 就一定要加括號:</span>
<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> statements <span class="token punctuation">}</span></code></pre><h3 id=7-promise>7. Promise</h3> <pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> <span class="token function function-variable">wait1000</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">wait1000</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Yay!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">wait1000</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Wheeyee!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id=8-let--const-block-scoped>8. Let & Const, Block-Scoped</h3> <ul> <li><code>let</code> 和 <code>const</code> 的作用域從之前 <code>var</code> 的函式變成了離此變數最近的 <code>{}</code> 區塊範圍內</li> <li><code>let</code> 不可重覆宣告，執行時會吐出錯誤</li> <li><code>const</code> 宣告時即須初始化，並且不可修改</li> </ul> <pre class=language-javascript><code class=language-javascript><span class="token keyword">function</span> <span class="token function">letExample</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> letValue <span class="token operator">=</span> value<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"inside block"</span><span class="token punctuation">,</span> letValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// [SyntaxError] redeclaration of letValue would be a SyntaxError</span>
    <span class="token keyword">let</span> letValue <span class="token operator">=</span> <span class="token string">"foo"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// [SyntaxError] Accessing letValue is a Reference Error because it</span>
    <span class="token comment">// was defined w/in if-block</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>letValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// if we get here, it means that the JS engine didn't</span>
    <span class="token comment">// throw an exception, which means that the engine</span>
    <span class="token comment">// (or transpiled code) did not faithfully reproduce</span>
    <span class="token comment">// how let should work</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"let not faithfully handled"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// e is a ReferenceError</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"letValue not accessible"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">letExample</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id=9-classes>9. Classes</h3> <p>ES6 透過 prototype 和 function 實作出了類 inheritance 結構的 class，但仍和傳統 Java、Python 的 class 有些差別</p> <pre class=language-javascript><code class=language-javascript><span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' makes a noise.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Lion</span> <span class="token keyword">extends</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span>
  <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> ' roars<span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><h3 id=10-module>10. Module</h3> <pre class=language-javascript><code class=language-javascript><span class="token comment">// Export</span>
<span class="token keyword">export</span> <span class="token keyword">var</span> port <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getAccounts</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// Import</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> port<span class="token punctuation">,</span> getAccounts <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"module"</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id=mutationobserver>MutationObserver</h2> <ul> <li><a href=https://blog.fundebug.com/2019/01/10/understand-mutationobserver/ target=_blank rel=nofollow>JavaScript 是如何工作的：使用 MutationObserver 跟踪 DOM 的变化</a></li> <li><a href=https://blog.sessionstack.com/how-javascript-works-tracking-changes-in-the-dom-using-mutationobserver-86adc7446401 target=_blank rel=nofollow>How JavaScript works: tracking changes in the DOM using MutationObserver | by Alexander Zlatkov | SessionStack Blog</a></li> <li><a href=https://zh.javascript.info/mutation-observer target=_blank rel=nofollow>DOM 变动观察器（Mutation observer）</a></li> </ul> <h3 id=簡介>簡介</h3> <p><code>MutationObserver</code> 會在指定的 DOM 出現變化，例如增減節點、變更屬性、修改文字時回傳通知。</p> <h3 id=使用>使用</h3> <p>想要使用 <code>MutationObserver</code> 之前，我們需要先建立一個 instance，並且傳入一個 function 讓它每次偵測到變化時調用。</p> <pre class=language-javascript><code class=language-javascript><span class="token keyword">const</span> mutationObserver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">mutations</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  mutations<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">mutation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mutation<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>建立好的物件有三個 methods：</p> <ul> <li><code>observe</code>：開始監聽變化，需要兩個參數—— 你想觀測的 DOM 節點和設定用的物件</li> <li><code>disconnect</code>：停止監聽變化</li> <li><code>takeRecords</code>：回傳 callback 啟動之前的最後一次修改</li> </ul> <p>這裡有個開始監聽變化的例子：</p> <pre class=language-javascript><code class=language-javascript><span class="token comment">// Starts listening for changes in the root HTML element of the page.</span>
<span class="token comment">// 第一個傳入參數為監察目標，可改為如 document.querySelector("body")</span>
mutationObserver<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  attributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  characterData<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  childList<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  subtree<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  attributeOldValue<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  characterDataOldValue<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>當我們調用了 <code>mutationObserver.observe(...)</code> 開始監聽，網頁上的 DOM 出現變化時，我們就能在控制台裡看到 mutations 陣列裡的各個 <a href=https://developer.mozilla.org/zh-TW/docs/Web/API/MutationObserver#MutationRecord target=_blank rel=nofollow>MutationRecord</a> 的記錄。</p> <p>當工作完成，我們想要停止觀察 DOM，可以調用相關 method：</p> <pre class=language-javascript><code class=language-javascript><span class="token comment">// Stops the MutationObserver from listening for changes.</span>
mutationObserver<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>在 <code>MutationObserver</code> 出現之前，人們用來觀測網頁元件變化的方法有：</p> <ul> <li>Polling</li> <li>MutationEvents</li> <li>CSS animations</li> </ul> <p>Polling：最簡單也最簡潔的方法，使用瀏覽器的 <code>setInterval</code> WebAPI 定期檢查是否發生任何變化，但這種方法會明顯地降低網路應用／網站的效能。</p> <p>MutationEvents：於 2000 年加入的 <a href=https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Mutation_events target=_blank rel=nofollow>Mutation events API</a>，由於它在每次 DOM 變化都會被調用，同樣導致效能問題，目前 <code>MutationEvents</code> API 已經被棄用。</p> <p>CSS animations：這是個有些特怪異的方案，基本上的概念是一個有 CSS 動畫的元素加進 DOM 中時，動畫開始就會觸發 animationstart 事件，當我們再對這個事件加上 handler，就能掌握元素加進 DOM 中的確切時間。</p> <pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container-element<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><pre class=language-css><code class=language-css><span class="token atrule"><span class="token rule">@keyframes</span> nodeInserted</span> <span class="token punctuation">{</span>
  <span class="token selector">from</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.99<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">to</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">#container-element *</span> <span class="token punctuation">{</span>
  <span class="token property">animation-duration</span><span class="token punctuation">:</span> 0.001s<span class="token punctuation">;</span>
  <span class="token property">animation-name</span><span class="token punctuation">:</span> nodeInserted<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>需要先檢查 <code>event.animationName</code> 是否是我們所想要的動畫。</p> <pre class=language-javascript><code class=language-javascript><span class="token keyword">var</span> <span class="token function function-variable">insertionListener</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Making sure that this is the animation we want.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>animationName <span class="token operator">===</span> <span class="token string">"nodeInserted"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Node has been inserted: "</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"animationstart"</span><span class="token punctuation">,</span> insertionListener<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// standard + firefox</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"MSAnimationStart"</span><span class="token punctuation">,</span> insertionListener<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// IE</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"webkitAnimationStart"</span><span class="token punctuation">,</span> insertionListener<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Chrome + Safari</span></code></pre><p><code>MutationObserver</code> 相較這些方案提供了更多優勢，包括它涵蓋了 DOM 中的每種可能變化，以及分段啟動的特性，讓它有更好的效能，並且擁有相當優秀的支援性。</p> <h2 id=intersectionobserver>IntersectionObserver</h2> <ul> <li><a href="https://codepen.io/osublake/embed/6fd214ecd74e7091ec7b609bb0270f97?height=450&slug-hash=6fd214ecd74e7091ec7b609bb0270f97&user=osublake&tab-bar-color=%23222&name=cp_embed_2#result-box" target=_blank rel=nofollow>example</a></li> </ul> <h3 id=簡介-1>簡介</h3> <p><code>IntersectionObserver</code> 會在指定的目標出現在觀察器 (window) 中時，才回傳 <code>true</code>， 不同於 jQuery 的 <code>onscroll</code> 是在每次捲動時都執行一次監聽。</p> <h3 id=使用-1>使用</h3> <p><code>let observer = new IntersectionObserver(callback, [option]);</code></p> <ul> <li><code>callback</code>: 要執行的動作函式</li> </ul> <p>callback 預設的傳入參數為一陣列</p> <pre class=language-javascript><code class=language-javascript><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 唯讀變數，目標元素的矩形節點的資訊 (ID、座標、長寬)</span>
    boundingClientRect<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 目標元素的出現比例</span>
    intersectionRation<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token comment">// 唯讀變數，目標元素與觀察器的相交區域</span>
    intersectionRect<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 是否出現於觀察器中</span>
    isIntersecting<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 觀察器的資訊</span>
    rootBounds<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 目標</span>
    target<span class="token operator">:</span> 目標的 <span class="token constant">DOM</span> 節點
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><ul> <li><code>option</code>: 有三個參數可調整</li> </ul> <pre class=language-javascript><code class=language-javascript><span class="token punctuation">{</span>
  root<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  rootMargin<span class="token operator">:</span> <span class="token string">"0px 0px 0px 0px"</span><span class="token punctuation">,</span>
  threshold<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p><code>root</code>: 可指定某個特定的 element 做為觀察器: <code>root: documnet.getElementById('container')</code>，預設值為 <code>null</code>，即目前觀看中的視窗。 <code>rootMargin</code>: 四個值依序為上、右、下、左，可放大或縮小的觀察器的範圍，預設值為 <code>"0px 0px 0px 0px"</code>。 <code>threshold</code>: 指定目標出現於觀察器內的百分比，到達該值後才執行 callback，可指定多個值如: <code>[0, 0.25, 0.5, 0.75, 1]</code> 會在目標出現 0%、25%、50%、75%、100% 的時候都執行一次 callback 函式，預設值為 <code>[0]</code>，即目標接觸到觀察器的邊緣便觸發 callback 函式。</p> <p><code>observer.observe(el)</code> <code>observer.unobserve(el)</code> <code>observer.disconnect()</code></p> <h2 id=進階>進階</h2> <h3 id=whats-this-in-javascript->What's THIS in JavaScript ?</h3> <ul> <li><code>this</code> 是 JavaScript 的一個關鍵字。</li> <li><code>this</code> 是 function 執行時，自動生成的一個內部物件。</li> <li>隨著 function 執行場合的不同，<code>this</code> 所指向的值，也會有所不同。</li> <li>在大多數的情況下，<code>this</code> 代表的就是呼叫 function 的物件（Owner Object of the function）。 亦即 function 執行時所屬的物件，而非 function 本身</li> <li>脫離物件的 <code>this</code> 基本上沒有任何意義</li> <li>沒有意義的 <code>this</code> 會根據<strong>嚴格模式</strong>以及<strong>環境</strong>給一個預設值</li> <li>嚴格模式底下預設就是 <code>undefined</code>，非嚴格模式在瀏覽器底下預設值是 <code>window</code>。</li> <li>要看 this，就看這個函式「怎麽」被呼叫 例如 <code>addEventListener</code> 底下的 <code>this</code> 會是「觸發事件的元素」 但裡頭的 callback function 中的 <code>this</code> 會因為 Default Binding 而指向 <code>window</code></li> <li>可以用 <code>call</code>、<code>apply</code> 與 <code>bind</code> 指定 this 的值 或是 arrow function 強制綁定 this、使用一個變數儲存 this 當做參考值</li> </ul> <pre class=language-jsx><code class=language-jsx><span class="token string">"use strict"</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">hello</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">"yo"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第一個參數值即為 this</span>
<span class="token function">hello</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token string">"hihihi"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// apply 以 Array 的方式傳進參數</span>
<span class="token comment">// 這兩種方式皆為呼叫 function 的函式</span>

<span class="token keyword">const</span> myHello <span class="token operator">=</span> <span class="token function">hello</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">"my"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">myHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bind 則是會回傳一個新的 function</span>
<span class="token comment">// 並且在調用 bind 後值就不會改變了</span></code></pre><ul> <li><a href=https://kuro.tw/posts/2017/10/12/What-is-THIS-in-JavaScript-%E4%B8%8A/ target=_blank rel=nofollow>What's THIS in JavaScript ? [上]</a></li> <li><a href=https://blog.techbridge.cc/2019/02/23/javascript-this/ target=_blank rel=nofollow>淺談 JavaScript 頭號難題 this：絕對不完整，但保證好懂</a></li> <li><a href=https://ithelp.ithome.com.tw/articles/10193193 target=_blank rel=nofollow>重新認識 JavaScript: Day 20 What's "THIS" in JavaScript (鐵人精華版)</a></li> </ul> <h3 id=closure>Closure</h3> <p>閉包（Closure）是利用變數作用域的特性，加上一層 function 以限制儲存環境的變數值作用範圍，避免污染 global 環境，且此變數不會因為 function 執行完畢後而消失</p> <pre class=language-js><code class=language-js><span class="token comment">// without closure</span>
<span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">counterTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">++</span>count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">counterTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">counterTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>

<span class="token comment">// with closure</span>
<span class="token keyword">function</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">counterTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">++</span>count<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> counterTick<span class="token punctuation">;</span>

  <span class="token comment">// also could be written as arrow function</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">++</span>count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> countFunc <span class="token operator">=</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">countFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">countFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span></code></pre><ul> <li><a href=https://blog.techbridge.cc/2018/12/08/javascript-closure/ target=_blank rel=nofollow>所有的函式都是閉包：談 JS 中的作用域與 Closure</a></li> </ul> <h3 id=hoisting>Hoisting</h3> <p>Hoisting（提升）是指一個變數或函式在宣告前就被使用，JavaScript 就會在使用之前再進行一次宣告，而變數只會單純宣告不會給定值，因此執行結果通常會是 <code>undefined</code> ，具體上如下例</p> <pre class=language-jsx><code class=language-jsx><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function function-variable">doSomething</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> x<span class="token punctuation">;</span> <span class="token comment">// 此行非原本撰寫的程式</span>
  <span class="token comment">// 是由於下面使用的 x=100 裡的 x 未經宣告</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 而被 JavaScript 提升至執行序的先頭</span>
  <span class="token comment">// 概念上類似移動至此函式的最上方進行宣告</span>
  <span class="token comment">// 因此函式內部的 console.log 會是 undefined</span>
  x <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 150</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span></code></pre><p>函式則分有存入變數及直接定義的兩種宣告方式，存入變數的函式宣告由於與變數同樣只有宣告被提升，因此會出現 <code>TypeError</code> 錯誤，直接定義的函式則會連同內容一起被提升</p> <pre class=language-jsx><code class=language-jsx><span class="token function">square</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 傳入變數式</span>
<span class="token comment">// 執行結果會為 TypeError: square is not a function</span>
<span class="token keyword">var</span> <span class="token function function-variable">square</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> number <span class="token operator">*</span> number<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 直接定義式</span>
<span class="token comment">// 執行結果為正常輸出</span>
<span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> number <span class="token operator">*</span> number<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>若有同名的定義函式和變數使用，由於函式的優先權較高，執行結果會是定義函式</p> <p><code>let</code> 和 <code>const</code> 一樣也有 Hoisting 行為，但這兩種宣告不會被初始化成 <code>undefined</code> ，並且在賦值之前就存取這兩種宣告的值時，會直接拋出錯誤</p> <p>而當初加入 Hoisting 設計的原因是為了達成函式相互歸遞（mutual recursion），以及避免必須以類 ML 語言的順序撰寫（avoid painful bottom-up ML-like order）</p> <p>實際運作上是 JavaScript 會於執行 function 時產生一個 Execution Contexts 執行環境（同理亦有 global EC），將所有需要的資訊存在裡面，裡頭會有個對應的 Variable Object 用以存放宣告的變數、函式和傳入的變數，在執行的時候到 VO 裡頭查找，並依參數、函式和變數的順序放入其中</p> <p>參數傳進 VO 時直接放入，沒有值的話會初始化為 <code>undefined</code> ；function 傳進 VO 時新增一屬性放入建立 function 完後的回傳值（可類比為指向此 function 的指標），已有同名屬性時進行覆蓋；變數傳進 VO 時新增一屬性並賦值為 <code>undefined</code> ，已有同名屬性時則不會修改該值</p> <p><code>let</code> 和 <code>const</code> 多做了一個檢查，皆是在「提升之後」和「賦值之前」的「執行期間」內（Temporal Dead Zone）被存取就會拋出錯誤，亦即 Hoisting 的原理實質上是執行時序的調動，而非程式碼的編修</p> <ul> <li><a href=https://blog.techbridge.cc/2018/11/10/javascript-hoisting/ target=_blank rel=nofollow>我知道你懂 hoisting，可是你了解到多深？</a></li> </ul> <h3 id=浮點數計算>浮點數計算</h3> <ul> <li><a href=https://0.30000000000000004.com/ target=_blank rel=nofollow>Floating Point Math</a></li> </ul> <h3 id=typescript>TypeScript</h3> <ul> <li><a href=https://willh.gitbook.io/typescript-tutorial/ target=_blank rel=nofollow>TypeScript 新手指南</a></li> <li><a href=https://future-architect.github.io/typescript-guide/ target=_blank rel=nofollow>仕事ですぐに使える TypeScript</a></li> </ul> <h3 id=api-mocking>API Mocking</h3> <ul> <li><a href=https://drive.google.com/file/d/1OOV55pClWtNBBM7StU7wepH39-UZb0lM/view target=_blank rel=nofollow>用 API mocking 讓前端不再苦苦等待</a></li> </ul> <h2 id=參考資料>參考資料</h2> <ul> <li><a href=https://ithelp.ithome.com.tw/users/20065504/ironman/1259 target=_blank rel=nofollow>重新認識 JavaScript 系列</a></li> <li><a href=https://johnresig.com/apps/learn/ target=_blank rel=nofollow>Learning Advanced JavaScript</a></li> <li><a href=https://chupainotebook.blogspot.com/search/label/%E5%85%8B%E6%9C%8D%20JS%20%E7%9A%84%E5%A5%87%E6%80%AA%E9%83%A8%E5%88%86 target=_blank rel=nofollow>克服 JS 的奇怪部份</a></li> <li><a href=https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/get-started/ch1.md target=_blank rel=nofollow>You Don't Know JS Yet: Get Started - 2nd Edition</a></li> <li><a href=https://exploringjs.com/deep-js/toc.html target=_blank rel=nofollow>Deep JavaScript</a></li> <li><a href=https://github.com/stephentian/33-js-concepts target=_blank rel=nofollow>JavaScript 开发者应懂的 33 个概念</a></li> <li><a href=https://qiita.com/oimo23/items/b380a914867ec973039a target=_blank rel=nofollow>【翻訳】JavaScript 開発者が知るべき 33 のコンセプト リンク集 - Qiita</a></li> <li><a href=https://qiita.com/rana_kualu/items/6bcc99226be741348c34 target=_blank rel=nofollow>2016 年から 2019 年までの JavaScript の全て</a></li> <li><a href=https://github.com/AllJointTW/clean-code-javascript target=_blank rel=nofollow>無瑕的程式碼 JavaScript</a></li> <li><a href=https://blog.techbridge.cc/2017/07/15/javascript-event-propagation/ target=_blank rel=nofollow>DOM 的事件傳遞機制：捕獲與冒泡</a></li> <li><a href=https://medium.com/enjoy-life-enjoy-coding/javascript-%E9%97%9C%E6%96%BC-object-%E4%B8%80%E5%8F%A3%E6%B0%A3%E5%85%A8%E8%AA%AA%E5%AE%8C-4bb924bcc79f target=_blank rel=nofollow>JavaScript | 關於 Object ，一口氣全說完</a></li> <li><a href=https://medium.com/walkout/js-%E5%8E%9F%E5%8A%9B%E8%A6%BA%E9%86%92-day13-event-queue-event-loop-event-table-374fbbef3e40 target=_blank rel=nofollow>JS 原力覺醒 — Event Queue & Event Loop 、Event Table</a></li> <li><a href=https://blog.huli.tw/2020/04/18/javascript-function-is-awesome/ target=_blank rel=nofollow>覺得 JavaScript function 很有趣的我是不是很奇怪 - Huli</a></li> <li><a href=https://f2e.kalan.dev/ target=_blank rel=nofollow>深入現代前端開發</a></li> <li><a href=https://azu.github.io/promises-book/ target=_blank rel=nofollow>JavaScript Promise の本</a></li> </ul> <div class="svelte-zo4zw5 toc-dropdown"> </div></article> <div class="back-to-top hidden svelte-142cfra" style=right:2em>Back to top </div> </div></main> <footer class=svelte-2kuhyy><a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="noreferrer noopener nofollow">CC BY-SA 4.0.</a> <div class="svelte-2kuhyy right">Made with <span class="svelte-2kuhyy heart">❤️</span>, <a href=https://github.com/Charca/sapper-blog-template target=_blank ref="noreferrer noopener nofollow">Sapper</a> and <a href=https://chiron-fonts.github.io/sans/ target=_blank rel="noreferrer noopener nofollow">Chiron Sans HK</a></div> <div class="svelte-2kuhyy clearfix"></div> </footer> </div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,{post:{title:"前端筆記 (3) JavaScript",slug:"f2e-03-javascript",html:"\u003Ch2 id=\"ecmascript\"\u003EECMAScript\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003EECMAScript 的規格於 ECMA 的 TC39 裡制定\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fwww.ecma-international.org\u002Ftechnical-committees\u002Ftc39\u002F\"\u003EECMA TC39\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fgithub.com\u002Ftc39\"\u003EGitHub organization\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fnode.green\u002F\"\u003ENode.js ES2015\u002FES6, ES2016 and ES2017 support\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"javascript\"\u003EJavaScript\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fjsprimer.net\u002F#javascript-primer\"\u003EJavaScript Primer\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fja.javascript.info\u002F\"\u003E現代の JavaScript チュートリアル\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fopenhome.cc\u002FGossip\u002FECMAScript\u002Findex.html\"\u003E語言技術：ECMAScript Essence\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Feyesofkids.gitbooks.io\u002Fjavascript-start-from-es6\u002Fcontent\u002F\"\u003E從 ES6 開始的 JavaScript 學習生活\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"現代-js-的常見基礎技術\"\u003E現代 JS 的常見基礎技術\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fnodejs.org\u002Fen\u002F\"\u003ENode.js\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EPackage Manager\n\u003Cbr\u003E├ npm\n\u003Cbr\u003E├ Yarn\n\u003Cbr\u003E└ Bower\u003C\u002Fli\u003E\n\u003Cli\u003ETask Runner \u002F Module Bundler\n\u003Cbr\u003E├ gulp\n\u003Cbr\u003E├ Grunt\n\u003Cbr\u003E├ webpack\n\u003Cbr\u003E└ Parcel\u003C\u002Fli\u003E\n\u003Cli\u003ETranspiler \u002F Compiler\n\u003Cbr\u003E└ Babel\u003C\u002Fli\u003E\n\u003Cli\u003EAlt JS\n\u003Cbr\u003E├ CoffeeScript\n\u003Cbr\u003E├ TypeScript\n\u003Cbr\u003E└ PureScript\u003C\u002Fli\u003E\n\u003Cli\u003EFramework \u002F UI Library\n\u003Cbr\u003E├ React\n\u003Cbr\u003E├ Vue.js\n\u003Cbr\u003E├ Angular\n\u003Cbr\u003E└ Riot.js\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"撰寫\"\u003E撰寫\u003C\u002Fh2\u003E\n\u003Ch3 id=\"變數\"\u003E變數\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003Ecase senstive\u003C\u002Fli\u003E\n\u003Cli\u003E首字符可為任意 unicode 或 \u003Ccode\u003E$\u003C\u002Fcode\u003E、\u003Ccode\u003E_\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E第二字符之後除任意 unicode 或 \u003Ccode\u003E$\u003C\u002Fcode\u003E、\u003Ccode\u003E_\u003C\u002Fcode\u003E 之外，還可為 \u003Ccode\u003E0-9\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E保留字不可用為變數名稱\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"宣告\"\u003E宣告\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003Evar\u003C\u002Fcode\u003E 函式作用域\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Elet\u003C\u002Fcode\u003E 區塊作用域，不可重複宣告\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Econst\u003C\u002Fcode\u003E 區塊作用域，不可重複宣告、不可再次賦值\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch4 id=\"變數提升-hosting\"\u003E變數提升 (Hosting)\u003C\u002Fh4\u003E\n\u003Cp\u003EJavaScript 引擎在解析原始碼時，會先將所有已宣告的變數提升到程式碼的頂部，綁定其所屬作用域但不賦值。\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003Econsole\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ea\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F 顯示 undefined\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E a \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E因此上述例子的 \u003Ccode\u003Ea\u003C\u002Fcode\u003E 並未宣告與賦值，但在執行上不會報錯。\u003C\u002Fp\u003E\n\u003Ch3 id=\"命名\"\u003E命名\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E易於理解的內容名稱\u003C\u002Fli\u003E\n\u003Cli\u003E不過長或過短\u003C\u002Fli\u003E\n\u003Cli\u003E不使用容易混淆的名稱\u003C\u002Fli\u003E\n\u003Cli\u003E開頭使用 \u003Ccode\u003E_\u003C\u002Fcode\u003E 表示具有特殊意義，非必要不使用\u003C\u002Fli\u003E\n\u003Cli\u003E統一命名風格\u003C\u002Fli\u003E\n\u003Cli\u003E只使用英文命名\u003C\u002Fli\u003E\n\u003Cli\u003E習慣用法如下：\n\u003Cbr\u003E├ 變數／函式名稱：camelCase\n\u003Cbr\u003E├ 類別名稱：PascalCase\n\u003Cbr\u003E└ 常數：全大寫，字詞間用下底線 \u003Ccode\u003E_\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E numberOfStudents\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E numberOfLegs\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EsetBackgroundColor\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EStudent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch2 id=\"型別\"\u003E型別\u003C\u002Fh2\u003E\n\u003Cp\u003E程式語言裡常見的型別有「動態型別」與「靜態型別」，「靜態型別」語言的變數，於\u003Cstrong\u003E編譯時\u003C\u002Fstrong\u003E已經確定其型別，\n\u003Cbr\u003EJavaScript 所屬的動態型別，則是於\u003Cstrong\u003E執行階段變數賦值後\u003C\u002Fstrong\u003E才會擁有型別。\u003C\u002Fp\u003E\n\u003Cp\u003EJavascript 內建有七大型別：\u003C\u002Fp\u003E\n\u003Ch3 id=\"null（null）\"\u003E\u003Ccode\u003ENull\u003C\u002Fcode\u003E（\u003Ccode\u003Enull\u003C\u002Fcode\u003E）\u003C\u002Fh3\u003E\n\u003Cp\u003E值為空或不存在\u003C\u002Fp\u003E\n\u003Ch3 id=\"undefined（undefined）\"\u003E\u003Ccode\u003EUndefined\u003C\u002Fcode\u003E（\u003Ccode\u003Eundefined\u003C\u002Fcode\u003E）\u003C\u002Fh3\u003E\n\u003Cp\u003E值未被定義、初始值\u003C\u002Fp\u003E\n\u003Ch3 id=\"boolean（true、false）\"\u003E\u003Ccode\u003EBoolean\u003C\u002Fcode\u003E（\u003Ccode\u003Etrue\u003C\u002Fcode\u003E、\u003Ccode\u003Efalse\u003C\u002Fcode\u003E）\u003C\u002Fh3\u003E\n\u003Cp\u003E布林值\u003C\u002Fp\u003E\n\u003Ch3 id=\"number（整數-1-或浮點數-314）\"\u003E\u003Ccode\u003ENumber\u003C\u002Fcode\u003E（整數 \u003Ccode\u003E1\u003C\u002Fcode\u003E 或浮點數 \u003Ccode\u003E3.14\u003C\u002Fcode\u003E）\u003C\u002Fh3\u003E\n\u003Cp\u003E能儲存根據 IEE 754-2008 標準所定義的\n\u003Cbr\u003E範圍於 \u003Ccode\u003E(2^53 -1)\u003C\u002Fcode\u003E 到 \u003Ccode\u003E2^53 -1\u003C\u002Fcode\u003E 之間的數字\n\u003Cbr\u003E另外還有三個符號值： \u003Ccode\u003E+Infinity\u003C\u002Fcode\u003E 、 \u003Ccode\u003E-Infinity\u003C\u002Fcode\u003E 、 \u003Ccode\u003ENaN\u003C\u002Fcode\u003E （Not a Number）\n\u003Cbr\u003E可以透過 \u003Ccode\u003ENumber.MAX_VALUE\u003C\u002Fcode\u003E 或 \u003Ccode\u003ENumber.MIN_VALUE\u003C\u002Fcode\u003E 兩個常數\n\u003Cbr\u003E以及在 ES6 新增的 \u003Ccode\u003ENumber.isSafeInteger()\u003C\u002Fcode\u003E 、 \u003Ccode\u003ENumber.MAX_SAFE_INTEGER\u003C\u002Fcode\u003E 、 \u003Ccode\u003ENumber.MIN_SAFE_INTEGER\u003C\u002Fcode\u003E\n\u003Cbr\u003E來檢查數字是否位於標準範圍之內\u003C\u002Fp\u003E\n\u003Ch3 id=\"string（hello-world）\"\u003E\u003Ccode\u003EString\u003C\u002Fcode\u003E（\u003Ccode\u003EHello World\u003C\u002Fcode\u003E）\u003C\u002Fh3\u003E\n\u003Cp\u003E文字，以單括號 \u003Ccode\u003E&#39;\u003C\u002Fcode\u003E 或雙括號 \u003Ccode\u003E&quot;\u003C\u002Fcode\u003E 包覆起來的字元\u003C\u002Fp\u003E\n\u003Ch3 id=\"object\"\u003E\u003Ccode\u003EObject\u003C\u002Fcode\u003E\u003C\u002Fh3\u003E\n\u003Cp\u003E資料或函式的組合＝ Property\n\u003Cbr\u003E可由 \u003Ccode\u003E{鍵 (Key) : 值 (Value)}\u003C\u002Fcode\u003E 或 \u003Ccode\u003Enew Object()\u003C\u002Fcode\u003E 宣告\n\u003Cbr\u003E可以透過 \u003Ccode\u003E.Key\u003C\u002Fcode\u003E 或 \u003Ccode\u003E[&#39;Key&#39;]\u003C\u002Fcode\u003E 存取或操作 \u003Ccode\u003EObject\u003C\u002Fcode\u003E 裡的 property，刪除則需使用 \u003Ccode\u003Edelete\u003C\u002Fcode\u003E\n\u003Cbr\u003E除了上述其中三種原始資料型別（ \u003Ccode\u003EBoolean\u003C\u002Fcode\u003E 、 \u003Ccode\u003ENumber\u003C\u002Fcode\u003E 、 \u003Ccode\u003EString\u003C\u002Fcode\u003E ）也是 \u003Ccode\u003EObject\u003C\u002Fcode\u003E 之外\n\u003Cbr\u003E一些特殊的資料型別例如 \u003Ccode\u003EArray\u003C\u002Fcode\u003E 、 \u003Ccode\u003EDate\u003C\u002Fcode\u003E 、 \u003Ccode\u003EFunction\u003C\u002Fcode\u003E 、 \u003Ccode\u003ERegExp\u003C\u002Fcode\u003E 也都屬於 \u003Ccode\u003EObject\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Ch3 id=\"symbol（於-es6-新增）\"\u003E\u003Ccode\u003ESymbol\u003C\u002Fcode\u003E（於 ES6 新增）\u003C\u002Fh3\u003E\n\u003Cp\u003E此類型的值唯一且不可修改\n\u003Cbr\u003E通常用於做為 Object 的 Key 使用\u003C\u002Fp\u003E\n\u003Cp\u003E以及 \u003Ccode\u003EBigInt\u003C\u002Fcode\u003E （於 Chrome 67 新增）\u003C\u002Fp\u003E\n\u003Cp\u003EBigInt 則可儲存超過 \u003Ccode\u003ENumber\u003C\u002Fcode\u003E 範圍的值\n\u003Cbr\u003E於數值後面加上 \u003Ccode\u003En\u003C\u002Fcode\u003E 或使用 \u003Ccode\u003EBigInt()\u003C\u002Fcode\u003E 函式轉型即可\n\u003Cbr\u003E例如 \u003Ccode\u003Econst bigInt = 123456789012345678901234567890n;\u003C\u002Fcode\u003E\n\u003Cbr\u003E\u003Ccode\u003ENumber\u003C\u002Fcode\u003E 常見的運算子操作都可同樣套用於 \u003Ccode\u003EBigInt\u003C\u002Fcode\u003E 上\n\u003Cbr\u003E但 \u003Ccode\u003EBigInt\u003C\u002Fcode\u003E 類型的值不可與 \u003Ccode\u003ENumber\u003C\u002Fcode\u003E 類型的值進行操作，會造成 \u003Ccode\u003ETypeError\u003C\u002Fcode\u003E 錯誤\u003C\u002Fp\u003E\n\u003Ch3 id=\"typeof-運算子\"\u003E\u003Ccode\u003Etypeof\u003C\u002Fcode\u003E 運算子\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Ccode\u003Etypeof\u003C\u002Fcode\u003E 是能檢視一個值型別的運算子。\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E a\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Etypeof\u003C\u002Fspan\u003E a\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F \"undefined\"\u003C\u002Fspan\u003E\n\na \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Etypeof\u003C\u002Fspan\u003E a\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F \"object\"\u003C\u002Fspan\u003E\n\na \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eundefined\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Etypeof\u003C\u002Fspan\u003E a\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F \"undefined\"\u003C\u002Fspan\u003E\n\na \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"string\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Etypeof\u003C\u002Fspan\u003E a\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F \"string\"\u003C\u002Fspan\u003E\n\na \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E5\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Etypeof\u003C\u002Fspan\u003E a\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F \"number\"\u003C\u002Fspan\u003E\n\na \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Etypeof\u003C\u002Fspan\u003E a\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F \"boolean\"\u003C\u002Fspan\u003E\n\na \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E a\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E5\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Etypeof\u003C\u002Fspan\u003E a\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F \"object\"\u003C\u002Fspan\u003E\n\na \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003ESymble\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Etypeof\u003C\u002Fspan\u003E a\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F \"symble\"\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E但是 \u003Ccode\u003Etypeof a\u003C\u002Fcode\u003E 並非詢問 \u003Ccode\u003Ea\u003C\u002Fcode\u003E 變數的型別，而是詢問「目前在 \u003Ccode\u003Ea\u003C\u002Fcode\u003E 中的值的型別是什麼」。JavaScript 的變數單純只是值的容器。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enull\u003C\u002Fcode\u003E 的類型是 \u003Ccode\u003Eobject\u003C\u002Fcode\u003E，這是由於歷史原因造成的。1995 年的 JavaScript 語言第一版，只設計了五種資料類型（物件、整數、浮點數、字串和布林值），沒考慮 \u003Ccode\u003Enull\u003C\u002Fcode\u003E，只把它當作 \u003Ccode\u003Eobject\u003C\u002Fcode\u003E 的一種特殊值。後來 \u003Ccode\u003Enull\u003C\u002Fcode\u003E 獨立出來，作為一種單獨的資料類型，為了兼容以前的代碼，\u003Ccode\u003Etypeof null\u003C\u002Fcode\u003E 傳回 \u003Ccode\u003Eobject\u003C\u002Fcode\u003E 就沒法改變了，所以是一個萬年 Bug。\u003C\u002Fp\u003E\n\u003Cp\u003E我們可以利用 \u003Ccode\u003Enull\u003C\u002Fcode\u003E 會被 \u003Ccode\u003Etypeof\u003C\u002Fcode\u003E 檢測為 \u003Ccode\u003Eobject\u003C\u002Fcode\u003E 並且會轉為 \u003Ccode\u003Efalse\u003C\u002Fcode\u003E 的結果來驗證值是否為 \u003Ccode\u003Enull。\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E a \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E!\u003C\u002Fspan\u003Ea \u003Cspan class=\"token operator\"\u003E&amp;&amp;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Etypeof\u003C\u002Fspan\u003E a \u003Cspan class=\"token operator\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"object\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"null\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch2 id=\"非同步處理\"\u003E非同步處理\u003C\u002Fh2\u003E\n\u003Cp\u003E由於 JavaScript 是單執行緒（single-threaded）的同步（synchronous）程式語言，在執行程式時都是以最後結果中由上至下的順序去操作，並且一次只能處理一件事，如果我們中途需要做一個不影響整體後續操作，但會需要非常久時間的事情，JavaScript 就會直接卡死在這邊好一段時間（造成阻塞／blocking 問題），因此有由瀏覽器設計非同步（asynchronous）的相關處理替我們解決這個問題。\u003C\u002Fp\u003E\n\u003Cp\u003E上面提到 JavaScript 是單執行緒，非常概略性地來說，JavaScript 處理非同步的方式是，有一個 \u003Ccode\u003Ecall stack\u003C\u002Fcode\u003E 存放\u003Cstrong\u003E正在執行的工作\u003C\u002Fstrong\u003E，一個 \u003Ccode\u003Etask queue\u003C\u002Fcode\u003E（亦稱 \u003Ccode\u003Ejob queue\u003C\u002Fcode\u003E、\u003Ccode\u003Eevent queue\u003C\u002Fcode\u003E 或 \u003Ccode\u003Ecallback queue\u003C\u002Fcode\u003E）存放\u003Cstrong\u003E需要等待的非同步工作\u003C\u002Fstrong\u003E，以及瀏覽器所提供 \u003Ccode\u003EWeb APIs\u003C\u002Fcode\u003E 專門用於處理 stack 中的非同步工作，例如常見的 \u003Ccode\u003EsetTimeout\u003C\u002Fcode\u003E 或是與 API 索取資料等等。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003EWeb APIs\u003C\u002Fcode\u003E 會將其移動到 \u003Ccode\u003Etask queue\u003C\u002Fcode\u003E 裡之後，繼續執行下一個工作，當 \u003Ccode\u003Ecall stack\u003C\u002Fcode\u003E 裡的工作都執行完畢後，才會開始將 \u003Ccode\u003Etask queue\u003C\u002Fcode\u003E 裡的工作移上來繼續處理，而這個「監看 call stack 是否為空／執行完畢，若是，則丟 callback queue 的工作進去」的行為稱為 \u003Ccode\u003Eevent loop\u003C\u002Fcode\u003E。\u003C\u002Fp\u003E\n\u003Cpre class=\"language-mermaid\"\u003E\u003Ccode class=\"language-mermaid\"\u003Eflowchart TD\n    subgraph CallStack=執行中\n    CST0[非同步工作]-.-\u003ECST1\n    CST1[同步工作]-.-\u003ECST2\n    CST2[同步工作]\n    end\n\n    subgraph WebAPIs\n    WA0[setTimeout]\n    WA1[AJAX]\n    WA2[Events]\n    end\n\n    subgraph TaskQueue=待執行\n    TQT0[非同步工作]\n    TQT1[非同步工作]-.-\u003ETQT0\n    TQT2[非同步工作]-.-\u003ETQT1\n    end\n\n    CallStack=執行中--處理非同步工作--\u003EWebAPIs\n    WebAPIs--處理完後會丟到 Task Queue 去--\u003ETaskQueue=待執行\n    TQT0 --當 Call Stack 工作全部結束後才丟上去--\u003E CallStack=執行中\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E而關於 \u003Ccode\u003Eevent loop\u003C\u002Fcode\u003E 的詳細講解，最多人推薦的就是由 Phillip Robert 在 JSConf 上解說的這支影片了。\u003C\u002Fp\u003E\n\u003Ciframe width=\"560\" height=\"315\" src=\"https:\u002F\u002Fwww.youtube.com\u002Fembed\u002F8aGhZQkoFbQ\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003E\u003C\u002Fiframe\u003E\n\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fblog.techbridge.cc\u002F2019\u002F10\u002F05\u002Fjavascript-async-sync-and-callback\u002F\"\u003EJavaScript 中的同步與非同步（上）：先成為 callback 大師吧！\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002F5xruby.tw\u002Fposts\u002Fhow-js-synchronous-works\u002F\"\u003E無痛理解 JS | 非同步怎麼運作？｜專欄文章｜五倍紅寶石\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fpjchender.blogspot.com\u002F2017\u002F08\u002Fjavascript-learn-event-loop-stack-queue.html\"\u003E[筆記] 理解 JavaScript 中的事件循環、堆疊、佇列和併發模式（Learn event loop, stack, queue, and concurrency mode of JavaScript in depth） ~ PJCHENder&lt;br&gt;那些沒告訴你的小細節\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"callback\"\u003ECallback\u003C\u002Fh3\u003E\n\u003Cp\u003E上面很概略地只講了 \u003Ccode\u003EWeb APIs\u003C\u002Fcode\u003E 會負責處理，而 \u003Ccode\u003Ecallback\u003C\u002Fcode\u003E 是裡頭一種最常見的概念，當我們有需要接在非同步處理後面做的事情，例如 \u003Ccode\u003EsetTimeout\u003C\u002Fcode\u003E 只有等待時間的部份是非同步、AJAX 只有取得資料的部份是非同步，當時間到了、資料取得了之後，接下來的行為仍然是同步的，就要再寫在一個 function 裡，包在非同步的行為裡面，直到相關的非同步行為結束後，再接著執行這個 function 的行為，這種 function 就稱為 \u003Ccode\u003Ecallback function\u003C\u002Fcode\u003E。\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token comment\"\u003E\u002F\u002F callback function 會包在非同步行為裡\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F 當非同步部份處理完後才開始執行\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EaddAsync\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Enum1\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E num2\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E callback\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E $\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token string\"\u003E\"https:\u002F\u002Fexample.com\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      num1\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E num1\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n      num2\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E num2\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    callback\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003EaddAsync\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Esuccess\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E result \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E success\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E但當我們有需要一連串相關的非同步處理，多次呼叫 callback function 會造成語法內嵌，使得程式碼難以閱讀和維護，也就是所謂的 callback hell：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E floppy \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"floppy\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F 不斷層疊的 callback function 導致難以閱讀和理解\u003C\u002Fspan\u003E\nfloppy\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eload\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"disk\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  floppy\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eload\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"disk\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    floppy\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eload\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"disk\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      floppy\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eload\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"disk\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n        floppy\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eload\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"disk\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n          floppy\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eload\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"disk\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n            floppy\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eload\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"disk\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n              floppy\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eload\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"disk\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n                \u003Cspan class=\"token comment\"\u003E\u002F\u002F do something...\u003C\u002Fspan\u003E\n              \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"promises\"\u003EPromises\u003C\u002Fh3\u003E\n\u003Cp\u003E為了解決 callback hell 的問題，ES2015 實作了 \u003Ccode\u003EPromise API\u003C\u002Fcode\u003E 提供不同的非同步處理方式，我們可以使用 \u003Ccode\u003E.then\u003C\u002Fcode\u003E 將原本不斷層疊的連續行為，改寫成段落串接式的寫法，雖然關係上仍然是接連處理，在撰寫和閱讀上有了大幅的差異。\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EpromiseFn\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Enum\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E time \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E500\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EPromise\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eresolve\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E reject\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetTimeout\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      num \u003Cspan class=\"token operator\"\u003E?\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Eresolve\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token template-string\"\u003E\u003Cspan class=\"token template-punctuation string\"\u003E`\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E${\u003C\u002Fspan\u003Enum\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E, 成功\u003C\u002Fspan\u003E\u003Cspan class=\"token template-punctuation string\"\u003E`\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ereject\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"失敗\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token function\"\u003EpromiseFn\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ethen\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eres\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eres\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EpromiseFn\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ethen\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eres\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eres\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Ccode\u003EPromise\u003C\u002Fcode\u003E 會帶入 \u003Ccode\u003Eresolve\u003C\u002Fcode\u003E 和 \u003Ccode\u003Ereject\u003C\u002Fcode\u003E 兩個 callback function：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EPromise\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eresolve\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E reject\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F asynchronous action here\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esuccess\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F resolve 回傳成功時的值\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003Eresolve\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esuccess_value\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F reject 回傳失敗時的值\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Ereject\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Efail_value\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Ccode\u003EPromise\u003C\u002Fcode\u003E 有四種狀態：\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Ccode\u003Epending\u003C\u002Fcode\u003E（擱置）：初始狀態，操作未開始執行\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Efulfilled\u003C\u002Fcode\u003E（實現）：操作成功完成\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Erejected\u003C\u002Fcode\u003E（拒絕）：操作失敗\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Esettled\u003C\u002Fcode\u003E（解決）：操作已結束\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E當同步操作完成後，\u003Ccode\u003Eresolve\u003C\u002Fcode\u003E 會觸發 fulfilled，執行 \u003Ccode\u003E.then\u003C\u002Fcode\u003E 之後的行為，失敗時則會由 \u003Ccode\u003Ereject\u003C\u002Fcode\u003E 觸發 rejected，執行 \u003Ccode\u003E.catch\u003C\u002Fcode\u003E 之後的行為，而這兩個 callback function 也是回傳 promise。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003EPromise\u003C\u002Fcode\u003E 也可以直接呼叫 \u003Ccode\u003Eresolve\u003C\u002Fcode\u003E 接受某個值或操作，例如必定會如預期的行為，或是來自不同 Promise API 的 promise，亦可呼作 \u003Ccode\u003Ereject\u003C\u002Fcode\u003E 用於偵錯或保持一致性時，拒絕某個值或操作。\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003EPromise\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eresolve\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efoo\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ethen\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ebar\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ethen\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003ElastStep\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E另外還有兩個方法 \u003Ccode\u003E.race\u003C\u002Fcode\u003E 和 \u003Ccode\u003E.all\u003C\u002Fcode\u003E 可以使用，這兩者都是傳入一個陣列，\u003Ccode\u003E.race\u003C\u002Fcode\u003E 是傳入陣列中任何一個 promise 物件解決之後，就會往下執行；\u003Ccode\u003E.all\u003C\u002Fcode\u003E 則是要傳入陣列中的所有 promise 物件都解決才會往下執行。\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fiamian.cc\u002Fpromise\u002F\"\u003EJavascript Promise example 簡易實作模擬 | Ian Chu\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E p1 \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Promise\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eresolve\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E p2 \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1337\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E p3 \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EPromise\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eresolve\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E reject\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EsetTimeout\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Eresolve\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"foo\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1000\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nPromise\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eall\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003Ep1\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E p2\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E p3\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ethen\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Evalue\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Evalue\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F [3, 1337, \"foo\"]\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ecatch\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eerr\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Emessage\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"async--await\"\u003EAsync \u002F Await\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E於 ES7 新增\u003C\u002Fli\u003E\n\u003Cli\u003E欲使一 function 回傳 Promise，需於該 function 前加上 \u003Ccode\u003Easync\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E使用 Promise 或 function 回傳的 Promise 時需使用 \u003Ccode\u003Eawait\u003C\u002Fcode\u003E\n\u003Cbr\u003E└ 如 \u003Ccode\u003Elet phone = await willGetNewPhone\u003C\u002Fcode\u003E 或 \u003Ccode\u003Elet message = await showOff(phone)\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E可於函式內使用 \u003Ccode\u003Etry {} catch (error) {}\u003C\u002Fcode\u003E 攔截未預期行為或錯誤訊息\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EgetData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E data1 \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EpromiseFn\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E data2 \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EpromiseFn\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata1\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data2\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token function\"\u003EgetData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"rxjs-observables\"\u003ERxJS (Observables)\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Cp\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fblog.techbridge.cc\u002F2017\u002F12\u002F08\u002Frxjs\u002F\"\u003E希望是最淺顯易懂的 RxJS 教學\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fblog.jerry-hong.com\u002Fseries\u002Frxjs\"\u003E30 天精通 RxJS\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003E可以被取消\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003E需要時才執行\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E Observable \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Rx\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EObservable\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E resultA\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E resultB\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E resultC\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EaddAsync\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Enum1\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E num2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E promise \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Efetch\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token template-string\"\u003E\u003Cspan class=\"token template-punctuation string\"\u003E`\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003Ehttp:\u002F\u002Fexample.com?num1=\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E${\u003C\u002Fspan\u003Enum1\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E&amp;num2=\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E${\u003C\u002Fspan\u003Enum2\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token template-punctuation string\"\u003E`\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ethen\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Ex\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E x\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ejson\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E Observable\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EfromPromise\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Epromise\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token function\"\u003EaddAsync\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Edo\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Ex\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EresultA \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E x\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EflatMap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Ex\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EaddAsync\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ex\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Edo\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Ex\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EresultB \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E x\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EflatMap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Ex\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EaddAsync\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ex\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Edo\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Ex\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EresultC \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E x\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Esubscribe\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Ex\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"total\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E x\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EresultA\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E resultB\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E resultC\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003EObservable.fromPromise\u003C\u002Fcode\u003E 會將 Promise 轉換成 observable stream。\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003E.do\u003C\u002Fcode\u003E 和 .\u003Ccode\u003EflatMap\u003C\u002Fcode\u003E 是 Observable 的運算子。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"ajax\"\u003EAJAX\u003C\u002Fh2\u003E\n\u003Cp\u003E在講到非同步處理時，會有兩個經常出現的相關詞彙——「REST」和「AJAX」，這兩個名詞其實都是技術概念的總稱。\u003C\u002Fp\u003E\n\u003Cp\u003EREST（Representational State Transfer）是一種網路架構的設計概念，定義交換資訊時需要的具體狀態，例如統一介面、所有資源都具有唯一的 URI、可以透過超連結彼此連接、不具有狀態，每次的互動都在一次裡完結，RESTful API 就是符合這種設計思想的 API。\u003C\u002Fp\u003E\n\u003Cp\u003EAJAX（Asynchronous JavaScript and XML）則是泛指如何透過 JS 取得或傳遞延伸的資料（即 XML，Extensible Mark Language），並反應到網頁上的技術概念，後續提及的 \u003Ccode\u003EXMLHttpRequest\u003C\u002Fcode\u003E 物件、jQuery 裡的 \u003Ccode\u003E.ajax\u003C\u002Fcode\u003E function、Fetch 和 axios 都是種 AJAX 技術。\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fqiita.com\u002Fdoriven\u002Fitems\u002F503fdc6de9bc0e725334\"\u003ENative な JavaScript で Fetch API を利用し Ajax を行う\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fqiita.com\u002Fkatsunory\u002Fitems\u002F9bf9ee49ee5c08bf2b3d\"\u003EJavascript の Ajax についての基本まとめ - Qiita\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fjzchangmark.wordpress.com\u002F2016\u002F06\u002F12\u002F%E9%80%8F%E9%81%8E-curl%E3%80%81python%E3%80%81postman-%E4%BE%86-request-api\u002F\"\u003E透過 curl、Python、Postman 來 Request API - 🐴 的學習筆記\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Frealdennis.medium.com\u002F%E4%B8%80%E8%B5%B7%E4%BE%86%E6%8A%8A%E7%85%A9%E4%BA%BA-xmlhttprequest-%E8%AE%8A%E6%88%90-fetch-%E6%80%8E%E9%BA%BC%E6%A8%A3-8657f2854894\"\u003E一起來把煩人 XMLHttpRequest 變成 Fetch 怎麼樣？\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Feyesofkids.gitbooks.io\u002Fjavascript-start-from-es6\u002Fcontent\u002Fpart4\u002Fajax_fetch.html\"\u003EAJAX 與 Fetch API · 從 ES6 開始的 JavaScript 學習生活\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"1-xmlhttprequest\"\u003E1. XMLHttpRequest\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E於 2006 年正式列入 W3C 標準中\u003C\u002Fli\u003E\n\u003Cli\u003E難以閱讀與撰寫\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E result \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E document\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EquerySelector\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\".result\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EreqOnload\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E data \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eparse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EresponseText\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E email \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eresults\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eemail\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  result\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EtextContent \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E email\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EreqError\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eerr\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E request \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EXMLHttpRequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nrequest\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eopen\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"get\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"https:\u002F\u002Frandomuser.me\u002Fapi\u002F\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nrequest\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nrequest\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eonload \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E reqOnload\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nrequest\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eonerror \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E reqError\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"2-jqueryajax\"\u003E2. jQuery.ajax()\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E基於 XHR 開發，然而 XHR 架構不清晰，並已有替代方案\u003C\u002Fli\u003E\n\u003Cli\u003EjQuery 整體項目太大，效益低落\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E result \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\".result\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n$\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eajax\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  url\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"https:\u002F\u002Frandomuser.me\u002Fapi\u002F\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  dataType\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"json\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function-variable function\"\u003Esuccess\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    result\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ehtml\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eresults\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eemail\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"3-fetch\"\u003E3. Fetch\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E自 ES6 起提供的方式\u003C\u002Fli\u003E\n\u003Cli\u003E概念相近 jQuery 的 \u003Ccode\u003E$.ajax\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E使用 ES6 的 Promise 進行回傳，回傳 \u003Ccode\u003EReadableStream\u003C\u002Fcode\u003E 物件\u003C\u002Fli\u003E\n\u003Cli\u003E需搭配 then 與 catch 進行處理\u003C\u002Fli\u003E\n\u003Cli\u003E會將 400，500 都當做請求成功，需要另外做處理\u003C\u002Fli\u003E\n\u003Cli\u003E預設不帶 cookie\u003C\u002Fli\u003E\n\u003Cli\u003E不支援 timeout handle\u003C\u002Fli\u003E\n\u003Cli\u003E不支援監測請求的進度\u003C\u002Fli\u003E\n\u003Cli\u003E較早的瀏覽器並不支援（IE11 以下不支援）\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E result \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E document\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EquerySelector\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\".result\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token function\"\u003Efetch\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"https:\u002F\u002Frandomuser.me\u002Fapi\u002F\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ethen\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eresponse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eresponse\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E response\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ejson\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ethen\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E email \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eresults\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eemail\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    result\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EtextContent \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E email\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ecatch\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eerr\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"4-axios\"\u003E4. Axios\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Feugenesu0515.github.io\u002FBlog\u002F2018\u002F06\u002F25\u002FVue%E5%A5%97%E4%BB%B6%E4%BB%8B%E7%B4%B9%EF%BC%9Aaxios\u002F\"\u003EVue 套件介紹：axios - Eugene Su\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EVue.js 作者推薦使用\u003C\u002Fli\u003E\n\u003Cli\u003E使用需引入 \u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fgithub.com\u002Faxios\u002Faxios\"\u003Eaxios\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E概念相近 jQuery 的 \u003Ccode\u003E$.ajax\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E可以在 node.js 中使用\u003C\u002Fli\u003E\n\u003Cli\u003E支援防 CSRF\u003C\u002Fli\u003E\n\u003Cli\u003E提供併發請求\u003C\u002Fli\u003E\n\u003Cli\u003E相當輕量，約 13kb\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E result \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E document\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EquerySelector\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\".result\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\naxios\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eget\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"https:\u002F\u002Frandomuser.me\u002Fapi\u002F\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ethen\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eresponse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E data \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E response\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    result\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EtextContent \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eresults\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eemail\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ecatch\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eerr\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efinally\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Execued\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch2 id=\"es6-加進的新功能\"\u003EES6 加進的新功能\u003C\u002Fh2\u003E\n\u003Ch3 id=\"1-default-parameters\"\u003E1. Default Parameters\u003C\u002Fh3\u003E\n\u003Cp\u003E更快速的 function 參數給定預設值：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003Elink\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eheight \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E50\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E color \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"red\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E url \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"https:\u002F\u002Fexample.com\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F ...\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"2-template-literals\"\u003E2. Template Literals\u003C\u002Fh3\u003E\n\u003Cp\u003E允許透過語法 \u003Ccode\u003E${val}\u003C\u002Fcode\u003E 將變數嵌入至字串中：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E name \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token template-string\"\u003E\u003Cspan class=\"token template-punctuation string\"\u003E`\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003EYour name is \u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E${\u003C\u002Fspan\u003Efirst\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E${\u003C\u002Fspan\u003Elast\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token template-punctuation string\"\u003E`\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"3-multi-line-strings\"\u003E3. Multi-line Strings\u003C\u002Fh3\u003E\n\u003Cp\u003E允許使用 `（backticks）接受多行字串指定：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E name \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token template-string\"\u003E\u003Cspan class=\"token template-punctuation string\"\u003E`\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003Efirst line\nsecond line\u003C\u002Fspan\u003E\u003Cspan class=\"token template-punctuation string\"\u003E`\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"4-destructing-assignment\"\u003E4. Destructing Assignment\u003C\u002Fh3\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003Eobject\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003Ea\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E b\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E …rest\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E5\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nconsole\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ea\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E    \u003Cspan class=\"token comment\"\u003E\u002F\u002F 1\u003C\u002Fspan\u003E\nconsole\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eb\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E    \u003Cspan class=\"token comment\"\u003E\u002F\u002F 2\u003C\u002Fspan\u003E\nconsole\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Erest\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F [3, 4, 5]\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E o \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Ep\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E42\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E q\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Ep\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E q\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E o\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nconsole\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ep\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F 42\u003C\u002Fspan\u003E\nconsole\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eq\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F true\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"5-object-literals\"\u003E5. Object Literals\u003C\u002Fh3\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EgetCar\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Emake\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E model\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E value\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n   \u003Cspan class=\"token comment\"\u003E\u002F\u002F with property value shorthand\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F syntax, you can omit the property\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F value if key matches variable\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F name\u003C\u002Fspan\u003E\n  make\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F same as make: make\u003C\u002Fspan\u003E\n  model\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F same as\u003C\u002Fspan\u003E\n  model\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E model\n  value\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F same as value: value\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F computed values now work with\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F object literals\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'make'\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E make\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F Method definition shorthand syntax\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F omits `function` keyword &amp; colon\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Edepreciate\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Evalue \u003Cspan class=\"token operator\"\u003E-=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2500\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E car \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EgetCar\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'Kia'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'Sorento'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E40000\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"6-arrow-function\"\u003E6. Arrow Function\u003C\u002Fh3\u003E\n\u003Cp\u003E箭頭函式亦會更改物件裡的 this 指向行為，從原本的指向呼叫者改為指向其所屬物件\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eparam1\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E param2\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E...\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E paramN\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E statements \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eparam1\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E param2\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E...\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E paramN\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E expression\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F 等於 : =\u003E { return expression; }\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F 只有一個參數時, 括號才能不加:\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003EsingleParam\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E statements \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token parameter\"\u003EsingleParam\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E statements \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F 若無參數, 就一定要加括號:\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E statements \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"7-promise\"\u003E7. Promise\u003C\u002Fh3\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003Ewait1000\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EPromise\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eresolve\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E reject\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetTimeout\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eresolve\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1000\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token function\"\u003Ewait1000\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ethen\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Yay!\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ewait1000\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ethen\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Wheeyee!\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"8-let--const-block-scoped\"\u003E8. Let &amp; Const, Block-Scoped\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003Elet\u003C\u002Fcode\u003E 和 \u003Ccode\u003Econst\u003C\u002Fcode\u003E 的作用域從之前 \u003Ccode\u003Evar\u003C\u002Fcode\u003E 的函式變成了離此變數最近的 \u003Ccode\u003E{}\u003C\u002Fcode\u003E 區塊範圍內\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Elet\u003C\u002Fcode\u003E 不可重覆宣告，執行時會吐出錯誤\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Econst\u003C\u002Fcode\u003E 宣告時即須初始化，並且不可修改\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EletExample\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Evalue\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Evalue\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E letValue \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E value\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"inside block\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E letValue\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F [SyntaxError] redeclaration of letValue would be a SyntaxError\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E letValue \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"foo\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Etry\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F [SyntaxError] Accessing letValue is a Reference Error because it\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F was defined w\u002Fin if-block\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EletValue\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F if we get here, it means that the JS engine didn't\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F throw an exception, which means that the engine\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F (or transpiled code) did not faithfully reproduce\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F how let should work\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"let not faithfully handled\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ecatch\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ee\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F e is a ReferenceError\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"letValue not accessible\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E e\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003EletExample\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"9-classes\"\u003E9. Classes\u003C\u002Fh3\u003E\n\u003Cp\u003EES6 透過 prototype 和 function 實作出了類 inheritance 結構的 class，但仍和傳統 Java、Python 的 class 有些差別\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003ECat\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Econstructor\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ename \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E name\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Espeak\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ename \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E' makes a noise.'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003ELion\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eextends\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003ECat\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Espeak\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Esuper\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Espeak\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ename \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E ' roars\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"10-module\"\u003E10. Module\u003C\u002Fh3\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token comment\"\u003E\u002F\u002F Export\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E port \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E3000\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EgetAccounts\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eurl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F ...\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F Import\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E port\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E getAccounts \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"module\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nconsole\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eport\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch2 id=\"mutationobserver\"\u003EMutationObserver\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fblog.fundebug.com\u002F2019\u002F01\u002F10\u002Funderstand-mutationobserver\u002F\"\u003EJavaScript 是如何工作的：使用 MutationObserver 跟踪 DOM 的变化\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fblog.sessionstack.com\u002Fhow-javascript-works-tracking-changes-in-the-dom-using-mutationobserver-86adc7446401\"\u003EHow JavaScript works: tracking changes in the DOM using MutationObserver | by Alexander Zlatkov | SessionStack Blog\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fzh.javascript.info\u002Fmutation-observer\"\u003EDOM 变动观察器（Mutation observer）\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"簡介\"\u003E簡介\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Ccode\u003EMutationObserver\u003C\u002Fcode\u003E 會在指定的 DOM 出現變化，例如增減節點、變更屬性、修改文字時回傳通知。\u003C\u002Fp\u003E\n\u003Ch3 id=\"使用\"\u003E使用\u003C\u002Fh3\u003E\n\u003Cp\u003E想要使用 \u003Ccode\u003EMutationObserver\u003C\u002Fcode\u003E 之前，我們需要先建立一個 instance，並且傳入一個 function 讓它每次偵測到變化時調用。\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E mutationObserver \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EMutationObserver\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Emutations\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  mutations\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EforEach\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Emutation\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Emutation\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E建立好的物件有三個 methods：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003Eobserve\u003C\u002Fcode\u003E：開始監聽變化，需要兩個參數—— 你想觀測的 DOM 節點和設定用的物件\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Edisconnect\u003C\u002Fcode\u003E：停止監聽變化\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003EtakeRecords\u003C\u002Fcode\u003E：回傳 callback 啟動之前的最後一次修改\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E這裡有個開始監聽變化的例子：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token comment\"\u003E\u002F\u002F Starts listening for changes in the root HTML element of the page.\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F 第一個傳入參數為監察目標，可改為如 document.querySelector(\"body\")\u003C\u002Fspan\u003E\nmutationObserver\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eobserve\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edocument\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EdocumentElement\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  attributes\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  characterData\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  childList\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  subtree\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  attributeOldValue\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  characterDataOldValue\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E當我們調用了 \u003Ccode\u003EmutationObserver.observe(...)\u003C\u002Fcode\u003E 開始監聽，網頁上的 DOM 出現變化時，我們就能在控制台裡看到 mutations 陣列裡的各個 \u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fzh-TW\u002Fdocs\u002FWeb\u002FAPI\u002FMutationObserver#MutationRecord\"\u003EMutationRecord\u003C\u002Fa\u003E 的記錄。\u003C\u002Fp\u003E\n\u003Cp\u003E當工作完成，我們想要停止觀察 DOM，可以調用相關 method：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token comment\"\u003E\u002F\u002F Stops the MutationObserver from listening for changes.\u003C\u002Fspan\u003E\nmutationObserver\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Edisconnect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E在 \u003Ccode\u003EMutationObserver\u003C\u002Fcode\u003E 出現之前，人們用來觀測網頁元件變化的方法有：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EPolling\u003C\u002Fli\u003E\n\u003Cli\u003EMutationEvents\u003C\u002Fli\u003E\n\u003Cli\u003ECSS animations\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EPolling：最簡單也最簡潔的方法，使用瀏覽器的 \u003Ccode\u003EsetInterval\u003C\u002Fcode\u003E WebAPI 定期檢查是否發生任何變化，但這種方法會明顯地降低網路應用／網站的效能。\u003C\u002Fp\u003E\n\u003Cp\u003EMutationEvents：於 2000 年加入的 \u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FGuide\u002FEvents\u002FMutation_events\"\u003EMutation events API\u003C\u002Fa\u003E，由於它在每次 DOM 變化都會被調用，同樣導致效能問題，目前 \u003Ccode\u003EMutationEvents\u003C\u002Fcode\u003E API 已經被棄用。\u003C\u002Fp\u003E\n\u003Cp\u003ECSS animations：這是個有些特怪異的方案，基本上的概念是一個有 CSS 動畫的元素加進 DOM 中時，動畫開始就會觸發 animationstart 事件，當我們再對這個事件加上 handler，就能掌握元素加進 DOM 中的確切時間。\u003C\u002Fp\u003E\n\u003Cpre class=\"language-html\"\u003E\u003Ccode class=\"language-html\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Eid\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation attr-equals\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003Econtainer-element\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Ediv\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cpre class=\"language-css\"\u003E\u003Ccode class=\"language-css\"\u003E\u003Cspan class=\"token atrule\"\u003E\u003Cspan class=\"token rule\"\u003E@keyframes\u003C\u002Fspan\u003E nodeInserted\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token selector\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token property\"\u003Eopacity\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E 0.99\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token selector\"\u003Eto\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token property\"\u003Eopacity\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E 1\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token selector\"\u003E#container-element *\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token property\"\u003Eanimation-duration\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E 0.001s\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token property\"\u003Eanimation-name\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E nodeInserted\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E需要先檢查 \u003Ccode\u003Eevent.animationName\u003C\u002Fcode\u003E 是否是我們所想要的動畫。\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003EinsertionListener\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F Making sure that this is the animation we want.\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eevent\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EanimationName \u003Cspan class=\"token operator\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"nodeInserted\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Node has been inserted: \"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E event\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Etarget\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\ndocument\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EaddEventListener\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"animationstart\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E insertionListener\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F standard + firefox\u003C\u002Fspan\u003E\ndocument\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EaddEventListener\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"MSAnimationStart\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E insertionListener\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F IE\u003C\u002Fspan\u003E\ndocument\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EaddEventListener\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"webkitAnimationStart\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E insertionListener\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F Chrome + Safari\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Ccode\u003EMutationObserver\u003C\u002Fcode\u003E 相較這些方案提供了更多優勢，包括它涵蓋了 DOM 中的每種可能變化，以及分段啟動的特性，讓它有更好的效能，並且擁有相當優秀的支援性。\u003C\u002Fp\u003E\n\u003Ch2 id=\"intersectionobserver\"\u003EIntersectionObserver\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fcodepen.io\u002Fosublake\u002Fembed\u002F6fd214ecd74e7091ec7b609bb0270f97?height=450&amp;slug-hash=6fd214ecd74e7091ec7b609bb0270f97&amp;user=osublake&amp;tab-bar-color=%23222&amp;name=cp_embed_2#result-box\"\u003Eexample\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"簡介-1\"\u003E簡介\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Ccode\u003EIntersectionObserver\u003C\u002Fcode\u003E 會在指定的目標出現在觀察器 (window) 中時，才回傳 \u003Ccode\u003Etrue\u003C\u002Fcode\u003E，\n不同於 jQuery 的 \u003Ccode\u003Eonscroll\u003C\u002Fcode\u003E 是在每次捲動時都執行一次監聽。\u003C\u002Fp\u003E\n\u003Ch3 id=\"使用-1\"\u003E使用\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Ccode\u003Elet observer = new IntersectionObserver(callback, [option]);\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003Ecallback\u003C\u002Fcode\u003E: 要執行的動作函式\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003Ecallback 預設的傳入參數為一陣列\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F 唯讀變數，目標元素的矩形節點的資訊 (ID、座標、長寬)\u003C\u002Fspan\u003E\n    boundingClientRect\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F 目標元素的出現比例\u003C\u002Fspan\u003E\n    intersectionRation\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F 唯讀變數，目標元素與觀察器的相交區域\u003C\u002Fspan\u003E\n    intersectionRect\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F 是否出現於觀察器中\u003C\u002Fspan\u003E\n    isIntersecting\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F 觀察器的資訊\u003C\u002Fspan\u003E\n    rootBounds\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F 目標\u003C\u002Fspan\u003E\n    target\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E 目標的 \u003Cspan class=\"token constant\"\u003EDOM\u003C\u002Fspan\u003E 節點\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003Eoption\u003C\u002Fcode\u003E: 有三個參數可調整\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  root\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  rootMargin\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"0px 0px 0px 0px\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  threshold\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Ccode\u003Eroot\u003C\u002Fcode\u003E: 可指定某個特定的 element 做為觀察器: \u003Ccode\u003Eroot: documnet.getElementById(&#39;container&#39;)\u003C\u002Fcode\u003E，預設值為 \u003Ccode\u003Enull\u003C\u002Fcode\u003E，即目前觀看中的視窗。\n\u003Ccode\u003ErootMargin\u003C\u002Fcode\u003E: 四個值依序為上、右、下、左，可放大或縮小的觀察器的範圍，預設值為 \u003Ccode\u003E&quot;0px 0px 0px 0px&quot;\u003C\u002Fcode\u003E。\n\u003Ccode\u003Ethreshold\u003C\u002Fcode\u003E: 指定目標出現於觀察器內的百分比，到達該值後才執行 callback，可指定多個值如: \u003Ccode\u003E[0, 0.25, 0.5, 0.75, 1]\u003C\u002Fcode\u003E 會在目標出現 0%、25%、50%、75%、100% 的時候都執行一次 callback 函式，預設值為 \u003Ccode\u003E[0]\u003C\u002Fcode\u003E，即目標接觸到觀察器的邊緣便觸發 callback 函式。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Eobserver.observe(el)\u003C\u002Fcode\u003E\n\u003Ccode\u003Eobserver.unobserve(el)\u003C\u002Fcode\u003E\n\u003Ccode\u003Eobserver.disconnect()\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Ch2 id=\"進階\"\u003E進階\u003C\u002Fh2\u003E\n\u003Ch3 id=\"whats-this-in-javascript-\"\u003EWhat&#39;s THIS in JavaScript ?\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003Ethis\u003C\u002Fcode\u003E 是 JavaScript 的一個關鍵字。\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Ethis\u003C\u002Fcode\u003E 是 function 執行時，自動生成的一個內部物件。\u003C\u002Fli\u003E\n\u003Cli\u003E隨著 function 執行場合的不同，\u003Ccode\u003Ethis\u003C\u002Fcode\u003E 所指向的值，也會有所不同。\u003C\u002Fli\u003E\n\u003Cli\u003E在大多數的情況下，\u003Ccode\u003Ethis\u003C\u002Fcode\u003E 代表的就是呼叫 function 的物件（Owner Object of the function）。\n亦即 function 執行時所屬的物件，而非 function 本身\u003C\u002Fli\u003E\n\u003Cli\u003E脫離物件的 \u003Ccode\u003Ethis\u003C\u002Fcode\u003E 基本上沒有任何意義\u003C\u002Fli\u003E\n\u003Cli\u003E沒有意義的 \u003Ccode\u003Ethis\u003C\u002Fcode\u003E 會根據\u003Cstrong\u003E嚴格模式\u003C\u002Fstrong\u003E以及\u003Cstrong\u003E環境\u003C\u002Fstrong\u003E給一個預設值\u003C\u002Fli\u003E\n\u003Cli\u003E嚴格模式底下預設就是 \u003Ccode\u003Eundefined\u003C\u002Fcode\u003E，非嚴格模式在瀏覽器底下預設值是 \u003Ccode\u003Ewindow\u003C\u002Fcode\u003E。\u003C\u002Fli\u003E\n\u003Cli\u003E要看 this，就看這個函式「怎麽」被呼叫\n例如 \u003Ccode\u003EaddEventListener\u003C\u002Fcode\u003E 底下的 \u003Ccode\u003Ethis\u003C\u002Fcode\u003E 會是「觸發事件的元素」\n但裡頭的 callback function 中的 \u003Ccode\u003Ethis\u003C\u002Fcode\u003E 會因為 Default Binding 而指向 \u003Ccode\u003Ewindow\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E可以用 \u003Ccode\u003Ecall\u003C\u002Fcode\u003E、\u003Ccode\u003Eapply\u003C\u002Fcode\u003E 與 \u003Ccode\u003Ebind\u003C\u002Fcode\u003E 指定 this 的值\n或是 arrow function 強制綁定 this、使用一個變數儲存 this 當做參考值\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-jsx\"\u003E\u003Ccode class=\"language-jsx\"\u003E\u003Cspan class=\"token string\"\u003E\"use strict\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ehello\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Ea\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E b\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E a\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E b\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token function\"\u003Ehello\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ecall\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"yo\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F 第一個參數值即為 this\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003Ehello\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eapply\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"hihihi\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F apply 以 Array 的方式傳進參數\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F 這兩種方式皆為呼叫 function 的函式\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E myHello \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ehello\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ebind\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"my\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003EmyHello\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F bind 則是會回傳一個新的 function\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F 並且在調用 bind 後值就不會改變了\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fkuro.tw\u002Fposts\u002F2017\u002F10\u002F12\u002FWhat-is-THIS-in-JavaScript-%E4%B8%8A\u002F\"\u003EWhat&#39;s THIS in JavaScript ? [上]\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fblog.techbridge.cc\u002F2019\u002F02\u002F23\u002Fjavascript-this\u002F\"\u003E淺談 JavaScript 頭號難題 this：絕對不完整，但保證好懂\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fithelp.ithome.com.tw\u002Farticles\u002F10193193\"\u003E重新認識 JavaScript: Day 20 What&#39;s &quot;THIS&quot; in JavaScript (鐵人精華版)\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"closure\"\u003EClosure\u003C\u002Fh3\u003E\n\u003Cp\u003E閉包（Closure）是利用變數作用域的特性，加上一層 function 以限制儲存環境的變數值作用範圍，避免污染 global 環境，且此變數不會因為 function 執行完畢後而消失\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token comment\"\u003E\u002F\u002F without closure\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E count \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EcounterTick\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E++\u003C\u002Fspan\u003Ecount\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\nconsole\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EcounterTick\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F 1\u003C\u002Fspan\u003E\nconsole\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EcounterTick\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F 2\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F with closure\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ecounter\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E count \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EcounterTick\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E++\u003C\u002Fspan\u003Ecount\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E counterTick\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F also could be written as arrow function\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E++\u003C\u002Fspan\u003Ecount\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E countFunc \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ecounter\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nconsole\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EcountFunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F 1\u003C\u002Fspan\u003E\nconsole\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EcountFunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F 2\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fblog.techbridge.cc\u002F2018\u002F12\u002F08\u002Fjavascript-closure\u002F\"\u003E所有的函式都是閉包：談 JS 中的作用域與 Closure\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"hoisting\"\u003EHoisting\u003C\u002Fh3\u003E\n\u003Cp\u003EHoisting（提升）是指一個變數或函式在宣告前就被使用，JavaScript 就會在使用之前再進行一次宣告，而變數只會單純宣告不會給定值，因此執行結果通常會是 \u003Ccode\u003Eundefined\u003C\u002Fcode\u003E ，具體上如下例\u003C\u002Fp\u003E\n\u003Cpre class=\"language-jsx\"\u003E\u003Ccode class=\"language-jsx\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E x \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003EdoSomething\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Ey\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E x\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F 此行非原本撰寫的程式\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F 是由於下面使用的 x=100 裡的 x 未經宣告\u003C\u002Fspan\u003E\n  console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ex\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F 而被 JavaScript 提升至執行序的先頭\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F 概念上類似移動至此函式的最上方進行宣告\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F 因此函式內部的 console.log 會是 undefined\u003C\u002Fspan\u003E\n  x \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E100\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E x \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E y\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nconsole\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EdoSomething\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E50\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F 150\u003C\u002Fspan\u003E\nconsole\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ex\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F 1\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E函式則分有存入變數及直接定義的兩種宣告方式，存入變數的函式宣告由於與變數同樣只有宣告被提升，因此會出現 \u003Ccode\u003ETypeError\u003C\u002Fcode\u003E 錯誤，直接定義的函式則會連同內容一起被提升\u003C\u002Fp\u003E\n\u003Cpre class=\"language-jsx\"\u003E\u003Ccode class=\"language-jsx\"\u003E\u003Cspan class=\"token function\"\u003Esquare\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F 傳入變數式\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F 執行結果會為 TypeError: square is not a function\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003Esquare\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E number \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E number\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F 直接定義式\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F 執行結果為正常輸出\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Esquare\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E number \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E number\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E若有同名的定義函式和變數使用，由於函式的優先權較高，執行結果會是定義函式\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Elet\u003C\u002Fcode\u003E 和 \u003Ccode\u003Econst\u003C\u002Fcode\u003E 一樣也有 Hoisting 行為，但這兩種宣告不會被初始化成 \u003Ccode\u003Eundefined\u003C\u002Fcode\u003E ，並且在賦值之前就存取這兩種宣告的值時，會直接拋出錯誤\u003C\u002Fp\u003E\n\u003Cp\u003E而當初加入 Hoisting 設計的原因是為了達成函式相互歸遞（mutual recursion），以及避免必須以類 ML 語言的順序撰寫（avoid painful bottom-up ML-like order）\u003C\u002Fp\u003E\n\u003Cp\u003E實際運作上是 JavaScript 會於執行 function 時產生一個 Execution Contexts 執行環境（同理亦有 global EC），將所有需要的資訊存在裡面，裡頭會有個對應的 Variable Object 用以存放宣告的變數、函式和傳入的變數，在執行的時候到 VO 裡頭查找，並依參數、函式和變數的順序放入其中\u003C\u002Fp\u003E\n\u003Cp\u003E參數傳進 VO 時直接放入，沒有值的話會初始化為 \u003Ccode\u003Eundefined\u003C\u002Fcode\u003E ；function 傳進 VO 時新增一屬性放入建立 function 完後的回傳值（可類比為指向此 function 的指標），已有同名屬性時進行覆蓋；變數傳進 VO 時新增一屬性並賦值為 \u003Ccode\u003Eundefined\u003C\u002Fcode\u003E ，已有同名屬性時則不會修改該值\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Elet\u003C\u002Fcode\u003E 和 \u003Ccode\u003Econst\u003C\u002Fcode\u003E 多做了一個檢查，皆是在「提升之後」和「賦值之前」的「執行期間」內（Temporal Dead Zone）被存取就會拋出錯誤，亦即 Hoisting 的原理實質上是執行時序的調動，而非程式碼的編修\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fblog.techbridge.cc\u002F2018\u002F11\u002F10\u002Fjavascript-hoisting\u002F\"\u003E我知道你懂 hoisting，可是你了解到多深？\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"浮點數計算\"\u003E浮點數計算\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002F0.30000000000000004.com\u002F\"\u003EFloating Point Math\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"typescript\"\u003ETypeScript\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fwillh.gitbook.io\u002Ftypescript-tutorial\u002F\"\u003ETypeScript 新手指南\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Ffuture-architect.github.io\u002Ftypescript-guide\u002F\"\u003E仕事ですぐに使える TypeScript\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"api-mocking\"\u003EAPI Mocking\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fdrive.google.com\u002Ffile\u002Fd\u002F1OOV55pClWtNBBM7StU7wepH39-UZb0lM\u002Fview\"\u003E用 API mocking 讓前端不再苦苦等待\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"參考資料\"\u003E參考資料\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fithelp.ithome.com.tw\u002Fusers\u002F20065504\u002Fironman\u002F1259\"\u003E重新認識 JavaScript 系列\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fjohnresig.com\u002Fapps\u002Flearn\u002F\"\u003ELearning Advanced JavaScript\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fchupainotebook.blogspot.com\u002Fsearch\u002Flabel\u002F%E5%85%8B%E6%9C%8D%20JS%20%E7%9A%84%E5%A5%87%E6%80%AA%E9%83%A8%E5%88%86\"\u003E克服 JS 的奇怪部份\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fgithub.com\u002Fgetify\u002FYou-Dont-Know-JS\u002Fblob\u002F2nd-ed\u002Fget-started\u002Fch1.md\"\u003EYou Don&#39;t Know JS Yet: Get Started - 2nd Edition\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fexploringjs.com\u002Fdeep-js\u002Ftoc.html\"\u003EDeep JavaScript\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fgithub.com\u002Fstephentian\u002F33-js-concepts\"\u003EJavaScript 开发者应懂的 33 个概念\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fqiita.com\u002Foimo23\u002Fitems\u002Fb380a914867ec973039a\"\u003E【翻訳】JavaScript 開発者が知るべき 33 のコンセプト リンク集 - Qiita\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fqiita.com\u002Frana_kualu\u002Fitems\u002F6bcc99226be741348c34\"\u003E2016 年から 2019 年までの JavaScript の全て\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fgithub.com\u002FAllJointTW\u002Fclean-code-javascript\"\u003E無瑕的程式碼 JavaScript\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fblog.techbridge.cc\u002F2017\u002F07\u002F15\u002Fjavascript-event-propagation\u002F\"\u003EDOM 的事件傳遞機制：捕獲與冒泡\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fmedium.com\u002Fenjoy-life-enjoy-coding\u002Fjavascript-%E9%97%9C%E6%96%BC-object-%E4%B8%80%E5%8F%A3%E6%B0%A3%E5%85%A8%E8%AA%AA%E5%AE%8C-4bb924bcc79f\"\u003EJavaScript | 關於 Object ，一口氣全說完\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fmedium.com\u002Fwalkout\u002Fjs-%E5%8E%9F%E5%8A%9B%E8%A6%BA%E9%86%92-day13-event-queue-event-loop-event-table-374fbbef3e40\"\u003EJS 原力覺醒 — Event Queue &amp; Event Loop 、Event Table\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fblog.huli.tw\u002F2020\u002F04\u002F18\u002Fjavascript-function-is-awesome\u002F\"\u003E覺得 JavaScript function 很有趣的我是不是很奇怪 - Huli\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Ff2e.kalan.dev\u002F\"\u003E深入現代前端開發\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fazu.github.io\u002Fpromises-book\u002F\"\u003EJavaScript Promise の本\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n",date:"2019-07-18T07:03:00.000Z",excerpt:null,printDate:"July 18, 2019",printReadingTime:"14 min read",tags:["F2E","JavaScript"]}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.8ed0d3c1.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main","/client/client.8ed0d3c1.js")}document.head.appendChild(s)</script> 